(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-63dbfcca"],{"37a6":function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"reset-pwd-page"},[o("navigation-bar",{attrs:{pageName:t.title},on:{onLeftClick:t.onBack}}),o("div",{staticClass:"setpwd-content"},[o("div",{staticClass:"phone-number"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.phoneNum,expression:"phoneNum"}],staticClass:"input-phone",attrs:{type:"tel",placeholder:"输入手机号",maxlength:"11",onkeyup:"value=value.replace(/[^\\d]/g,'')"},domProps:{value:t.phoneNum},on:{input:function(e){e.target.composing||(t.phoneNum=e.target.value)}}})]),o("div",{staticClass:"phone-authcode"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.phoneAuthCode,expression:"phoneAuthCode"}],staticClass:"input-authcode",attrs:{type:"tel",placeholder:"输入验证码",maxlength:"6",onkeyup:"value=value.replace(/[^\\d]/g,'')"},domProps:{value:t.phoneAuthCode},on:{input:function(e){e.target.composing||(t.phoneAuthCode=e.target.value)}}}),o("div",{staticClass:"get-verification",style:{color:t.verifyStrColor},on:{click:t.getPhoneValit}},[t._v(t._s(t.verifyCodeStr))])]),o("div",{staticClass:"new-password"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"input-password",attrs:{type:"password",placeholder:"输入新密码（6-16位字符）",maxlength:"16"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),o("div",{staticClass:"ok-btn",style:{"background-color":t.okBtnBackground,"box-shadow":t.okBtnShadow},on:{click:t.clickedokBtn}},[t._v("\n        确认\n        ")])]),o("van-dialog",{attrs:{confirmButtonColor:"#fb5768",message:t.dialogMessage,"show-cancel-button":"",beforeClose:t.beforeClose},model:{value:t.isShowDialog,callback:function(e){t.isShowDialog=e},expression:"isShowDialog"}})],1)},s=[],a=o("d28e"),i=o("2b0e"),c=o("d399"),h=o("0aa6");i["a"].use(c["a"]);var u={components:{NavigationBar:h["a"]},name:"resetPwd",mounted:function(){var t=this.$route.params;void 0!=t&&void 0!=t.phoneNum&&(this.phoneNum=t.phoneNum),this.getPubKey()},data:function(){return{title:"重置密码",verifyCodeStr:"获取验证码",verifyStrColor:"#FB5768",phoneNum:"",phoneAuthCode:"",password:"",okBtnEnable:!1,isShowDialog:!1,dialogMessage:"",publicKey:""}},watch:{phoneNum:function(t){this.changngeLoginBtnStatus()},phoneAuthCode:function(t){this.changngeLoginBtnStatus()},password:function(t){this.changngeLoginBtnStatus()}},computed:{okBtnBackground:function(){return this.okBtnEnable?"#FB5768":"#D0CDCE"},okBtnShadow:function(){return this.okBtnEnable?"0 0 15px 0 rgba(197,58,72,0.39)":" 0 0 15px 0 #D0CDCE"}},methods:{changngeLoginBtnStatus:function(){this.okBtnEnable=this.phoneNum.length>=11&&this.phoneAuthCode.length>=6&&this.password.length>=6},clickedokBtn:function(){var t=this;if(console.log("点击确认按钮"),this.okBtnEnable){var e=btoa(this.password),o=this.phoneNum+","+this.phoneAuthCode+","+e,n=i["a"].prototype.$getRSASign(o,this.publicKey),s={modifyInfo:n};Object(a["g"])(s).then((function(e){t.showMsg(e.msg),0==e.resultCode&&t.onBack()})).catch((function(e){t.showMsg(e)}))}},getPhoneValit:function(){var t=this;if("获取验证码"==this.verifyCodeStr)if(void 0!==this.phoneNum&&0!=this.phoneNum.length){var e=/^1[0-9]{10}$/;if(e.test(this.phoneNum)){var o={PHONE:this.phoneNum};Object(a["e"])(o).then((function(e){"1"==e.success?t.getPhoneAuthCode():(t.dialogMessage="该手机号尚未注册，请通过验证码登录",t.isShowDialog=!0)})).catch((function(e){t.showMsg(e)}))}else this.showMsg("请输入有效的手机号码")}else this.showMsg("请输入手机号")},getPhoneAuthCode:function(){var t=this,e={PHONE:this.phoneNum};Object(a["b"])(e).then((function(e){if(0==e.success)t.showMsg(e.msg);else{t.showMsg("验证码已发送"),t.verifyStrColor="#bdbdbd";var o=60;t.verifyCodeStr=o+"秒";var n=window.setInterval((function(){o--,o>0?t.verifyCodeStr=o+"秒":(window.clearInterval(n),t.verifyStrColor="#FB5768",t.verifyCodeStr="获取验证码")}),1e3)}})).catch((function(e){t.showMsg(e)}))},beforeClose:function(t,e){"confirm"===t&&(this.$store.dispatch("changeActiveTabFun",0),this.onBack()),e()},onBack:function(){this.$router.back(-1)},showMsg:function(t){this.$toast(t)},getPubKey:function(){var t=this;Object(a["d"])().then((function(e){t.publicKey=e.data.publicKey})).catch((function(e){t.isLoading=!1}))}}},r=u,l=(o("d456"),o("2877")),d=Object(l["a"])(r,n,s,!1,null,"2553a776",null);e["default"]=d.exports},"528f":function(t,e,o){},d456:function(t,e,o){"use strict";var n=o("528f"),s=o.n(n);s.a}}]);
//# sourceMappingURL=chunk-63dbfcca.2abfbb20.js.map