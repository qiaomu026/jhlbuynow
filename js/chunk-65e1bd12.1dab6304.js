(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-65e1bd12"],{"12e3":function(e,t,i){e.exports=i.p+"img/bg_coupon_used.2de2ae70.png"},2736:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAMCAYAAABm+U3GAAAAAXNSR0IArs4c6QAAAQ5JREFUOBGdkdtOwkAURVvBAOUS/QN+iw8zMeGBxERRDMgTUIw0ioGY+Dc+8jCuTeYkttJS2Mnqmc7ZZ/cyQVBCzrk2rGAD1yVGjlsIasEnmL5ZXB2fLHAQ0IS1T3yg3vj1F7VTMJrfYlCh7z7okVqBEG793pbazk840GEgggSkJ6iYjbXC+yDpF7WsV1gxNuANpBFUswPsKXwA0gc0s57UPQaFvoL0DP9CbYDeBdyBlEBkvVSlUYcYpDHkhtogHoXfg6SvbFhvX9mowQKkCVymDAU3eHWoOlxpCfW/obP9tnMv1NKh9jxmqqBfJ82hFnDRG0pTODk0E25ZE51uTPMHemEY7sx4TvUvNmS2+wvUoFm5yP6K7gAAAABJRU5ErkJggg=="},"337f":function(e,t,i){"use strict";var s=i("abde"),o=i.n(s);o.a},"83c4":function(e,t,i){e.exports=i.p+"img/bg_coupon_expired.9b8dcd64.png"},"8c6a":function(e,t,i){e.exports=i.p+"img/no_coupon_img.a94be2ee.png"},"8c7b":function(e,t,i){"use strict";var s=i("9a1d"),o=i.n(s);o.a},"9a1d":function(e,t,i){},"9fe5":function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"myOrderList"},[i("navigation-bar",{staticClass:"title",style:e.setTopHeight,attrs:{pageName:"我的优惠券"},on:{onLeftClick:function(t){return e.goToBack()}}}),i("div",{staticClass:"tabTitle",class:{themeL:e.bindThemeL}},[i("van-tabs",{attrs:{color:"#17B7BD","line-width":"0.67rem","line-height":"0.08rem"},on:{click:e.controlTab},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},e._l(e.tabTitle,(function(e,t){return i("van-tab",{key:t,attrs:{title:e}})})),1)],1),i("van-swipe",{ref:"swipe",staticClass:"orderSwipe",attrs:{"show-indicators":!1,"initial-swipe":0,loop:!1},on:{change:e.controlSwipe}},[i("van-swipe-item",{key:0},[i("couponCard",{ref:"mychild0",attrs:{mgChildKey:"01",isActKey:"0"+(e.active+1)}})],1),i("van-swipe-item",{key:1},[i("couponCard",{ref:"mychild1",attrs:{mgChildKey:"02",isActKey:"0"+(e.active+1)}})],1),i("van-swipe-item",{key:2},[i("couponCard",{ref:"mychild2",attrs:{mgChildKey:"03",isActKey:"0"+(e.active+1)}})],1)],1)],1)},o=[],a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"couponcard"},[i("van-pull-refresh",{on:{refresh:function(t){return e.onRefresh(e.mgChildKey)}},model:{value:e.isRefresh,callback:function(t){e.isRefresh=t},expression:"isRefresh"}},[i("van-list",{style:{"min-height":e.listMinHeight+"px"},attrs:{finished:e.finished,"error-text":"请求失败，刷新重新加载","loading-text":"","immediate-check":!1},on:{load:function(t){return e.onLoad(e.mgChildKey)}},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[e._l(e.lists,(function(t,s){return 0==e.isLists?i("div",{staticClass:"commonCard"},[i("div",{staticClass:"backPic",style:{backgroundImage:"url("+("01"==e.mgChildKey?e.img.waitUsed:"02"==e.mgChildKey?e.img.alreadyUsed:e.img.outDate)+")"}},[i("div",{staticClass:"leftPoint"},[i("div",{staticClass:"couponDetail"},[i("div",[e._v("￥")]),i("div",{staticClass:"couponTotal"},[e._v(e._s(t.couponTotal))])]),i("div",{staticClass:"scopeType",on:{click:function(t){return e.showScope(s)}}},[i("span",[e._v("适用范围")]),i("img",{attrs:{src:0==t.ifShowScope?e.img.filterDown:e.img.filterUp}})])]),i("div",{staticClass:"rightPoint"},[i("div",{staticClass:"shopName"},[e._v(e._s(t.shopName))]),i("div",{staticClass:"couponLimit"},[e._v(e._s(t.name))]),i("div",{staticClass:"toUse"},[i("div",{staticClass:"useDate"},[e._v(e._s(t.effBeginDay)+"-"+e._s(t.effEndDay))]),"01"==e.mgChildKey?i("div",{staticClass:"toUsebtn",on:{click:function(i){return e.useCoupon(t.shopCode)}}},[e._v("去使用")]):e._e()])])]),1==t.ifShowScope?i("div",{staticClass:"scopeInfo"},[e._v("全品类通用")]):e._e()]):e._e()})),1==e.isLists?i("div",{staticClass:"noList",class:{noListThemeL:e.bindThemeL}},[i("img",{attrs:{src:e.img.noList}}),i("div",[e._v("暂无优惠券")])]):e._e()],2)],1)],1)},n=[],c=i("6c90"),l=(i("2f62"),{name:"couponCard",props:["mgChildKey","isActKey"],data:function(){return{lists:[],page:1,totalPages:5,loading:!1,finished:!1,isLists:!1,scopeType:[],isRefresh:!1,img:{waitUsed:i("e1ad"),alreadyUsed:i("12e3"),outDate:i("83c4"),filterDown:i("cb1c"),filterUp:i("2736"),noList:i("8c6a")},listMinHeight:document.body.clientHeight-this.$stbHeight-118,bindThemeL:0!=this.$curTheme}},methods:{getCouponList:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this;console.log("当前页数"+i.page+"当前列表"+i.mgChildKey);var s={page:i.page,rows:10,ownerCode:i.$userInfo.OWNER_CODE,status:i.mgChildKey};Object(c["k"])(s).then((function(e){i.totalPages=e.pages,console.log("没有请求数据吗"),e.data.couponScopeList.map((function(e){e.ifShowScope=!1})),0==e.total?(i.isLists=!0,i.finished=!0,i.loading=!1,i.isRefresh=!1):(i.lists=t?e.data.couponScopeList:i.lists.concat(e.data.couponScopeList),i.loading=!1,i.isLists=!1,i.isRefresh=!1,console.log("是否结束"+i.finished))}))},showScope:function(e){var t=this;console.log(e);var i=t.lists[e].ifShowScope;t.lists[e].ifShowScope=!i},emptyData:function(){var e=[];e.push(this.lists[0]),this.lists=[]},onLoad:function(e){console.log("onLoad加载数据！");var t=this;t.mgChildKey==t.isActKey&&(t.page+=1,t.totalPages>=t.page?(t.getCouponList(e,!1),t.finished=t.page>t.totalPages):(t.totalPages<t.page||""!=t.lists)&&(console.log("总页数小于等于当前页数了"),t.loading=!1,t.isRefresh=!1))},onRefresh:function(e){this.page=1,this.getCouponList(e,!0)},useCoupon:function(e){this.$router.push({name:"shopPage",params:{shopCode:e}})}}}),r=l,d=(i("8c7b"),i("2877")),p=Object(d["a"])(r,a,n,!1,null,"1b672fcc",null),h=p.exports,g=i("0aa6"),u={data:function(){return{tabTitle:["待使用","已使用","已过期"],active:0,key:0,isPushLoading:!1,setTopHeight:{"padding-top":this.$stbHeight+"px"},bindThemeL:0!=this.$curTheme}},components:{couponCard:h,NavigationBar:g["a"]},methods:{controlTab:function(e){var t=this;t.key=e,t.$refs.swipe.swipeTo(e),window.scrollTo(0,0)},controlSwipe:function(e){var t=this;t.active=e,"0"==e?(this.$refs.mychild0.onRefresh("1"),this.$refs.mychild1.emptyData(),this.$refs.mychild2.emptyData()):"1"==e?(this.$refs.mychild1.onRefresh("2"),this.$refs.mychild0.emptyData(),this.$refs.mychild2.emptyData()):(this.$refs.mychild2.onRefresh("3"),this.$refs.mychild1.emptyData(),this.$refs.mychild0.emptyData())},goToBack:function(){var e=this.$setRouterIndex();e&&this.$router.go(-1)}},mounted:function(){this.controlSwipe("0")}},m=u,f=(i("337f"),Object(d["a"])(m,s,o,!1,null,"438a01ae",null));t["default"]=f.exports},abde:function(e,t,i){},cb1c:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAMCAYAAABm+U3GAAAAAXNSR0IArs4c6QAAAQVJREFUOBGlkd1KAlEURuc0U47zQ/l4PZggdBEEalka3lgpJZUgwjyE7+HFaX1juwtRmcYPFvuc2Wev+XPe+yIIgjVcO+c21NrBdcFwD/KAzQgU1aiuldlzGIMykrgBL9qRR/i3nBlJn0GZQKN8QBYxTEG5h7Dqk3NWUnvrV9ZbqQm40IR3ULpwZr1DlTMRDEF5g3jvWRoJzEG5g4NyepI+gTKD/VK7EwdS+ALlFpz1rHJN0gEoesum9Y5WDmawAOUG/uSsQ3gAZQ7JUdluk4EclqB0wIGk+rnKJ6S7c5X2DF7CCpQ29MuV99/UelK7M4IrKH6FKvpEmfVPqohaoM/yAXkV2Q+jmVmqKd7MGwAAAABJRU5ErkJggg=="},e1ad:function(e,t,i){e.exports=i.p+"img/mall_bg_coupon_unaccalimed.23297250.png"}}]);
//# sourceMappingURL=chunk-65e1bd12.1dab6304.js.map