(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c498d454"],{"3a83":function(t,s){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAQKADAAQAAAABAAAAQAAAAABGUUKwAAAFF0lEQVR4Ae2ZXWhcRRTHs4kxAbdKlaIihKwWfZNqvliSKPUjkETBhwZaH3zxTX1QX3yTtEVREYWSgt9PBYuhj1sRosaswaQm+tQHbUUpjdIoQe1SNiGb+Du6c5m9udvMvXf2btbOwGXmnJ17/uf858ydj21qcsUx4BhwDDgGHAOOAceAY8AxcE0ykDKNuqura4y+x3n2pFKplc3NzW9oH11cXJw3tbET+zWHcGqCvnukP8HfTDXKM9PT0/O46Bq1GBPAqP8ZEOT1kPHe0NDQDQG/NYTKmACiOQgJn1Iv8hRUdBBw28rKSsNmgfE3QAUsdXd39wECn9R1dW6vMThn8eFkOp1+a3p6et3UnzAZ4Nlsa2v7DGHNU9S/IVPxPp7XC4XCaWrjgY1EwOzs7GUYn6l/3Fs9IPhHydCnt/4SrLkuWG2kzdHrEdUTQmRp/FnJCdc3gbdXwxyi/YEmV21GJqClpSW3vr7+tmb5AnuCbk1OrNnX13cjvvylABmMW1V7uzrSFBCj8/Pz56jOKwBGf182m71DyUnWGxsb+3x4Sz65qhiZgLJFmQZeYRRGPCHBBgQ8p8ORAV/r8tXasQgAqIIAskB2h4kW0v9eAA9ooGvt7e3GS3QsAjKZzFcA65uih4eHh9s0Z2reJOsOA+ItewzK+/l8/ndT4FgETE5Oyl5gSgNLLy8vP6jJNW1yQLsfgCcUCMEX2aO8qmSTOhYBZYCKaYAuyWlwxBfkO+xRfvXprirGJoD5dtqHkMiHkNHvA1cn+wpL82s+X7YVYxMgjJN632tIe3t7e+/W5Fo1K0YfH46zNF8KCxabAAEEvGIasCzpIxPWp237s9Xtp5Ps9lQpsAK9oYQwtS0C/NOgpgQQ7FE9SAbgGLvQP3SdadsKASMjI3It5jmAg4P9/f27TJ0I04/p9Rj996t3CP5vvkNvKjls7a2fYV/09+ej9Am6Mb++1jIEHF5YWBiPimMlAxiVW3DAOxlGdSbsewR/iWzTD2RhTTRZIYCPnmw+dodGj/ECwV8m+EPMfe8UGMVc7ClQ3o19C7gic5O2LItS16JcweiZ1tbWibm5uV/iAkS+D1DAjMQxRkIFL0viCebkU+r3nV57jkdxVE5iBC9r8r+lnJYvKbkR6lgEcBK7Uw8SMk4xJ3/TdTu9HesbwI5MbmK/q2eQZN2P4B9k2unbcWOXYmVAGbSuBDAAcu54xThiX8dYBIgtRuBJnos+u0mLQX/bGfkQawooBNkIMRLPsh+QD6JsihIrkH8O7Bcb7duTGEHbAVnJAB1E7ujJhOcZlSz6DM9ZRunzzs7Od7lCK+l9Tdq27fkxrRLAVMiWSqWTgHRsAUqlzkDKGKl6wf9bNdm2vSCc2B9BZXRgYGA3wZ9C3hK89CH4XqoT4+PjRpi27YkPQcXImaAX/bpisfgyutt9eu/KvKwfzOVyh3x9AkXb9gJBUFojgBEeVCDMeZnrD5Huu2i/oPRS0+8BXa7Wtm2vGo41AgC4RwP5ieC/FJl7+g81vTRNL0xt2/O58Z9ok4AfNIS7OCbvF3l1ddX/X71sXU2KbXuBmLGPw8oqqZ4nbbtEpm6h+gIS5LY2rfpITb8ZXa7Wtm2vGo61DOBi8ggg/pNgRfD8nh8dHf24mjO63rY93bbevub3AZKq1srS0tLFjo6OjzBY5FkljUuS8s3NzROZTOaZqampUIcW2/asBeoMOQYcA44Bx4BjwDHgGHAM/A8Y+AcmaOGWpQW1oQAAAABJRU5ErkJggg=="},5403:function(t,s,A){"use strict";A.r(s);var e=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"goodsCollection flex-page"},[e("navigation-bar",{attrs:{pageName:"适用商品列表"},on:{onLeftClick:t.goBack}},[t._t("right",[e("div",{staticClass:"rightBar",on:{click:t.goToShopCart}},[e("img",{ref:"cartIcon",staticClass:"shopIcon",attrs:{src:A("3a83"),alt:""}}),e("div",{directives:[{name:"show",rawName:"v-show",value:0!=t.skuTypeNum,expression:"skuTypeNum!=0"}],staticClass:"goodsNum",class:t.skuTypeNum>=100?"goodsNumMax":""},[t._v("\n                    "+t._s(t.skuTypeNum<=99?t.skuTypeNum:"99+")+"\n                ")])])],{slot:"nav-right"})],2),e("div",{staticClass:"couponTitleBox"},[e("div",{staticClass:"couponTitle"},[t._v("以下商品可使用"+t._s(t.couponName)+"的平台红包")]),e("div",{staticClass:"sortBtnList"},[e("div",{staticClass:"volumeBox",on:{click:function(s){return t.clickSaleBtn()}}},[e("div",{staticClass:"volumeBtn",class:2==t.sortMethod?"redLineBox":""},[t._v("销量")])]),e("div",{on:{click:t.priceSort}},[e("div",{staticClass:"priceBtn"},[e("div",{staticClass:"priceTxt",class:2!=t.sortMethod?"redLineBox":""},[t._v("价格")]),e("img",{attrs:{src:2==t.sortMethod?t.icon.filter:1==t.sortMethod?t.icon.filterDown:t.icon.filterUp,alt:""}})])])])]),e("div",{ref:"contentScroll",staticClass:"post-wrapper"},[e("van-list",{attrs:{finished:t.finished,offset:500,"immediate-check":t.immediateBol},on:{load:t.onLoad},model:{value:t.loading,callback:function(s){t.loading=s},expression:"loading"}},[e("div",{staticClass:"goodsList"},[t._l(t.goodsListData,(function(s,o){return e("div",{key:"goodsIndex"+o,staticClass:"goodsItem",on:{click:function(A){return t.goToProduct(s)}}},[e("div",{staticClass:"goodsImg"},[e("img",{attrs:{src:s.spuPicUrl,alt:""}}),e("div",{directives:[{name:"show",rawName:"v-show",value:0==s.storeNumber&&!s.activitySpuId,expression:"goodsItem.storeNumber==0&&!goodsItem.activitySpuId"}],staticClass:"outSellBox"},[t._v("补货中")]),e("div",{directives:[{name:"show",rawName:"v-show",value:s.storeNumber<=s.threshold&&0!=s.storeNumber&&!s.activitySpuId,expression:"goodsItem.storeNumber<=goodsItem.threshold&&goodsItem.storeNumber!=0&&!goodsItem.activitySpuId"}],staticClass:"onlyRemainTxt"},[t._v("仅剩"+t._s(s.storeNumber)+"件")]),1==s.isAlive?e("div",{staticClass:"tag-group",on:{click:t.gotoLive}},[e("div",{staticClass:"live-tag"},[e("div",{staticClass:"circle"}),t._v("\n                                    直播中\n                                ")]),e("div",{staticClass:"live-num"},[t._v(t._s(s.viewersNum||0))])]):t._e()]),e("div",{staticClass:"goodsInfo"},[e("div",{staticClass:"goodsName"},[t._v(t._s(s.spuName))]),e("div",{staticClass:"labelList"},[e("div",{staticClass:"labelItem",class:s.shopName.length>8?"labelItemOver":""},[t._v(t._s(s.shopName))]),e("div",{directives:[{name:"show",rawName:"v-show",value:1==s.couponFlag,expression:"goodsItem.couponFlag==1"}],staticClass:"labelItem ticketLabelItem"},[t._v("券")])]),e("div",{staticClass:"goodsBottomInfo"},[e("div",{staticClass:"goodsPrice"},[e("div",{staticClass:"priceAndSale"},[e("div",{staticClass:"goodsPriceNum"},[t._v("￥"+t._s(t._f("priceFilters")(s.skuPrice)))])]),s.priceLine?e("div",{staticClass:"lineGoodsPriceNum"},[t._v("￥"+t._s(t._f("priceFilters")(s.priceLine)))]):t._e()]),e("div",{staticClass:"addBtn",on:{click:function(A){return A.stopPropagation(),t.addGoodsNum(s,o)}}},[e("div",{directives:[{name:"show",rawName:"v-show",value:0!=s.cartCount,expression:"goodsItem.cartCount!=0"}],staticClass:"cartNumBox",class:s.cartCount>99?"cartNumBigBox":""},[e("div",{staticClass:"cartNum"},[t._v(t._s(s.cartCount))])]),e("img",{ref:"addBtn",refInFor:!0,attrs:{src:A("d325"),alt:""}})])])])])})),e("div",{directives:[{name:"show",rawName:"v-show",value:t.finished&&0!=t.goodsListData.length,expression:"finished&&goodsListData.length!=0"}],staticClass:"finishedBox"},[e("img",{attrs:{src:A("8d45"),alt:""}})])],2),e("div",{staticClass:"fixedHeight",style:{height:74+this.$footBarHeight+"px"}})])],1),e("transition",{on:{"before-enter":t.beforeEnter,enter:t.enter,"after-enter":t.afterEnter}},[e("img",{directives:[{name:"show",rawName:"v-show",value:t.isShowCircle,expression:"isShowCircle"}],staticClass:"circle",attrs:{src:A("d325"),alt:""}})])],1)},o=[],i=A("5c36"),a=A("d399"),n=A("0aa6"),r={name:"goodsCollection",data:function(){return{couponName:"",skuTypeNum:null,sortMethod:2,isPriceSort:!1,icon:{filter:A("c8c1"),filterDown:A("c1e2"),filterUp:A("c3b4")},goodsListData:null,scrollContentTop:null,shopCodeList:null,addBtnIcon:null,addGoodsLoading:!1,isShowCircle:!1,page:1,loading:!1,finished:!1,immediateBol:!1,isOrderPayNew:!1}},components:{NavigationBar:n["a"]},filters:{threshold:function(t){return t>=1e4?t/1e4>=10?"9万+":Math.floor(t/1e4)+"万+":t},priceFilters:function(t){return t>=1e4?Math.floor(t/1e4*100)/100+"万":t}},created:function(){},watch:{shopPageEventBackButtonFlag:function(t){t&&(this.goBack(),this.$store.dispatch("setShopPageEventBackButtonFlag",!1))}},activated:function(){this.$route.params.couponName?(this.goodsListData=[],this.page=1,this.finished=!1,this.sortMethod=2,this.isPriceSort=!1,this.couponName=this.$route.params.couponName,this.shopCodeList=this.$route.params.shopCodeList,this.$route.params.isOrderPayNew?this.isOrderPayNew=this.$route.params.isOrderPayNew:this.isOrderPayNew=!1,this.$refs.contentScroll.scrollTop=0,this.getGoodsByShops()):this.$refs.contentScroll.scrollTop=this.scrollContentTop,this.getSkuTypeNum()},methods:{clickSaleBtn:function(){this.sortMethod=2,this.isPriceSort=!1,this.page=1,this.getGoodsByShops()},priceSort:function(){this.isPriceSort?this.sortMethod=1:this.sortMethod=0,this.isPriceSort=!this.isPriceSort,this.page=1,this.getGoodsByShops()},onLoad:function(){this.page++,this.getGoodsByShops(!1)},getGoodsByShops:function(){var t=this,s=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],A={shopCodes:this.shopCodeList,areaCode:this.$userInfo.AREA_CODE,ownerCode:this.$userInfo.OWNER_CODE,sort:this.sortMethod,page:this.page,rows:10};Object(i["q"])(A).then((function(A){"0"==A.resultCode&&(t.loading=!1,t.goodsListData=s?A.data.records:t.goodsListData.concat(A.data.records),t.finished=t.goodsListData.length>=A.data.total)})).catch((function(t){}))},getSkuTypeNum:function(){var t=this,s=arguments.length>0&&void 0!==arguments[0]&&arguments[0],A={ownerCode:this.$userInfo.OWNER_CODE};Object(i["G"])(A).then((function(A){0==A.resultCode&&(s&&Object(a["a"])({message:"添加购物车成功",duration:1e3}),t.skuTypeNum=A.data.skuTypeNum)})).catch((function(t){}))},beforeEnter:function(t){console.log(this.addBtnIcon.getBoundingClientRect()),t.style.left=this.addBtnIcon.getBoundingClientRect().left+"px",t.style.top=this.addBtnIcon.getBoundingClientRect().top+"px",t.style.transform="scale(1)"},enter:function(t,s){t.offsetWidth,t.style.left=this.$refs.cartIcon.getBoundingClientRect().left+"px",t.style.top=this.$refs.cartIcon.getBoundingClientRect().top+"px",t.style.transform="scale(.5)",s()},afterEnter:function(t){this.isShowCircle=!this.isShowCircle},addGoodsNum:function(t,s){var A=this;if(console.log(t),!this.addGoodsLoading&&!this.isShowCircle){this.addBtnIcon=this.$refs.addBtn[s],this.isShowCircle=!0,this.addGoodsLoading=!0;var e={ownerCode:this.$userInfo.OWNER_CODE,spuCode:t.spuCode,skuNo:t.skuNo,shopCode:t.shopCode,activitySpuId:t.activitySpuId,skuCount:1,mark:1};Object(i["a"])(e).then((function(s){"0"==s.resultCode?(Object(a["a"])({message:"添加购物车成功",duration:1e3}),t.cartCount+=1,A.getSkuTypeNum()):"20100"==s.resultCode&&"0"==s.data.result&&A.$toast("您所添加商品超过最大购买量了哦"),A.addGoodsLoading=!1})).catch((function(t){A.addGoodsLoading=!1}))}},goToProduct:function(t){this.$router.push({name:"goodsDetail",params:{spuCode:t.spuCode,goodsUrl:t.spuPicUrl}})},goToShopCart:function(){this.$router.push({name:"shoppingCart",params:{}})},goBack:function(){this.isOrderPayNew?this.$router.push({name:"productPage",params:{}}):this.$router.back(-1)}},beforeRouteLeave:function(t,s,A){this.scrollContentTop=this.$refs.contentScroll.scrollTop,A()}},c=r,d=(A("611e"),A("2877")),l=Object(d["a"])(c,e,o,!1,null,"d1a5f6e8",null);s["default"]=l.exports},"611e":function(t,s,A){"use strict";var e=A("cf78"),o=A.n(e);o.a},c1e2:function(t,s){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAHCAYAAAAxrNxjAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAACqADAAQAAAABAAAABwAAAADD6HxEAAAAeklEQVQYGWOcNWvW1v///3sx4AGMjIw7mYDy4njUwKQEmVhYWOKAvG8wESz0N6CaRKakpKRrQKOzsSgAC4HkQGpAVjOkpaUtAFILQWxkAFS0ACrHAFYIlcwC0teQFF4DehJuEyOSBAMwBNSAkkuBJjEC6Zj09PQbMHkA5B0juMXtUUAAAAAASUVORK5CYII="},c3b4:function(t,s){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAHCAYAAAAxrNxjAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAACqADAAQAAAABAAAABwAAAADD6HxEAAAAhUlEQVQYGWNkQAKzZs1S+////1JGIADSMenp6Tdg0owwxsyZM7mA7NNArAUVuwakTYGKv4H4TFBBBqAhU4FsmCKQsBZUDKwErBBoZQLQqgSwCBIBEgPJgYQY582bp/X792+QlSCrsYFvrKyspkx//vxZBJTFpQikkQuoZj7I6pcgHgHwHgDlNS2/EPEKCwAAAABJRU5ErkJggg=="},c8c1:function(t,s){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAASCAYAAABit09LAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAACqADAAQAAAABAAAAEgAAAABr6GS2AAAA5klEQVQoFc2SMQ6CMBiFaVMWNidv4MDOJTyDMcgAiZzHAQZEE4/g4BnciVdwcmOBBN9rWiRGYPVPStv3vvan7S+cQeR5vuq67iIQ6DdJkjysLewgyzIP4zuab7QKfQC45lwa0cEmB4wtRNk3mkY0iJQhUoVaGXyo0aMkiqLwm6ZhSqb+FbXruoFs2/YMdwziQg/MkamfnM3Ea8b/C1vgnq64r/XU3+Dibzz1cgoy3kIqpbaY6PccWVCD2ckoiipsnY5ArIGUjH7rOI5LgKdvGFBpvE/1ANqjsbRsVDhkn6mvR7pThfsGZH5RdnnYTxgAAAAASUVORK5CYII="},cf78:function(t,s,A){},d325:function(t,s){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAYAAAAehFoBAAAAAXNSR0IArs4c6QAAAthJREFUWAntmT1oFFEQx2fe7kVFsZGAXixTyBV2wTSCaRUEkVS2NgpBsBUkKLaCBBTE1uoQQbC2SHNip3BYpPQSIdhoRLzc7Tj/t+6au+ynuY+3kAfH7b2ZN+93s/N23s5jKthkeXWmx50lDugqkTREuM5MdRE5UdCEVWPmHRHaZJZNIm6LoTe+zL3j5mq3iB3OU5Ll26f7Qfc+Md9QuJN5+v8j1z/xnUReembmATeffs2ykQosKytHelu/7qnCXfXI8Swjo5LpHfspRI/9M8ce8dra7yS7icDwai/Yfa23fjFp0Pj7uOWb2rUkb+8Dluu3zvep91ZIzo4fLH0GJv7iGb7Mzeef9moNAIfxuvth2rARYAhdW9jraRMJbcxqGLgCCy6wIDTBFnHGwFhg04vZCCfpWxZDtlBmQ8KGgnQ3JvU0SMLK6sPTw+OZeYSG9TCes67C4o+AzeYCvWZksL50tseVFLI8V0aG5OLx3KyPdEvB6DKYuXOTzMULliVYf0/BkxdluFJ14dCe6SyZcG+QqueUAKwaw9JwiioTRhoGu65MHYeEYDXYIjrElIkCVvVwuf1spsUxC8EaZ7oxzzUy84fAI3NliiE/pT+xG0khr/G5+VgF10XGlEku5YD/ZrCYKOeCZ08RPnmtDHDlYriUh7E3yGsIg8irsv2N5PNG3pBS8nLABTYyiNkYWGHL3O4i5JULiUPgIrf1IDq6+eGdgxiY5Fh9Af2hmx/Solw1mhBvqYdRRaxGA6suOm5XAxeU3Daoz1YFGKyVe803tvKtxWTnvayMYLWJw1a+tRzkKrQtVWl1HnwWGDUrVL5dBQZbVHK1wABFmV5XYcs9aK3GW7aQrLoFbfDD7R75V1D5nran/x0ZDJ4qxSERAfKrZx89U1uYbnhwCwzD5xtg3AeMTnjarx+9REwPsULRN4lm59I5MXe0yIbnHYjhYSF+V+ZgcRjelaPbP90SOb6Xk90VAAAAAElFTkSuQmCC"}}]);
//# sourceMappingURL=chunk-c498d454.396ac3be.js.map