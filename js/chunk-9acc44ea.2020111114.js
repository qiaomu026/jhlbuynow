(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9acc44ea"],{"0b2c":function(e,t){e.exports="data:image/png;base64,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"},"1e52":function(e,t,a){},"27aea":function(module,exports,__webpack_require__){(function(global){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(e,t){module.exports=t(e)})("undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:this,(function(global){"use strict";global=global||{};var _Base64=global.Base64,version="2.5.2",buffer;if(module.exports)try{buffer=eval("require('buffer').Buffer")}catch(err){buffer=void 0}var b64chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b64tab=function(e){for(var t={},a=0,o=e.length;a<o;a++)t[e.charAt(a)]=a;return t}(b64chars),fromCharCode=String.fromCharCode,cb_utob=function(e){if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?fromCharCode(192|t>>>6)+fromCharCode(128|63&t):fromCharCode(224|t>>>12&15)+fromCharCode(128|t>>>6&63)+fromCharCode(128|63&t)}t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return fromCharCode(240|t>>>18&7)+fromCharCode(128|t>>>12&63)+fromCharCode(128|t>>>6&63)+fromCharCode(128|63&t)},re_utob=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,utob=function(e){return e.replace(re_utob,cb_utob)},cb_encode=function(e){var t=[0,2,1][e.length%3],a=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0),o=[b64chars.charAt(a>>>18),b64chars.charAt(a>>>12&63),t>=2?"=":b64chars.charAt(a>>>6&63),t>=1?"=":b64chars.charAt(63&a)];return o.join("")},btoa=global.btoa?function(e){return global.btoa(e)}:function(e){return e.replace(/[\s\S]{1,3}/g,cb_encode)},_encode=function(e){var t="[object Uint8Array]"===Object.prototype.toString.call(e);return t?e.toString("base64"):btoa(utob(String(e)))},encode=function(e,t){return t?_encode(String(e)).replace(/[+\/]/g,(function(e){return"+"==e?"-":"_"})).replace(/=/g,""):_encode(e)},encodeURI=function(e){return encode(e,!0)},re_btou=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,cb_btou=function(e){switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),a=t-65536;return fromCharCode(55296+(a>>>10))+fromCharCode(56320+(1023&a));case 3:return fromCharCode((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return fromCharCode((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},btou=function(e){return e.replace(re_btou,cb_btou)},cb_decode=function(e){var t=e.length,a=t%4,o=(t>0?b64tab[e.charAt(0)]<<18:0)|(t>1?b64tab[e.charAt(1)]<<12:0)|(t>2?b64tab[e.charAt(2)]<<6:0)|(t>3?b64tab[e.charAt(3)]:0),i=[fromCharCode(o>>>16),fromCharCode(o>>>8&255),fromCharCode(255&o)];return i.length-=[0,0,2,1][a],i.join("")},_atob=global.atob?function(e){return global.atob(e)}:function(e){return e.replace(/\S{1,4}/g,cb_decode)},atob=function(e){return _atob(String(e).replace(/[^A-Za-z0-9\+\/]/g,""))},_decode=buffer?buffer.from&&Uint8Array&&buffer.from!==Uint8Array.from?function(e){return(e.constructor===buffer.constructor?e:buffer.from(e,"base64")).toString()}:function(e){return(e.constructor===buffer.constructor?e:new buffer(e,"base64")).toString()}:function(e){return btou(_atob(e))},decode=function(e){return _decode(String(e).replace(/[-_]/g,(function(e){return"-"==e?"+":"/"})).replace(/[^A-Za-z0-9\+\/]/g,""))},noConflict=function(){var e=global.Base64;return global.Base64=_Base64,e};if(global.Base64={VERSION:version,atob:atob,btoa:btoa,fromBase64:decode,toBase64:encode,utob:utob,encode:encode,encodeURI:encodeURI,btou:btou,decode:decode,noConflict:noConflict,__buffer__:buffer},"function"===typeof Object.defineProperty){var noEnum=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};global.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",noEnum((function(){return decode(this)}))),Object.defineProperty(String.prototype,"toBase64",noEnum((function(e){return encode(this,e)}))),Object.defineProperty(String.prototype,"toBase64URI",noEnum((function(){return encode(this,!0)})))}}return global["Meteor"]&&(Base64=global.Base64),module.exports?module.exports.Base64=global.Base64:(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){return global.Base64}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)),{Base64:global.Base64}}))}).call(this,__webpack_require__("c8ba"))},"28da":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"afterSaleApply"},[a("navigation-bar",{attrs:{pageName:"售后申请"},on:{onLeftClick:e.goBack},scopedSlots:e._u([{key:"nav-right",fn:function(){return[a("div",{staticClass:"submit",on:{click:e.clickRight}},[e._v("提交")])]},proxy:!0}])}),e.afterSaleDetail?a("div",{staticClass:"content"},[a("div",{staticClass:"box"},[a("div",{staticClass:"top"},[a("div",{staticClass:"shop_info"},[a("div",{staticClass:"shop_name"},[e._v(e._s(e.afterSaleDetail.shopName))]),a("div",{staticClass:"status"},[e._v("已发货")])]),a("div",{staticClass:"order_info"},[a("div",{staticClass:"left"},[a("img",{attrs:{src:e.afterSaleDetail.spuPicUrl,alt:""}})]),a("div",{staticClass:"right"},[a("div",{staticClass:"good_name"},[e._v(e._s(e.afterSaleDetail.spuName))]),a("div",{staticClass:"good_unit"},[a("div",{staticClass:"unit"},[e._v(e._s(e.afterSaleDetail.attrValueContent))]),a("div",{staticClass:"num"},[e._v("×"+e._s(e.afterSaleDetail.skuCount))])])])])]),a("div",{staticClass:"middle"},[a("div",{staticClass:"left"},[e._v("退款金额")]),a("div",{staticClass:"right"},[a("span",[e._v("￥")]),a("span",[e._v(e._s(e.afterSaleDetail.returnRealTotal))])])]),a("div",{staticClass:"bottom"},[a("div",{staticClass:"reason",on:{focusout:e.inputFocus}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.reason,expression:"reason"}],attrs:{name:"",id:"",placeholder:"请输入退货原因",maxlength:"100"},domProps:{value:e.reason},on:{input:function(t){t.target.composing||(e.reason=t.target.value)}}})]),a("div",{staticClass:"photo_box"},[e._m(0),a("div",{staticClass:"line"}),a("div",{staticClass:"image-box"},[a("van-uploader",{attrs:{"preview-size":"50","after-read":e.afterRead,"max-count":4,accept:"image","before-delete":e.deletePic},model:{value:e.vantFileList,callback:function(t){e.vantFileList=t},expression:"vantFileList"}})],1)])])])]):e._e(),a("van-action-sheet",{attrs:{actions:e.actions,"cancel-text":"取消",round:!1,"close-on-click-action":""},on:{select:e.addSelect},model:{value:e.showAddSheet,callback:function(t){e.showAddSheet=t},expression:"showAddSheet"}})],1)},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title"},[a("span",{staticClass:"add"},[e._v("添加照片")]),a("span",[e._v("（最多4张）")])])}],n=a("6c90"),r=a("4e4d"),s=a("0aa6"),c=a("c469"),u={name:"afterSaleApply",data:function(){return{reason:"",imgList:[],vantFileList:[],afterSaleDetail:null,showAddSheet:!1,actions:[{name:"拍照"},{name:"从手机相册选择"}],isUpload:!1,bindThemeL:0!=this.$curTheme}},created:function(){this.afterSaleDetail=this.$route.params.detail,this.bindThemeL=0!=this.$curTheme,"phone"==this.$deciceType?a("ef6f"):"portraitPad"==this.$deciceType&&a("1e52")},components:{"add-image":r["a"],NavigationBar:s["a"]},methods:{inputFocus:function(e){var t=window.navigator.userAgent.toLowerCase();t.indexOf("iphone")>-1&&e&&e.target&&e.target.tagName&&(this.blurTimer=setTimeout((function(){window.scrollTo(0,0)}),0))},afterRead:function(e){var t=this;console.log(this.vantFileList),this.$forceUpdate();var o=a("27aea").Base64,i={baseString:o.encode(e.content),source:"yzApp",business:"dicoveryPic"};Object(c["b"])(i).then((function(e){t.imgList.push(e.data.urls[0])})).catch((function(e){console.log("不对劲 "+e)}))},deletePic:function(e,t){return this.imgList.splice(t.index,1),this.$forceUpdate(),!0},goBack:function(){this.$store.state.preview.previewId&&this.$store.dispatch("setPreviewId",""),this.$router.go(-1)},submit:function(){var e=this,t={skuNo:this.afterSaleDetail.skuNo,billNo:this.afterSaleDetail.saleOrderBillNo,subBillNo:this.afterSaleDetail.saleOrderSubBillNo,shopCode:this.afterSaleDetail.shopCode,shopName:this.afterSaleDetail.shopName,ownerCode:this.$userInfo.OWNER_CODE,ownerName:this.$userInfo.OWNER_NAME,areaCode:this.$userInfo.AREA_CODE,spuCode:this.afterSaleDetail.spuCode,spuName:this.afterSaleDetail.spuName,attrValueContent:this.afterSaleDetail.attrValueContent,skuPrice:this.afterSaleDetail.skuPrice,returnReason:this.reason,returnCount:this.afterSaleDetail.skuCount,skuPicUrl:this.afterSaleDetail.picUrl,returnTotal:this.afterSaleDetail.returnRealTotal,returnPicUrlList:this.imgList,returnAddr:""};Object(n["c"])(t).then((function(t){"0"==t.resultCode?(e.$toast("申请已提交"),e.goBack()):e.$toast(t.msg)})).catch((function(e){this.$toast(e)}))},clickRight:function(){0!=this.reason.length?this.submit():this.$toast("退货原因不能为空")},changeStatus:function(){this.isUpload=!1},upDateImageData:function(e){this.imgList=e,this.submit()},showAddSheetControll:function(){this.showAddSheet=!this.showAddSheet},addSelect:function(e,t){this.getPictureData(t)},getPictureData:function(e){e?this.$refs.addImageComponent.getPicture():this.$refs.addImageComponent.useCamera()}}},l=u,d=a("2877"),f=Object(d["a"])(l,o,i,!1,null,"0606ce5c",null);t["default"]=f.exports},"48d8":function(e,t,a){},"4e4d":function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("ul",{staticClass:"image-list"},[e._l(e.selectPictures,(function(t,i){return o("li",{key:i,style:{width:e.imageWidthAndHeight+"px",height:e.imageWidthAndHeight+"px"}},[o("img",{staticClass:"delete-picture",attrs:{src:a("0b2c"),alt:""},on:{click:function(t){return e.deletePicture(i)}}}),o("img",{attrs:{src:t,alt:""},on:{click:function(t){return e.preview(i)}}})])})),e.accountAddImage&&e.isShowAdd?o("li",[o("div",{staticClass:"add-image",on:{click:e.addAction}},[o("van-icon",{attrs:{name:"plus",color:"rgb(181, 181, 181)"}})],1)]):e._e()],2),o("Preview",{ref:"myPreview",attrs:{images:e.images}})],1)},i=[],n=(a("ac6a"),a("28a5"),a("c5f6"),a("a49b"),a("e036")),r=a("5d2d"),s={name:"AddImage",props:{maxImageCount:{type:Number,default:4},selectPictures:{type:Array,default:function(){return[]}},isShowAdd:{type:Boolean,default:!0},isUpload:{type:Boolean,default:!1}},data:function(){return{images:[],uploadImageList:[],loading:""}},components:{Preview:n["a"]},mounted:function(){var e=document.querySelector(".image-list");this.imageWidthAndHeight=e.offsetWidth/4},computed:{accountAddImage:function(){return this.selectPictures.length<this.maxImageCount},maximumImagesCount:function(){return this.maxImageCount-this.selectPictures.length}},watch:{selectPictures:function(e,t){},isUpload:function(e,t){e&&(console.log(e),this.uploadFile(),this.$emit("changeUploadStatus"))}},methods:{preview:function(e){this.images=this.selectPictures,this.$refs.myPreview.setIndex(e),this.$refs.myPreview.setIsShowPreview(!0),this.$store.dispatch("setPreviewId",this.$refs.myPreview)},addAction:function(){this.$emit("imageAddAction")},deletePicture:function(e){this.selectPictures.splice(e,1),console.log(this.selectPictures)},addSelect:function(e,t){t?this.getPicture():this.useCamera()},useCamera:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.$plugin.usePlugin("camera")((function(a){t&&"android"==e.$devicePlatform?e.$plugin.usePlugin("crop")(a,(function(t){console.log("yuanl=> 裁剪url = "+t),t=t.split("?"),e.selectPictures.push(t[0])}),(function(a){console.log("Crop error. "+JSON.stringify(a)),"true"==a.recapture?(console.log("调用相机重拍. "),e.useCamera(t)):"User cancelled"==a.message?console.log("用户取消裁剪操作. "):e.$toast("裁剪图片出现异常，请重试！")})):e.selectPictures.push(a)}),(function(e){}),t,!1)},uploadFile:function(){var e=this;this.uploadImageList=[];var t="".concat(r["b"].get("custUrl.homeUrl"),"xwj-sys-media/media/upload/uploadFile"),a={params:{file:"",source:"yzApp",business:"dicoveryPic"},headers:{contentType:"multipart/form-data"}},o=this.selectPictures.length,i=0;console.log("开始调用图片上传"),0==this.selectPictures.length&&this.$emit("imageMapChange",[]),console.log(this.selectPictures),this.loading=r["b"].get("showLoadingView"),this.loading&&this.loading(!0),this.selectPictures.forEach((function(n){a.params.file=n,e.$plugin.usePlugin("fileTransfer")(t,n,a,(function(t){var a=JSON.parse(t.response);0==a.resultCode&&e.uploadImageList.push(a.data),i++,console.log(o),console.log(i),e.dealResult(o==i)}),(function(t){i++,console.log(o),console.log(i),e.dealResult(o==i)}))}))},dealResult:function(e){this.loading&&this.loading(!1),console.log(this.uploadImageList),e&&this.$emit("imageMapChange",this.uploadImageList)},getPicture:function(){var e=this;this.$plugin.usePlugin("getPictures")(this.maximumImagesCount,(function(t){t.forEach((function(t){e.selectPictures.push(t)}))}),(function(e){}),!0,!1)}}},c=s,u=(a("fc26"),a("2877")),l=Object(u["a"])(c,o,i,!1,null,"3716b700",null);t["a"]=l.exports},c469:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return n}));var o=a("ba6a"),i=function(e){return new Promise((function(t,a){o["a"].get("xwj-property-house/house/commonTelephoneMgr/listNewCommonTelephone",e,"baseUrl",!1).then((function(e){t(e)})).catch((function(e){a(e)}))}))},n=function(e){return new Promise((function(t,a){o["a"].post("xwj-sys-media/media/upload/uploadBase64File",e,!0,"homeUrl",!0,!1).then((function(e){t(e)})).catch((function(e){a(e)}))}))}},ef6f:function(e,t,a){},fc26:function(e,t,a){"use strict";var o=a("48d8"),i=a.n(o);i.a}}]);
//# sourceMappingURL=chunk-9acc44ea.2020111114.js.map