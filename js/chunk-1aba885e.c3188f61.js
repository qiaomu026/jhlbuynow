(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1aba885e"],{2768:function(t,i,a){"use strict";a.r(i);var e=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"propertyOrderPayDetail",class:{themeL:t.bindThemeL}},[a("navigation-bar",{attrs:{pageName:t.title,bothWidth:t.headerItemWidth},on:{onLeftClick:t.onClickLeft},scopedSlots:t._u([{key:"nav-right",fn:function(){return[t.isDisplayRightName?a("div",{staticClass:"rightBtn",on:{click:t.callProperty}},[t._v(t._s(t.rightName))]):t._e()]},proxy:!0}])}),a("div",{staticClass:"propertyOrderPayDetailContent"},[a("div",{staticClass:"propertyOrderPayDetailCard"},[a("van-swipe",{attrs:{"indicator-color":"white","show-indicators":!1}},t._l(t.orderDetail.roomList,(function(i,e){return a("van-swipe-item",{key:e},[a("div",{staticClass:"user_info"},[a("img",{staticClass:"user_img",attrs:{src:t.houseImg}}),a("div",{staticClass:"user_word"},[a("div",{staticClass:"user_home"},[t._v(t._s(i.room_name))]),a("div",{staticClass:"user_name"},[t._v("房主："+t._s(i.owner_name))])])]),a("div",{staticStyle:{display:"flex",height:"20px",top:"174px",width:"100%"}},[a("div",{staticClass:"circleLeft"}),a("div",{staticClass:"lineStyle",staticStyle:{position:"relative",left:"5px",top:"6px"}}),a("div",{staticClass:"circleRight"})]),a("div",{staticClass:"order_itme_list"},t._l(i.monthList,(function(i,o){return a("div",{key:o,staticStyle:{"margin-bottom":"7px"}},[a("div",{staticStyle:{display:"flex",width:"90%","margin-left":"5%",height:"56px","line-height":"56px",background:"#F6F6F8"},on:{click:function(i){return t.showTime(e,o)}}},[a("div",{staticStyle:{width:"50%","padding-left":"5%","font-size":"14px"},style:{fontSize:t.itemFont}},[t._v(t._s(i.month_name))]),a("div",{staticStyle:{width:"40%","text-align":"right","font-size":"14px"},style:{fontSize:t.itemFont}},[t._v("￥"+t._s(t._f("keepTwoNum")(i.month_amount)))]),a("img",{staticStyle:{"margin-top":"21px"},attrs:{width:"14",height:"14",src:i.isShow?t.arrowDownImg:t.arrowRightImg}})]),i.isShow?a("div",t._l(i.billDetailList,(function(i,e){return a("div",{key:e,staticClass:"freeShow"},[a("div",{staticClass:"freeText"},[t._v(t._s(i.payment_type))]),a("div",{staticClass:"freeText"},[t._v("￥"+t._s(t._f("keepTwoNum")(i.payment_amount)))])])})),0):t._e()])})),0)])})),1),t._m(0),a("div",{staticClass:"navContent"},[a("div",{staticClass:"nav"},[a("div",{staticClass:"orderDiv"},[a("div",{staticClass:"orderDetail"},[a("div",{class:{orderDivSonThemeL:t.bindThemeL},staticStyle:{"font-size":"12px"}},[a("span",{staticClass:"orderDivSon"},[t._v("订单编号")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.billNo,expression:"billNo"}],staticClass:"orderNumber",staticStyle:{position:"absolute",left:"-100%",bottom:"-5%"},attrs:{type:"text",name:"selectCopy",id:"selectCopy",readonly:""},domProps:{value:t.billNo},on:{input:function(i){i.target.composing||(t.billNo=i.target.value)}}}),t._v("\n              "+t._s(t.billNo)+"\n            ")]),a("button",{staticClass:"orderCopy",on:{click:function(i){return t.copy()}}},[t._v("复制")])]),"01"==t.orderDetail.bill_type?a("div",{staticClass:"orderDivSon"},[t._v("\n            订单类型\n            "),a("span",{staticClass:"orderSpan"},[t._v("账单缴费")])]):t._e(),1==t.orderDetail.pay_type?a("div",{staticClass:"orderDivSon"},[t._v("\n            支付方式\n            "),a("span",{staticClass:"orderSpan"},[t._v("微信")])]):t._e(),2==t.orderDetail.pay_type?a("div",{staticClass:"orderDivSon"},[t._v("\n            支付方式\n            "),a("span",{staticClass:"orderSpan"},[t._v("支付宝")])]):t._e(),t.orderDetail.payTime?a("div",{staticClass:"orderDivSon"},[t._v("\n            支付时间\n            "),a("span",{staticClass:"orderSpan"},[t._v(t._s(t.orderDetail.payTime))])]):t._e(),a("div",{staticClass:"orderDivSon"},[t._v("\n            创建时间\n            "),a("span",{staticClass:"orderSpan"},[t._v(t._s(t.orderDetail.createTime))])]),t.orderDetail.obtainable_piont?a("div",{staticClass:"orderDivSon"},[t._v("\n            可获积分\n            "),a("span",{staticClass:"orderSpan"},[t._v(t._s(t.orderDetail.obtainable_piont))])]):t._e()])]),a("div",{staticClass:"line"}),a("div",{staticClass:"total_and_deduction"},[a("div",{staticClass:"total_money"},[a("div",{staticClass:"total_name"},[t._v("订单总额")]),a("div",{staticClass:"total_num"},[t._v("￥"+t._s(t._f("keepTwoNum")(t.orderDetail.bill_amount)))])]),a("div",{staticClass:"deduction_point"},[a("div",{staticClass:"deduction_name"},[t._v("积分抵扣")]),a("div",{staticClass:"deduction_num"},[t._v("-￥"+t._s(t._f("keepTwoNum")(t.orderDetail.point_deduction/100)))])])]),a("div",{staticClass:"line"}),a("div",{staticClass:"payBottom"},[1==t.orderDetail.bill_status?a("div",{staticClass:"payBottomStatueBlue"},[t._v("已支付")]):t._e(),0==t.orderDetail.bill_status?a("div",{staticClass:"payBottomStatueRed"},[t._v("待支付")]):t._e(),2==t.orderDetail.bill_status?a("div",{staticClass:"payBottomStatueBlack"},[t._v("已取消")]):t._e(),a("div",{staticClass:"payBottomText"},[a("span",{staticClass:"payBottomSpan"},[t._v("实付：")]),1==t.orderDetail.bill_status?a("span",{staticClass:"payBottomMoney"},[t._v("￥"+t._s(t._f("keepTwoNum")(t.orderDetail.realPayAmount)))]):t._e(),0==t.orderDetail.bill_status?a("span",{staticClass:"payBottomMoney"},[t._v("￥"+t._s(t.realPay))]):t._e(),2==t.orderDetail.bill_status?a("span",{staticClass:"payBottomMoney"},[t._v("￥"+t._s(t.realPay))]):t._e()])])])],1)]),0==t.orderDetail.bill_status?a("div",{staticStyle:{height:"87px"}}):t._e(),0==t.orderDetail.bill_status?a("div",{staticClass:"order_pay"},[a("div",{staticClass:"order_num",on:{click:function(i){return t.cancelOrder()}}},[t._v("取消订单")]),a("div",{staticClass:"soon_pay",on:{click:function(i){return t.gotopay()}}},[t._v("去支付")])]):t._e(),t.payWindowShow?a("property-pay-popup",{attrs:{payParam:t.payParam,isAlipay:t.isAlipay,isWechart:t.isWechart},on:{closePopup:t.closePopup,checkOrderStatus:t.checkOrderStatus}}):t._e()],1)},o=[function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticStyle:{display:"flex",position:"relative",height:"20px",width:"100%"}},[a("div",{staticClass:"circleLeft"}),a("div",{staticClass:"lineStyle"}),a("div",{staticClass:"circleRight"})])}],s=a("22ae"),r=a("3ecb"),l=a("ba25"),n=a("0aa6"),c=a("2b0e"),d=a("2241");c["a"].use(d["a"]);var p={name:"propertyOrderPayDetail",data:function(){return{billNo:"",areaCode:"",bill_amount:0,billCodePoint:0,pointAviablePersent:0,pointAviable:0,integralAll:!1,integralDeduction:0,realPay:0,orderDetail:{},payWindowShow:!1,isAlipay:!1,isWechart:!1,headerItemWidth:{width:"110px"},title:"订单支付",rightName:"联系物业",isDisplayRightName:!1,switchOnImg:a("62e5"),switchOffImg:a("7e4b"),houseImg:a("64cc"),addImg:a("8b50"),cutImg:a("a366"),tipsImg:a("6d99"),arrowRightImg:a("67bc"),arrowDownImg:a("e1fa"),bindThemeL:0!=this.$curTheme,itemFont:0==this.$curTheme?"14px":"17px"}},components:{NavigationBar:n["a"],"property-order-goto-pay":r["a"],"property-pay-popup":l["a"]},mounted:function(){this.billNo=this.$route.params.billCode,this.areaCode=this.$route.params.areaCode,this.queryOrderDetail()},methods:{queryOrderDetail:function(){var t=this,i={bill_code:this.billNo};Object(s["q"])({data:JSON.stringify(i)}).then((function(i){if(i.result){for(var a in i.data.roomList)for(var e in i.data.roomList[a].monthList)i.data.roomList[a].monthList[e].isShow=!1;t.orderDetail=i.data,t.isDisplayRightName="物业电话尚未配置"!=t.orderDetail.propertyPhoneNumber,t.bill_amount=i.data.bill_amount,t.billCodePoint=i.data.bill_amount,t.realPay=parseFloat(t.orderDetail.bill_amount-t.orderDetail.point_deduction/100).toFixed(2),console.log(JSON.stringify(t.orderDetail))}else t.$toast("网络异常，请稍后重试！")})).catch((function(i){t.$toast("网络异常，请稍后重试！")}))},queryBillDetail:function(t,i){var a=this,e={bill_no:this.billNo,room_code:this.orderDetail.roomList[t].room_code,month_code:this.orderDetail.roomList[t].monthList[i].month_code};Object(s["r"])({data:JSON.stringify(e)}).then((function(e){e.result&&e.data.billDetailList?(a.orderDetail.roomList[t].monthList[i].billDetailList=e.data.billDetailList,a.orderDetail.roomList[t].monthList[i].isShow=!a.orderDetail.roomList[t].monthList[i].isShow):a.$toast(e.msg?e.msg:"网络异常，请稍后重试！")})).catch((function(t){a.$toast("网络异常，请稍后重试！")}))},showTime:function(t,i){null==this.orderDetail.roomList[t].monthList[i].billDetailList||"undefined"==this.orderDetail.roomList[t].monthList[i].billDetailList?this.queryBillDetail(t,i):this.orderDetail.roomList[t].monthList[i].isShow=!this.orderDetail.roomList[t].monthList[i].isShow},cancelOrder:function(){var t=this;d["a"].confirm({title:"提示",message:"确认要取消订单吗？"}).then((function(){console.log("取消确认回调");var i={bill_code:t.billNo};Object(s["j"])({data:JSON.stringify(i)}).then((function(i){i.result?t.$toast({duration:500,message:"取消成功",onClose:function(){t.queryOrderDetail()}}):t.$toast(i.msg?i.msg:"取消失败，请稍后重试！")})).catch((function(i){t.$toast("网络异常，请稍后重试！")}))})).catch((function(){}))},onClickLeft:function(){this.$router.back()},gotopay:function(){var t=this,i={bill_no:this.billNo,point:this.orderDetail.point_deduction+"",decount_money:parseFloat(this.orderDetail.point_deduction/100).toFixed(2),pay_money:parseFloat(this.orderDetail.bill_amount-this.orderDetail.point_deduction/100).toFixed(2)};console.log(JSON.stringify(i)),Object(s["k"])({data:JSON.stringify(i)}).then((function(i){1==i.result?(t.payParam=i.payParam,1==i.payParam.IS_ALI_PAY&&(t.isAlipay=!0),1==i.payParam.IS_WX_PAY&&(t.isWechart=!0),t.payWindowShow=!0,window.broadcaster.addEventListener("paymentBack",t.payCallBack)):t.$toast(i.msg?i.msg:"网络异常，请稍后重试！")})).catch((function(i){t.$toast("网络异常，请稍后重试！")}))},payCallBack:function(){this.checkOrderStatus()},checkOrderStatus:function(){var t=this;window.broadcaster.removeEventListener("paymentBack",this.payCallBack);var i={bill_code:this.billNo};Object(s["q"])({data:JSON.stringify(i)}).then((function(i){i.result?1==i.data.bill_status?(i.data.billType="账单缴费",t.$router.push({name:"paymentPaySuccess",params:{orderData:i.data}})):t.$toast({duration:500,message:"支付失败",onClose:function(){t.$router.back()}}):t.$toast(i.msg?i.msg:"网络异常，请稍后重试！")})).catch((function(i){t.$toast("网络异常，请稍后重试！")}))},closePopup:function(){this.payWindowShow=!1},copy:function(){var t=this;cordova.plugins.clipboard.copy(this.billNo,(function(){t.$toast("复制成功")}),(function(){console.log("error")}))},callProperty:function(){var t=this;"Android"==device.platform?d["a"].confirm({title:"拨打电话",message:this.orderDetail.propertyPhoneNumber}).then((function(){window.location.href="tel:"+t.orderDetail.propertyPhoneNumber})):window.location.href="tel:"+this.orderDetail.propertyPhoneNumber}}},m=p,u=(a("f941"),a("2877")),h=Object(u["a"])(m,e,o,!1,null,"688af1e3",null);i["default"]=h.exports},e55d:function(t,i,a){},f941:function(t,i,a){"use strict";var e=a("e55d"),o=a.n(e);o.a}}]);
//# sourceMappingURL=chunk-1aba885e.c3188f61.js.map