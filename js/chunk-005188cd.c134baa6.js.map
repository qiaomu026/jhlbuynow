{"version":3,"sources":["webpack:///./src/assets/images/common/left_black.png","webpack:///./src/assets/images/mall/mall_arrow_up.png","webpack:///./src/page/product/goodsDetail.js","webpack:///./src/assets/images/default/no_coupon_img.png","webpack:///./src/assets/images/mall/mall_arrow_down.png"],"names":["module","exports","goodsDetail","name","data","listLoadingBol","lists","spuPicUrlList","shopInfo","isShowPlaceHolder","skuList","skuNum","collectCode","cutOffTimeStr","getPickupList","unionPayActList","fullReductionList","packList","icon","collection","require","afterCollectionBg","collectionBg","afterCollection","shoppingCartBg","shoppingCart","arrowBg","arrow","share","topClick","callShop","shop","evaluate","shareChart","shareFriends","like","noLike","defaultXWJPic","show","normalTitle","activeTitle","titShow","weChartShare","couponList","afterCollect","beforeCollect","firstEvaluate","evalInfo","evalPicUrl","num","detailDescribe","ownerPicUrl","cartNum","goodsNum","shareUrl","scroll","images","setTopHeight","this","$stbHeight","bottomHeight","swipePic","ifNetworkError","spuCode","isShowTopBtn","bannerChangeBool","productImgs","scrollTimerId","hasStoragePermission","isShowPreview","defaultImg","components","Preview","created","$nextTick","$footBarHeight","methods","goToUnionPayActivity","val","activityId","$router","push","params","goToreducedPackaging","productImgDownload","picNum","that","map","item","i","img","Image","onload","length","src","bannerChange","setTimeout","goTopBtn","$refs","goodsPageScroll","scrollTop","bannerPreview","bannerImgArr","index","myPreview","setIndex","setIsShowPreview","$store","dispatch","console","log","preview","srcArr","evalPicUrlItem","picUrl","init","_this","getProductInfo","then","response","resultCode","indexOf","replace","queryPickupList","eva","getShopInfo","shopCode","Dialog","alert","message","msg","go","catch","error","$toast","JSON","stringify","paramData","ownerCode","$userInfo","OWNER_CODE","areaCode","AREA_CODE","skuNo","queryPickupListService","res","act","getProductShopInfo","handleScroll","changeTitChange","titChange","offsetTop","changeTodetail","detailChange","goodsChange","clearTimeout","$devicePlatform","addNumBtn","storeNumber","getCount","addToChart","chartData","skuCount","mark","addToCart","getCartNum","result","wechartShare","shareAction","x","shareToFriend","confirm","requestStoragePermissions","shareTo","shareGoods","Wechat","title","spuName","description","spuSalePoint","thumb","skuPicUrl","media","type","Type","WEBPAGE","webpageUrl","scene","Scene","SESSION","TIMELINE","reason","checkStoragePermissions","platform","navigator","userAgent","isiOS","match","list","permissions","cordova","plugins","checkPermission","status","hasPermission","requestPermissions","onCancel","hideCoverUp","window","location","href","shopTel","close","addCollection","savecollect","collectType","contentCode","userCode","delectcollect","collectCodes","addToCollection","delectCollection","ifCollection","collectList","showMoreEval","toShop","goToBuy","settleAccountsList","shopName","shopTotal","skuPrice","attrValueContent","skuDelivery","skuTotal","goodsData","orderSource","goodsList","path","receiveBtn","getPickupItem","ROOM_CODE","id","roomCode","receiveBtnService","isPicked","confirmButtonText","changeSeeRange","seeRange","$forceUpdate","skuTypeNum","storage","setStorage","moveInputIntoView","e","changeTop","resetInputIntoView","mounted","computed","mapState","goodsDetailEventBackButtonFlag","state","goBack","setSpuCode","productPage","watch","onClickLeft","handler","newval","oldval","commit","activated","goodsUrl","$route","undefined","addEventListener","document","querySelector","activeElement","blur","passive","deactivated","beforeRouteLeave","to","from","next","removeEventListener"],"mappings":"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","file":"js/chunk-005188cd.c134baa6.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAgCAYAAAAffCjxAAAAAXNSR0IArs4c6QAAASVJREFUSA2l1bEOgjAQAFBbFgZ+gOBmwheQaOJCYlyd/Bp3E3/EycTB1YVE/QkHZYLJjcEEA94pkIIC17YJ0Gu4F0raKxtoNM/zpoyxYZZle0PVAWSV5/kWriXn/MFVoAJZi7lMDCj9JgJTO1qWtZCC2pAgCJ5kqAvBmZCgPoQEUZBeiIp0QjJIKySL/IVUkB9IFalBOkgF6SIfCJAp7OAzBtjKvYPL/jtCu3OsJ41XL7II5hu2bV8Bm0B/VIC+4zhpFEWnIiY9jDiOM9d1d2majgVsJot9KmQYhi9drCq1ulgF4Y/QwWqQDvYDqWJ/IRWsFZLFOiEZrBeiYiSIgpGOI4TK5vu+mSTJASrGvByDs39B/qIyqWXR3qQhBAUMZ3Q3TXPzBkjOOFGpZ2GSAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAMCAYAAABm+U3GAAAAAXNSR0IArs4c6QAAAQ5JREFUOBGdkdtOwkAURVvBAOUS/QN+iw8zMeGBxERRDMgTUIw0ioGY+Dc+8jCuTeYkttJS2Mnqmc7ZZ/cyQVBCzrk2rGAD1yVGjlsIasEnmL5ZXB2fLHAQ0IS1T3yg3vj1F7VTMJrfYlCh7z7okVqBEG793pbazk840GEgggSkJ6iYjbXC+yDpF7WsV1gxNuANpBFUswPsKXwA0gc0s57UPQaFvoL0DP9CbYDeBdyBlEBkvVSlUYcYpDHkhtogHoXfg6SvbFhvX9mowQKkCVymDAU3eHWoOlxpCfW/obP9tnMv1NKh9jxmqqBfJ82hFnDRG0pTODk0E25ZE51uTPMHemEY7sx4TvUvNmS2+wvUoFm5yP6K7gAAAABJRU5ErkJggg==\"","import { getProductInfo,getProductShopInfo,addToCart, addToCollection, delectCollection, ifCollection, getCartNum, shareGoods} from \"../../services/productInfoService\";\r\nimport { queryPickupListService, receiveBtnService } from '../../services/goodsService.js';\r\nimport { ImagePreview,Dialog } from 'vant';\r\nimport { mapActions, mapState } from \"vuex\";\r\nimport Preview from \"@/components/preview/Preview.vue\";\r\nimport { storage } from '../../utils/storage';\r\nexport const goodsDetail ={\r\n    name: 'goodsDetail',\r\n    data() {\r\n        return {\r\n            listLoadingBol:false,\r\n            lists: {\r\n                spuPicUrlList: [],\r\n            },\r\n            shopInfo:{},//店铺信息\r\n            isShowPlaceHolder:false,\r\n            skuList: [],\r\n            skuNum: [],//购物车角标\r\n            collectCode: [],\r\n            cutOffTimeStr: [],\r\n            getPickupList: [],//优惠券列表\r\n            unionPayActList:[],//云闪付活动列表\r\n            fullReductionList:[], //满减列表\r\n            packList:[],//打包列表\r\n            icon: {\r\n                // arrowBg: require(\"@/assets/images/mall/navbar_icon_arrow_blackBg@2x.png\"),\r\n                collection: require(\"@/assets/images/newSlicing/nav_icon_like_cut4.png\"),\r\n                afterCollectionBg: require(\"@/assets/images/newSlicing/nav_icon_like_cut2.png\"),\r\n                collectionBg: require(\"@/assets/images/newSlicing/nav_icon_like_cut.png\"),\r\n                afterCollection: require(\"@/assets/images/newSlicing/nav_icon_like_cut3.png\"),\r\n                shoppingCartBg: require(\"@/assets/images/newSlicing/nav_icon_shop_cut.png\"),\r\n                shoppingCart: require(\"@/assets/images/newSlicing/nav_icon_shop_cut3.png\"),\r\n                arrowBg: require(\"@/assets/images/newSlicing/nav_icon_back_cut.png\"),\r\n                arrow: require(\"@/assets/images/newSlicing/nav_icon_back_cut3.png\"),\r\n                share: require(\"@/assets/images/mall/mall_icon_share_gray.png\"),\r\n                topClick: require(\"@/assets/images/mall/redLine.png\"),\r\n                callShop: require(\"@/assets/images/mall/mall_icon_call.png\"),\r\n                shop: require(\"@/assets/images/mall/mall_icon_shop.png\"),\r\n                evaluate: require(\"@/assets/images/mall/mall_icon_more.png\"),\r\n                shareChart: require(\"@/assets/images/common/nav_icon_share_wechat.png\"),\r\n                shareFriends: require(\"@/assets/images/common/nav_icon_share_moments.png\"),\r\n                like: require(\"@/assets/images/common/icon_evaluate_red.png\"),\r\n                noLike: require(\"@/assets/images/common/icon_evaluate_gray.png\"),\r\n                defaultXWJPic:require(\"@/assets/images/default/default_picture.png\")\r\n            },\r\n            show: {\r\n                normalTitle: true,//透明吸顶\r\n                activeTitle: false,//不透明吸顶\r\n                titShow: 0,//顶部标题的详情和评价点击切换\r\n                weChartShare: false,//微信分享\r\n                couponList: false,//优惠券列表\r\n                callShop: false,\r\n                afterCollect: false,\r\n                beforeCollect: true,\r\n                firstEvaluate: false,\r\n            },\r\n            evalInfo:{\r\n                evalPicUrl:{}\r\n            },\r\n            num: 1,//购买数量\r\n            detailDescribe: [],\r\n            ownerPicUrl: require(\"@/assets/images/default/user_default_avata.png\"),\r\n            cartNum: 0,     //购物车图标显示\r\n            goodsNum: 0,//购买商品数量\r\n            shareUrl: '',//分享的商品url\r\n            scroll: 0,\r\n            // 图片预览属性\r\n            images: [],\r\n            setTopHeight:{\r\n                'padding-top':this.$stbHeight+'px'\r\n            },\r\n            bottomHeight:0,\r\n            swipePic:0,\r\n            ifNetworkError:false,//是否网络异常\r\n            spuCode:'',\r\n            isShowTopBtn:false, //是否显示置顶按钮\r\n            bannerChangeBool:false, //banner列表替换中\r\n            productImgs:[],\r\n            scrollTimerId: 0,\r\n            hasStoragePermission:false,\r\n            isShowPreview:false,\r\n            defaultImg: 'this.src=\"' + require('../../assets/images/default/default_picture.png') + '\"',\r\n        }\r\n    },\r\n    components: {\r\n        \"Preview\": Preview,\r\n    },\r\n\r\n    created(){\r\n        this.$nextTick(()=>{\r\n            this.bottomHeight = this.$footBarHeight + 55;\r\n        })\r\n    },\r\n    methods: {\r\n        //去打包满减活动页面\r\n        goToUnionPayActivity(val,activityId){\r\n            this.$router.push({\r\n                name: 'activityTemplate',\r\n                params: {\r\n                    \"templateId\":activityId\r\n                }\r\n            })\r\n        },\r\n        //去打包满减活动页面\r\n        goToreducedPackaging(val,activityId){\r\n            this.$router.push({\r\n                name: 'reducedPackaging',\r\n                params: {\r\n                    \"typeVal\":val,\r\n                    \"activityId\":activityId\r\n                }\r\n            })\r\n        },\r\n        //商品图片缓存完后替换商品图，优化显示效果\r\n        productImgDownload() {\r\n            let picNum=0;\r\n            let that = this;\r\n            that.lists.spuPicUrlList.map((item,i)=>{\r\n                var img = new Image();\r\n                img.onload = function(){\r\n                    picNum +=1;\r\n                    if (that.lists.spuPicUrlList.length==picNum) {\r\n                        that.productImgs = that.lists.spuPicUrlList;\r\n                    }\r\n                };\r\n                img.src = that.lists.spuPicUrlList[i];\r\n            });\r\n        },\r\n        bannerChange(){\r\n            this.bannerChangeBool = true;\r\n            setTimeout(()=>{\r\n                this.bannerChangeBool = false;\r\n            },500)\r\n        },\r\n        //置顶按钮\r\n        goTopBtn(){\r\n            this.$refs.goodsPageScroll.scrollTop = 0;\r\n        },\r\n        bannerPreview(bannerImgArr,index){\r\n            // console.log(\"预览图片\"+indexChange);\r\n            if(this.bannerChangeBool){\r\n                return;\r\n            }\r\n            this.images = bannerImgArr;\r\n            this.isShowPreview = true;\r\n            this.$nextTick(()=>{\r\n                this.$refs.myPreview.setIndex(index);\r\n                this.$refs.myPreview.setIsShowPreview(true);\r\n                this.$store.dispatch(\"setPreviewId\", this.$refs.myPreview);\r\n            })\r\n            console.log(\"-------------\")\r\n        },\r\n        preview(evalPicUrl, index){\r\n            let srcArr = [];\r\n            evalPicUrl.map((evalPicUrlItem)=>{\r\n                srcArr.push(evalPicUrlItem.picUrl)\r\n            })\r\n            this.images = srcArr;\r\n            this.isShowPreview = true;\r\n            this.$nextTick(()=>{\r\n                this.$refs.myPreview.setIndex(index);\r\n                this.$refs.myPreview.setIsShowPreview(true);\r\n                this.$store.dispatch(\"setPreviewId\", this.$refs.myPreview);\r\n            })\r\n        },\r\n        init() {\r\n            const _this = this;\r\n            _this.listLoadingBol = false;\r\n            const data = {\r\n                spuCode: _this.spuCode,\r\n            }\r\n            getProductInfo(data).then(function (response) {\r\n                if(response.resultCode=='0'){\r\n                    _this.listLoadingBol= true;\r\n                    _this.lists = response.data;\r\n\r\n                    if(_this.lists.cutOffTimeStr&&_this.lists.cutOffTimeStr.indexOf(\"<br/>\")){\r\n                        _this.lists.cutOffTimeStr= _this.lists.cutOffTimeStr.replace(/<br\\/>/g,'\\n')\r\n                    }\r\n\r\n                    //labelList内替换换行符\r\n                    // for(var i=0;i<_this.lists.labelList.length;i++){\r\n                    //   if(_this.lists.labelList[i].indexOf(\"<br/>\")){\r\n                    //     _this.lists.labelList[i]= _this.lists.labelList[i].replace('<br/>','\\n')\r\n                    //   }\r\n                    // }\r\n\r\n\r\n                    _this.productImgDownload();\r\n\r\n                    _this.queryPickupList(); //获取优惠券列表\r\n                    _this.ifNetworkError=false;\r\n                    //替换商品详情图片域名\r\n                    response.data.detailDescribe = response.data.detailDescribe.replace(/xwjfile.juhaolian.cn/g, 'xwjfilea.juhaolian.cn');\r\n                    _this.skuList = response.data.skuList[0];\r\n                    _this.evalInfo = response.data.evalInfo;\r\n\r\n                    const eva = response.data.evalInfo;\r\n                    if (eva == null) {\r\n                        _this.show.firstEvaluate = false;\r\n                    } else {\r\n                        console.log(\"有第一条评价\");\r\n                        _this.show.firstEvaluate = true;\r\n                    }\r\n                    _this.getShopInfo(_this.lists.shopCode);\r\n\r\n                }else{\r\n                    Dialog.alert({\r\n                        message:response.msg\r\n                    }).then(() => {\r\n                        _this.$router.go(-1);//返回上一层\r\n                    });\r\n                }\r\n\r\n            }).catch(error => {\r\n                _this.$toast(\"网络异常，请稍后重试\");\r\n                _this.ifNetworkError=true;\r\n                _this.lists={\r\n                    'priceLine':\"\",\r\n                },\r\n                    _this.productImgs=[_this.icon.defaultXWJPic];\r\n                _this.skuList={'skuPrice':0.00,},\r\n                    console.log(JSON.stringify(_this.lists)+\"异常数据\")\r\n            });\r\n        },\r\n        /**\r\n         * 获取店铺优惠券列表\r\n         * @param\r\n         * shopCode  Number      店铺CODE\r\n         * ownerCode Number      用户CODE\r\n         * areaCode  Number      小区CODE\r\n         **/\r\n        queryPickupList() {\r\n            let paramData = {\r\n                ownerCode: this.$userInfo.OWNER_CODE,\r\n                areaCode: this.$userInfo.AREA_CODE,\r\n                shopCode: this.lists.shopCode,\r\n                skuNo:this.lists.skuList[0].skuNo,\r\n                spuCode:this.lists.spuCode\r\n            }\r\n            queryPickupListService(paramData).then(res => {\r\n                if (res.resultCode == 0) {\r\n                    this.getPickupList = res.data.couponList;\r\n                    if( res.data.act[1]){\r\n                        this.fullReductionList = res.data.act[1];\r\n                    }else{\r\n                        this.fullReductionList = [];\r\n                    }\r\n                    if( res.data.act[2]){\r\n                        this.packList = res.data.act[2];\r\n                    }else{\r\n                        this.packList = [];\r\n                    }\r\n                    if( res.data.act[3]){\r\n                        this.unionPayActList = res.data.act[3];\r\n                    }else{\r\n                        this.unionPayActList = [];\r\n                    }\r\n                }\r\n            }).catch(error => {\r\n            });\r\n        },\r\n        // 获取店铺简略信息\r\n        getShopInfo(shopCode){\r\n            console.log(\"店铺详情==========>\")\r\n            const data={\r\n                shopCode:shopCode,\r\n                areaCode: this.$userInfo.AREA_CODE\r\n            }\r\n            getProductShopInfo(data).then(response=>{\r\n                this.shopInfo=response.data;\r\n            });\r\n        },\r\n        handleScroll() {//监听滚动设置吸顶格式\r\n            const _this = this;\r\n            _this.$nextTick(() => {\r\n                let scrollTop = _this.$refs.goodsPageScroll.scrollTop;\r\n                const changeTitChange = _this.$refs.titChange.offsetTop-55;\r\n                const changeTodetail = _this.$refs.detailChange.offsetTop-55;\r\n                console.log('==========>>>>>>>>>>'+scrollTop,changeTitChange,changeTodetail)\r\n                if (scrollTop > this.$stbHeight) {\r\n                    _this.show.activeTitle = true;\r\n                    _this.show.normalTitle = false;\r\n                    if (scrollTop >= changeTodetail) {//吸顶详情和评价的切换\r\n                        _this.show.titShow = 2;\r\n                    } else if(scrollTop>=changeTitChange){\r\n                        _this.show.titShow = 1;\r\n                    } else{\r\n                        _this.show.titShow = 0;\r\n                    }\r\n                    _this.isShowTopBtn = true;\r\n                } else {\r\n                    _this.show.activeTitle = false;\r\n                    _this.show.normalTitle = true;\r\n                    _this.isShowTopBtn = false;\r\n                }\r\n            });\r\n        },\r\n        goodsChange(){\r\n            this.$refs.goodsPageScroll.scrollTop = 0;\r\n        },\r\n        titChange() {   //点击顶部评价事件\r\n            const _this = this;\r\n            // _this.show.titShow=1;\r\n            const titChange = _this.$refs.titChange.offsetTop-55;\r\n            _this.$refs.goodsPageScroll.scrollTop = titChange;\r\n        },\r\n        detailChange() {//点击顶部详情事件\r\n            const _this = this;\r\n            // _this.show.titShow=2;\r\n            const changeTodetail = _this.$refs.detailChange.offsetTop-55;\r\n            _this.$refs.goodsPageScroll.scrollTop = changeTodetail;\r\n            if(_this.$refs.goodsPageScroll.scrollTop < changeTodetail){\r\n                _this.$toast(\"详情已全部展示完\")\r\n            }\r\n            else {\r\n                //解决ZHSQYYPT-6719,iphone7P浏览商品详情有时不能显示图片，需要滑动或点一下才能显示出来\r\n                if (this.scrollTimerId != 0) {\r\n                    clearTimeout(this.scrollTimerId);\r\n                }\r\n                if (this.$devicePlatform == 'ios') {\r\n                    this.scrollTimerId = setTimeout(() => {\r\n                        _this.$refs.goodsPageScroll.scrollTop += 0.2;\r\n                    }, 4000);\r\n                }\r\n            }\r\n        },\r\n        // 增加商品数量超过限制\r\n        addNumBtn(storeNumber) {\r\n            if (this.goodsNum == 1&&storeNumber!=0){\r\n                if(storeNumber==1){\r\n                    this.$toast(\"已经是极限了\");\r\n                }else{\r\n                    this.$toast(\"不能继续减少了哦\")\r\n                }\r\n            }else if(this.goodsNum == 1&&storeNumber==0) {\r\n                this.$toast(\"该商品正在努力补货中哦\")\r\n            }else {\r\n                this.$toast(\"你所选中的商品已经到达最大数量了哦\")\r\n            }\r\n        },\r\n        //修改选中商品数量\r\n        getCount(storeNumber){\r\n            if(this.goodsNum>storeNumber){\r\n                this.$toast(\"你所选中的商品已经到达最大库存了哦\")\r\n            }\r\n        },\r\n        addToChart() {//添加购物车\r\n            if (this.skuList.storeNumber != 0) {\r\n                const chartData = {\r\n                    ownerCode: this.$userInfo.OWNER_CODE,\r\n                    spuCode: this.lists.spuCode,\r\n                    skuNo: this.lists.skuList[0].skuNo,\r\n                    shopCode: this.lists.shopCode,\r\n                    skuCount: this.goodsNum,\r\n                    mark: 1\r\n                };\r\n                addToCart(chartData).then(response =>{\r\n                    if (response.resultCode == '0') {\r\n                        this.$toast('添加购物车成功');\r\n                        this.getCartNum();\r\n                    } else if (response.resultCode == '20100' && response.data.result == '0') {\r\n                        this.$toast('您所添加商品超过最大购买量了哦');\r\n                    }\r\n                });\r\n            } else {\r\n                this.$toast(\"该商品正在努力补货中哦\");\r\n            }\r\n        },\r\n\r\n        // 点击分享弹窗\r\n        wechartShare() {\r\n            this.show.weChartShare = true;\r\n            console.log(\"走进了分享\")\r\n        },\r\n        // 点击优惠券弹窗\r\n        couponList() {\r\n            this.show.couponList = true;\r\n        },\r\n        shareAction(x){\r\n            if (this.hasStoragePermission) {\r\n                this.shareToFriend(x)\r\n            }else{\r\n                Dialog.confirm({\r\n                    message: \"请您打开存储权限，以正常使用分享功能\"\r\n                })\r\n                    .then(() => {\r\n                        this.requestStoragePermissions(x);\r\n                    })\r\n                    .catch(() => {\r\n                        //oncancel\r\n                    });\r\n            }\r\n        },\r\n        //分享到朋友圈或者微信好友\r\n        shareToFriend(x) {\r\n            const data = {\r\n                ownerCode: this.$userInfo.OWNER_CODE,\r\n                shareTo: x,//0代表什么，1代表什么\r\n                spuCode: this.lists.spuCode,\r\n            }\r\n            shareGoods(data).then(response => {\r\n                if (response.resultCode == '0') {\r\n                    this.show.weChartShare = false;\r\n                    this.shareUrl = response.data;\r\n                    Wechat.share({\r\n                        message: {\r\n                            title: this.lists.spuName,\r\n                            description: this.lists.spuSalePoint==null?'更多精彩，尽在信我家':this.lists.spuSalePoint,\r\n                            thumb: this.lists.skuList[0].skuPicUrl,\r\n                            media: {\r\n                                type: Wechat.Type.WEBPAGE,\r\n                                webpageUrl: this.shareUrl\r\n                            }\r\n                        },\r\n                        scene: x == 1 ? Wechat.Scene.SESSION : Wechat.Scene.TIMELINE  //1是微信好友 2是朋友圈\r\n                    }, function () {\r\n                        //alert(\"Success\");\r\n                    }, reason=>{\r\n                        //alert(\"Failed: \" + reason);\r\n                        this.$toast(reason);//无微信时提示用户未安装微信\r\n                    });\r\n                } else {\r\n                    this.$toast(\"分享失败，请稍后重试\");\r\n                }\r\n            });\r\n        },\r\n        checkStoragePermissions(x) {\r\n            const platform = navigator.userAgent;\r\n            const isiOS = !!platform.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/);\r\n            let _this = this;\r\n            if (isiOS) {\r\n                this.hasStoragePermission = true;\r\n                this.shareAction(x);\r\n            } else {\r\n                var list = \"android.permission.WRITE_EXTERNAL_STORAGE\";\r\n                var permissions = cordova.plugins.permissions;\r\n                permissions.checkPermission(\r\n                    list,\r\n                    function(status) {\r\n                        if (status.hasPermission) {\r\n                            _this.hasStoragePermission = true;\r\n                            _this.shareAction(x);\r\n                        } else {\r\n                            _this.hasStoragePermission = false;\r\n                            _this.shareAction(x);\r\n                        }\r\n                    },\r\n                    function() {\r\n                        _this.hasStoragePermission = false;\r\n                        _this.shareAction(x);\r\n                    }\r\n                );\r\n            }\r\n        },\r\n        requestStoragePermissions(x) {\r\n            const platform = navigator.userAgent;\r\n            const isiOS = !!platform.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/);\r\n            let _this = this;\r\n            if (isiOS) {\r\n                this.hasStoragePermission = true;\r\n                this.shareAction(x);\r\n            } else {\r\n                var list = [\"android.permission.WRITE_EXTERNAL_STORAGE\"];\r\n                var permissions = cordova.plugins.permissions;\r\n                permissions.requestPermissions(\r\n                    list,\r\n                    function(status) {\r\n                        if (status.hasPermission) {\r\n                            _this.hasStoragePermission = true;\r\n                            _this.shareAction(x);\r\n                        } else {\r\n                            _this.hasStoragePermission = false;\r\n                        }\r\n                    },\r\n                    function() {\r\n                        _this.hasStoragePermission = false;\r\n                    }\r\n                );\r\n            }\r\n        },\r\n        //取消微信分享\r\n        onCancel() {\r\n            this.show.weChartShare = false;\r\n        },\r\n        //点击关闭优惠券\r\n        hideCoverUp() {\r\n            this.show.couponList = false;\r\n        },\r\n        //联系商家\r\n        callShop() {\r\n            if(this.ifNetworkError){\r\n                this.$toast(\"网络异常，请稍后重试\");\r\n            }else{\r\n                const platform = navigator.userAgent;\r\n                const isiOS = !!platform.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/);\r\n                if (isiOS) {\r\n                    window.location.href = \"tel:\" + this.lists.shopTel;\r\n                } else {\r\n                    Dialog.confirm({\r\n                        title:\"拨打电话\",\r\n                        message: this.lists.shopTel,\r\n                    }).then(() => {\r\n                        window.location.href = \"tel:\" + this.lists.shopTel;\r\n                    }).catch(() => {\r\n                        // on cancel\r\n                        Dialog.close;\r\n                    });\r\n                }\r\n            }\r\n        },\r\n        addCollection() {//点击收藏切换收藏样式\r\n            const _this = this;\r\n            const savecollect = {\r\n                collectType: '01',\r\n                contentCode: _this.lists.spuCode,\r\n                userCode: _this.$userInfo.OWNER_CODE,\r\n            };\r\n            const delectcollect = { collectCodes: [_this.collectCode] };\r\n            if (_this.collectCode == '') {\r\n                addToCollection(savecollect).then(function (response) {\r\n                    _this.collectCode = response.data.collectCode;\r\n                    _this.$toast('添加收藏成功');\r\n                    _this.show.afterCollect = true;\r\n                    _this.show.beforeCollect = false;\r\n                }).catch(error => {\r\n                    _this.$toast(\"网络异常，请稍后重试\");\r\n                });\r\n            } else if (_this.collectCode != '') {\r\n                delectCollection(delectcollect).then(function (response) {\r\n                    _this.collectCode = '';\r\n                    _this.$toast('取消收藏成功');\r\n                    _this.show.afterCollect = false;\r\n                    _this.show.beforeCollect = true;\r\n                }).catch(error => {\r\n                    _this.$toast(\"网络异常，请稍后重试\");\r\n                });;\r\n            }\r\n        },\r\n\r\n        ifCollection() {\r\n            const _this = this;\r\n            const data = {\r\n                collectType: '01',\r\n                userCode: _this.$userInfo.OWNER_CODE,\r\n                contentCode: this.spuCode\r\n            }\r\n            ifCollection(data).then(function (response) {\r\n                const collectList = response.data.list;\r\n                if (collectList.length > 0) {\r\n                    _this.show.afterCollect = true;\r\n                    _this.show.beforeCollect = false;\r\n                    _this.collectCode = collectList[0].collectCode;\r\n                } else {\r\n                    _this.show.afterCollect = false;\r\n                    _this.show.beforeCollect = true;\r\n                    _this.collectCode = '';\r\n                }\r\n            });\r\n        },\r\n        // 跳转查看评价详情\r\n        showMoreEval() {\r\n            this.$router.push({ name: 'evaluateList', params: { spuCode: this.lists.spuCode } });\r\n        },\r\n        //跳转店铺详情\r\n        toShop() {\r\n            if(this.ifNetworkError){\r\n                this.$toast(\"网络异常，请稍后重试\");\r\n            }else{\r\n                this.$router.push({ name: 'shopPage', params: { shopCode: this.lists.shopCode } });\r\n            }\r\n        },\r\n        // 跳转结算\r\n        goToBuy() {\r\n            // const _this = this;\r\n            if(this.skuList.storeNumber==0){\r\n                this.$toast(\"该商品正在努力补货中哦\")\r\n            }else{\r\n                const settleAccountsList = [];\r\n                settleAccountsList.push({\r\n                    shopName: this.lists.shopName,\r\n                    shopCode: this.lists.shopCode,\r\n                    shopTotal: this.goodsNum * this.lists.skuList[0].skuPrice,\r\n                    skuList: [\r\n                        {\r\n                            spuCode: this.lists.skuList.spuCode,\r\n                            spuName: this.lists.skuList.spuName,\r\n                            skuNo: this.lists.skuList[0].skuNo,\r\n                            attrValueContent: this.lists.skuList[0].attrValueContent,\r\n                            skuPrice: this.lists.skuList[0].skuPrice,\r\n                            skuCount: this.goodsNum, //数量\r\n                            skuDelivery: 0,\r\n                            skuTotal: this.goodsNum * this.lists.skuList[0].skuPrice,\r\n                            skuPicUrl: this.lists.skuList[0].skuPicUrl,\r\n                            // activitySpuId:_this.$route.params.activitySpuId\r\n                        }\r\n                    ]\r\n                });\r\n                let goodsData = {\r\n                    orderSource: \"1\",\r\n                    goodsList: settleAccountsList,\r\n                    // num: Math.random() * 100\r\n                };\r\n                console.log(\"跳转结算\"+JSON.stringify(goodsData));\r\n                // this.$router.push({ path:\"/orderPayNew\", query:{'goodsData':goodsData}});\r\n                this.$router.push({\r\n                    name: \"orderPayNew\",\r\n                    params: {\r\n                        'goodsData': goodsData\r\n                    }\r\n                });\r\n            }\r\n            // console.log(\"结束\" + goodsData);\r\n        },\r\n        'turnToCart': function () {\r\n            this.$router.push({ path: '/shoppingCart' });\r\n        },\r\n        'onClickLeft': function () {\r\n            this.$router.go(-1);//返回上一层\r\n            this.$refs.goodsPageScroll.scrollTop =this.scroll= 0;\r\n        },\r\n        /**\r\n         * 领取优惠券\r\n         * @param\r\n         * id        Number      优惠券CODE\r\n         * ownerCode Number      用户CODE\r\n         * areaCode  Number      小区CODE\r\n         **/\r\n        receiveBtn(getPickupItem) {\r\n            var _this = this;\r\n            if (!this.$userInfo.ROOM_CODE) {\r\n                Dialog.confirm({\r\n                    title: \"您未绑定房间，是否前往绑定？\",\r\n                    confirmButtonText: \"前往\"\r\n                }).then(() => {\r\n                    //跳转到绑定房产页面\r\n                    this.$router.push(\"selectArea\");\r\n                }).catch(() => {\r\n                });\r\n                return\r\n            }\r\n            let paramData = {\r\n                id: getPickupItem.id,\r\n                ownerCode: this.$userInfo.OWNER_CODE,\r\n                areaCode: this.$userInfo.AREA_CODE,\r\n                roomCode: this.$userInfo.ROOM_CODE\r\n            }\r\n            receiveBtnService(paramData).then(res => {\r\n                if (res.resultCode == 0) {\r\n                    _this.$toast(\"领取优惠券成功\");\r\n                    getPickupItem.isPicked = 1;\r\n                } else {\r\n                    _this.$toast(res.msg);\r\n                }\r\n            }).catch(error => {\r\n                _this.$toast(error)\r\n            });\r\n            //\r\n        },\r\n        changeSeeRange: function (getPickupItem) {\r\n            getPickupItem.seeRange = !getPickupItem.seeRange;\r\n            this.$forceUpdate();\r\n            // $ionicScrollDelegate.resize(); //重新计算滑块大小\r\n        },\r\n        getCartNum() {\r\n            const _this = this;\r\n            const data = {\r\n                ownerCode: _this.$userInfo.OWNER_CODE,\r\n            }\r\n            getCartNum(data).then(function (response) {\r\n                _this.skuNum = response.data.skuTypeNum;\r\n                storage.setStorage('skuTypeNum',_this.skuNum);\r\n            });\r\n        },\r\n        //键盘弹出事件\r\n        moveInputIntoView(e){\r\n\r\n\r\n            this.isShowPlaceHolder = true;\r\n\r\n            this.$nextTick(() => {\r\n                this.$refs.goodsPageScroll.scrollTop = this.$refs.changeTop.offsetTop - 100;\r\n            });\r\n\r\n        },\r\n        //键盘收回事件\r\n        resetInputIntoView(e){\r\n            this.isShowPlaceHolder = false;\r\n        },\r\n    },\r\n\r\n    mounted: function () {},\r\n    // const _this = this;\r\n    // window.addEventListener(\"scroll\", _this.handleScroll, true);\r\n    // _this.init();\r\n    // _this.ifCollection();\r\n    // _this.getCartNum();\r\n    computed: mapState({\r\n        goodsDetailEventBackButtonFlag: state => state.goBack.goodsDetailEventBackButtonFlag,\r\n        setSpuCode: state => state.productPage.setSpuCode,\r\n    }),\r\n    watch: {\r\n        /*监控到物理返回键点击状态*/\r\n        goodsDetailEventBackButtonFlag(val) {\r\n            if (val) {\r\n                if(this.show.weChartShare==true){\r\n                    this.show.weChartShare=false;\r\n                }else if(this.show.couponList==true){\r\n                    this.show.couponList=false;\r\n                } else{\r\n                    this.onClickLeft();\r\n                }\r\n                this.$store.dispatch('setGoodsDetailEventBackButtonFlag', false);\r\n            }\r\n        },\r\n        setSpuCode:{\r\n            handler(newval, oldval) {\r\n                if(newval != this.spuCode&&newval!=-1){\r\n                    this.spuCode=newval;\r\n                    this.init();\r\n                    this.$store.commit(\"setSpuCodeChange\", {\r\n\r\n                        spuCode: -1\r\n                    });\r\n                }\r\n            },\r\n        },\r\n    },\r\n    activated(){\r\n        this.isShowPreview = false;\r\n        let goodsUrl = this.$route.params.goodsUrl;\r\n        if (goodsUrl && goodsUrl != undefined) {\r\n            this.productImgs = [goodsUrl];\r\n        }\r\n        window.addEventListener(\"scroll\", this.handleScroll);\r\n        //添加键盘监听,让第一响应者滚动到键盘上方显示\r\n        window.addEventListener(\"native.keyboardshow\", this.moveInputIntoView);\r\n        window.addEventListener(\"native.keyboardhide\", this.resetInputIntoView);\r\n        document.querySelector(\".goodsDetail\").addEventListener('touchmove', function (e) {\r\n            if (document.activeElement)\r\n                document.activeElement.blur();\r\n        }, { passive: false });\r\n        if(this.$route.params.spuCode){\r\n            this.lists={};\r\n            this.$refs.goodsPageScroll.scrollTop = this.scroll = 0;\r\n            this.spuCode=this.$route.params.spuCode;\r\n            this.init();\r\n            this.ifCollection();\r\n            this.getCartNum();\r\n        }else{\r\n            console.log(this.lists.detailDescribe)\r\n            if(this.scroll!=0){\r\n                this.$refs.goodsPageScroll.scrollTop = this.scroll;\r\n                console.log(\"返回页面的位置\"+ this.scroll+\"-----》\"+this.$refs.goodsPageScroll.scrollTop)\r\n            }\r\n            this.init();\r\n            this.ifCollection();\r\n            this.getCartNum();\r\n        }\r\n    },\r\n    deactivated(){\r\n        //\r\n        this.skuList={};\r\n        this.goodsNum=1;\r\n        this.productImgs=[];\r\n        this.shopInfo={\r\n\r\n        };\r\n        this. titShow=0;\r\n        this.show.activeTitle = false;\r\n        this.show.normalTitle = true;\r\n        this.show.beforeCollect = true;\r\n        this.show.afterCollect = false;\r\n        this.isShowTopBtn = false;\r\n        if (this.scrollTimerId != 0) {\r\n            clearTimeout(this.scrollTimerId);\r\n        }\r\n    },\r\n    beforeRouteLeave(to, from, next){\r\n        //移除键盘监听,让第一响应者滚动到键盘上方显示\r\n        window.removeEventListener(\"native.keyboardshow\", this.moveInputIntoView);\r\n        window.removeEventListener(\"native.keyboardhide\", this.resetInputIntoView);\r\n        window.removeEventListener(\"scroll\", this.handleScroll, true);\r\n        this.scroll = this.$refs.goodsPageScroll.scrollTop;\r\n        console.log(\"离开页面的位置\"+this.scroll);\r\n        next();\r\n    },\r\n    //  beforeRouteEnter(to, from, next) {\r\n    //       if (from.path == \"/evaluateList\") {\r\n    //          window.scrollTo(0,1000);\r\n    //          console.log(\"从商品评价回来\");\r\n    //       } else {\r\n    //          window.scrollTo(0,0);\r\n    //       }\r\n    //       next();\r\n    //     },\r\n}\r\n","module.exports = __webpack_public_path__ + \"img/no_coupon_img.a94be2ee.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAMCAYAAABm+U3GAAAAAXNSR0IArs4c6QAAAQVJREFUOBGlkd1KAlEURuc0U47zQ/l4PZggdBEEalka3lgpJZUgwjyE7+HFaX1juwtRmcYPFvuc2Wev+XPe+yIIgjVcO+c21NrBdcFwD/KAzQgU1aiuldlzGIMykrgBL9qRR/i3nBlJn0GZQKN8QBYxTEG5h7Dqk3NWUnvrV9ZbqQm40IR3ULpwZr1DlTMRDEF5g3jvWRoJzEG5g4NyepI+gTKD/VK7EwdS+ALlFpz1rHJN0gEoesum9Y5WDmawAOUG/uSsQ3gAZQ7JUdluk4EclqB0wIGk+rnKJ6S7c5X2DF7CCpQ29MuV99/UelK7M4IrKH6FKvpEmfVPqohaoM/yAXkV2Q+jmVmqKd7MGwAAAABJRU5ErkJggg==\""],"sourceRoot":""}