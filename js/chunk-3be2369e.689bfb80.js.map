{"version":3,"sources":["webpack:///./src/components/flashSaleCountDown/detailCountDown.vue?9d8b","webpack:///./src/components/flashSaleCountDown/detailCountDown.vue?900d","webpack:///src/components/flashSaleCountDown/detailCountDown.vue","webpack:///./src/components/flashSaleCountDown/detailCountDown.vue?5b3e","webpack:///./src/components/flashSaleCountDown/detailCountDown.vue?8d88","webpack:///./src/page/product/flashSaleGoods.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","timeBox","on","countDownFinish","scopedSlots","_u","key","fn","timeData","staticClass","style","_v","_s","hours","minutes","seconds","staticRenderFns","component","flashSaleGoods","name","data","lists","spuPicUrlList","flashSaleData","shopInfo","skuList","skuNum","collectCode","cutOffTimeStr","goodsNum","icon","collection","require","afterCollectionBg","collectionBg","afterCollection","shoppingCartBg","shoppingCart","arrowBg","arrow","share","topClick","callShop","shop","evaluate","like","noLike","defaultXWJPic","noNetworkImg","shareChart","shareFriends","show","normalTitle","activeTitle","titShow","weChartShare","firstEvaluate","showDialog","goodsDown","saleOut","remindSale","bannerChangeBool","networkError","afterCollect","beforeCollect","evalInfo","num","detailDescribe","ownerPicUrl","time","activitySpuId","$route","query","status","remind","isShowTopBtn","setTopHeight","$stbHeight","images","productImgs","hasStoragePermission","isShowPreview","isShowPlaceHolder","components","Preview","detailCountDown","methods","goTopBtn","$refs","goodsPageScroll","scrollTop","bannerChange","setTimeout","productImgDownload","picNum","that","map","item","i","img","Image","onload","console","log","length","src","bannerPreview","bannerImgArr","index","$nextTick","myPreview","setIndex","setIsShowPreview","$store","dispatch","preview","evalPicUrl","srcArr","evalPicUrlItem","push","picUrl","init","spuCode","getProductInfo","then","response","resultCode","indexOf","replace","eva","getShopInfo","shopCode","Dialog","alert","message","msg","$router","go","getProductShopInfo","flashSaleDetail","ownerCode","$userInfo","OWNER_CODE","getFlashSaleDetail","JSON","stringify","spuStatus","startTime","nowTime","isSubsribe","endTime","spuSkPrice","catch","error","$toast","toBuy","ROOM_CODE","settleAccountsList","shopName","shopTotal","skuPrice","spuName","skuNo","attrValueContent","skuCount","skuDelivery","skuTotal","skuPicUrl","goodsData","orderSource","goodsList","Math","random","params","confirm","confirmButtonText","handleScroll","_this","changeTitChange","titChange","offsetTop","changeTodetail","detailChange","toShop","ifNetworkError","showMoreEval","goodsChange","wechartShare","onCancel","shareAction","x","shareToFriend","requestStoragePermissions","areaCode","AREA_CODE","shareTo","getFlashSaleUrl","shareUrl","Wechat","title","description","spuSalePoint","thumb","media","type","Type","WEBPAGE","webpageUrl","scene","Scene","SESSION","TIMELINE","reason","checkStoragePermissions","platform","navigator","userAgent","isiOS","match","list","permissions","cordova","plugins","checkPermission","hasPermission","requestPermissions","window","location","href","shopTel","close","addCollection","savecollect","collectType","contentCode","userCode","delectcollect","collectCodes","addToCollection","delectCollection","ifCollection","collectList","onClickLeft","spuId","subscribeFlag","remindUser","remindBefor","onRefresh","addNumBtn","addToChart","storeNumber","skStoreBal","chartData","mark","addToCart","getCartNum","result","skuTypeNum","storage","setStorage","getCount","path","moveInputIntoView","e","changeTop","resetInputIntoView","mounted","computed","mapState","setFlashSaleSpuCode","state","productPage","watch","handler","newval","oldval","arr","split","commit","flashSaleSpuCode","activated","goodsUrl","undefined","addEventListener","document","querySelector","activeElement","blur","passive","scroll","deactivated","beforeRouteLeave","to","from","next","removeEventListener"],"mappings":"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","file":"js/chunk-3be2369e.689bfb80.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./detailCountDown.vue?vue&type=style&index=0&id=4cb76aa6&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./detailCountDown.vue?vue&type=style&index=0&id=4cb76aa6&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('van-count-down',{attrs:{\"time\":_vm.timeBox},on:{\"finish\":_vm.countDownFinish},scopedSlots:_vm._u([{key:\"default\",fn:function(timeData){return [_c('span',{staticClass:\"item\",style:({'background':'#F5A623'})},[_vm._v(_vm._s(timeData.hours))]),_c('span',{style:({'color':'#F5A623'})},[_vm._v(\":\")]),_c('span',{staticClass:\"item\",style:({'background':'#F5A623'})},[_vm._v(_vm._s(timeData.minutes))]),_c('span',{style:({'color':'#F5A623'})},[_vm._v(\":\")]),_c('span',{staticClass:\"item\",style:({'background':'#F5A623'})},[_vm._v(_vm._s(timeData.seconds))])]}}])})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n   <van-count-down :time=\"timeBox\" @finish=\"countDownFinish\">\r\n        <template v-slot=\"timeData\" class=\"seckillDate\">\r\n          <span\r\n            class=\"item\"\r\n            :style=\"{'background':'#F5A623'}\"\r\n          >{{ timeData.hours}}</span>\r\n          <span :style=\"{'color':'#F5A623'}\">:</span>\r\n          <span\r\n            class=\"item\"\r\n           :style=\"{'background':'#F5A623'}\"\r\n          >{{ timeData.minutes}}</span>\r\n          <span :style=\"{'color':'#F5A623'}\">:</span>\r\n          <span\r\n            class=\"item\"\r\n           :style=\"{'background':'#F5A623'}\"\r\n          >{{ timeData.seconds}}</span>\r\n        </template>\r\n      </van-count-down>\r\n  </div>\r\n</template>\r\n<style scoped>\r\n.seckillDate {\r\n  font-family: PingFangSC-Medium;\r\n  font-size: 14px;\r\n  color: #ffffff;\r\n  letter-spacing: -0.04px;\r\n}\r\n.item {\r\n  display: inline-block;\r\n  width: 26px;\r\n  height: 26px;\r\n  margin: 0 5px;\r\n  color: #fff;\r\n  font-size: 12px;\r\n  text-align: center;\r\n  line-height: 26px;\r\n  border-radius: 2px;\r\n}\r\n</style>\r\n<script>\r\nexport default {\r\n    name:\"detailCountdown\",\r\n    props:['timeBox'],\r\n    data:{\r\n        returun:{\r\n          interValTime:null,\r\n        }\r\n    },\r\n    methods:{\r\n         countDownFinish(){\r\n             console.log(\"走到了这里！！\");\r\n          this.$parent.flashSaleDetail();\r\n        }\r\n    },\r\n    mounted(){\r\n        let timeDifference=this.timeBox;\r\n        this.interValTime = setInterval(() => {\r\n            timeDifference -= 1000;\r\n            if(timeDifference==300000){\r\n            this.countDownFinish();\r\n          }\r\n        }, 1000);\r\n    },\r\n    destroyed(){\r\n      clearInterval(this.interValTime)\r\n    }\r\n}\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./detailCountDown.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./detailCountDown.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./detailCountDown.vue?vue&type=template&id=4cb76aa6&scoped=true&\"\nimport script from \"./detailCountDown.vue?vue&type=script&lang=js&\"\nexport * from \"./detailCountDown.vue?vue&type=script&lang=js&\"\nimport style0 from \"./detailCountDown.vue?vue&type=style&index=0&id=4cb76aa6&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4cb76aa6\",\n  null\n  \n)\n\nexport default component.exports","import { Dialog } from \"vant\";\r\nimport {\r\n    getProductInfo,\r\n    getProductShopInfo,\r\n    getFlashSaleDetail,\r\n    remindUser,\r\n    getToPay,\r\n    getFlashSaleUrl,addToCart, addToCollection, delectCollection, ifCollection, getCartNum,\r\n} from \"../../services/productInfoService\";\r\nimport { mapActions, mapState} from \"vuex\";\r\nimport Preview from \"@/components/preview/Preview.vue\";\r\nimport detailCountDown from \"../../components/flashSaleCountDown/detailCountDown\"\r\nimport { ImagePreview} from 'vant';\r\nimport {storage} from '../../utils/storage';\r\n\r\nexport const flashSaleGoods = {\r\n    name: \"flashSaleGoods\",\r\n    data() {\r\n        return {\r\n            lists: {\r\n                spuPicUrlList:[]\r\n            },\r\n            flashSaleData: {}, //商品秒杀信息\r\n            shopInfo:{},//店铺信息\r\n            skuList: [],\r\n            skuNum: [], //购物车角标\r\n            collectCode: [],\r\n            cutOffTimeStr: [],\r\n            goodsNum: 0, //购买数量\r\n            icon: {\r\n                collection: require(\"@/assets/images/newSlicing/nav_icon_like_cut4.png\"),\r\n                afterCollectionBg: require(\"@/assets/images/newSlicing/nav_icon_like_cut2.png\"),\r\n                collectionBg: require(\"@/assets/images/newSlicing/nav_icon_like_cut.png\"),\r\n                afterCollection: require(\"@/assets/images/newSlicing/nav_icon_like_cut3.png\"),\r\n                shoppingCartBg: require(\"@/assets/images/newSlicing/nav_icon_shop_cut.png\"),\r\n                shoppingCart: require(\"@/assets/images/newSlicing/nav_icon_shop_cut3.png\"),\r\n                arrowBg: require(\"@/assets/images/newSlicing/nav_icon_back_cut.png\"),\r\n                arrow: require(\"@/assets/images/newSlicing/nav_icon_back_cut3.png\"),\r\n                share: require(\"@/assets/images/mall/mall_icon_share_gray.png\"),\r\n                topClick: require(\"@/assets/images/mall/redLine.png\"),\r\n                callShop: require(\"@/assets/images/mall/mall_icon_call.png\"),\r\n                shop: require(\"@/assets/images/mall/mall_icon_shop.png\"),\r\n                evaluate: require(\"@/assets/images/mall/mall_icon_more.png\"),\r\n                like: require(\"@/assets/images/common/icon_evaluate_red.png\"),\r\n                noLike: require(\"@/assets/images/common/icon_evaluate_gray.png\"),\r\n                defaultXWJPic:require(\"@/assets/images/default/default_picture.png\"),\r\n                noNetworkImg:require(\"@/assets/images/home/notice/img_net@2x.png\"),\r\n                shareChart:require(\"@/assets/images/common/nav_icon_share_wechat.png\"),\r\n                shareFriends:require(\"@/assets/images/common/nav_icon_share_moments.png\"),\r\n            },\r\n            show: {\r\n                normalTitle: true, //透明吸顶\r\n                activeTitle: false, //不透明吸顶\r\n                titShow: 0, //顶部标题的详情和评价点击切换\r\n                weChartShare: false, //微信分享\r\n                callShop: false,\r\n                firstEvaluate: true,\r\n                showDialog: false, //显示遮罩层\r\n                goodsDown: false, //已下架弹窗\r\n                saleOut: false, //补货中弹窗\r\n                remindSale: false, //订阅弹窗\r\n                bannerChangeBool:false,\r\n                networkError:true,//网络异常请求\r\n                afterCollect: false,\r\n                beforeCollect: true,\r\n            },\r\n            evalInfo: [],\r\n            num: 1, //购买数量\r\n            detailDescribe: [],\r\n            ownerPicUrl: require(\"@/assets/images/default/user_default_avata.png\"),\r\n            time: 1000, //倒计时\r\n            activitySpuId: this.$route.query.activitySpuId,\r\n            // status: this.$route.query.status, //秒杀商品状态：待开始 ：0 秒杀中：1 已下架\r\n            status:-1,//商品状态 0:未开始 1:进行中 2:已结束 3:已暂停(app显示售罄) 4:补货中 ,\r\n            remind:'开抢时提醒我',\r\n            isShowTopBtn:false, //是否显示置顶按钮\r\n            setTopHeight:{\r\n                'padding-top':this.$stbHeight+'px'\r\n            },\r\n            images: [],// 图片预览属性\r\n            productImgs:[],\r\n            hasStoragePermission:false,\r\n            isShowPreview:false,\r\n            isShowPlaceHolder:false,\r\n        };\r\n    },\r\n    components: {\r\n        \"Preview\": Preview,\r\n        detailCountDown\r\n    },\r\n    methods: {\r\n        //置顶按钮\r\n        goTopBtn(){\r\n            this.$refs.goodsPageScroll.scrollTop = 0;\r\n        },\r\n        bannerChange(){\r\n            this.show.bannerChangeBool = true;\r\n            setTimeout(()=>{\r\n                this.show.bannerChangeBool = false;\r\n            },500)\r\n        },\r\n        //商品图片缓存完后替换商品图，优化显示效果\r\n        productImgDownload() {\r\n            let picNum=0;\r\n            let that = this;\r\n            this.lists.spuPicUrlList.map((item,i)=>{\r\n                var img = new Image();\r\n                img.onload = function(){\r\n                    picNum +=1;\r\n                    console.log(\"商品详情图片\"+picNum);\r\n                    console.log(that.lists.spuPicUrlList.length+\"===========\"+picNum);\r\n                    if (that.lists.spuPicUrlList.length==picNum) {\r\n                        console.log(\"===========\"+picNum);\r\n                        that.productImgs = that.lists.spuPicUrlList;\r\n                    }\r\n                };\r\n                img.src = that.lists.spuPicUrlList[i];\r\n            });\r\n        },\r\n        //查看商品大图\r\n        bannerPreview(bannerImgArr,index){\r\n            if(this.show.bannerChangeBool){\r\n                return;\r\n            }\r\n            this.images = bannerImgArr;\r\n            this.isShowPreview = true;\r\n            this.$nextTick(()=>{\r\n                this.$refs.myPreview.setIndex(index);\r\n                this.$refs.myPreview.setIsShowPreview(true);\r\n                this.$store.dispatch(\"setPreviewId\", this.$refs.myPreview);\r\n            })\r\n        },\r\n        preview(evalPicUrl, index){\r\n            let srcArr = [];\r\n            evalPicUrl.map((evalPicUrlItem)=>{\r\n                srcArr.push(evalPicUrlItem.picUrl)\r\n            })\r\n            this.images = srcArr;\r\n            this.isShowPreview = true;\r\n            this.$nextTick(()=>{\r\n                this.$refs.myPreview.setIndex(index);\r\n                this.$refs.myPreview.setIsShowPreview(true);\r\n                this.$store.dispatch(\"setPreviewId\", this.$refs.myPreview);\r\n            })\r\n        },\r\n        //通过spu获取商品信息\r\n        init: function() {\r\n            const data = {\r\n                spuCode: this.spuCode\r\n            };\r\n            getProductInfo(data).then(response =>{\r\n                if(response.resultCode=='0'){\r\n                    this.lists = response.data;\r\n\r\n                    if(this.lists.cutOffTimeStr&&this.lists.cutOffTimeStr.indexOf(\"<br/>\")){\r\n                        this.lists.cutOffTimeStr= this.lists.cutOffTimeStr.replace(/<br\\/>/g,'\\n')\r\n                    }\r\n\r\n                    this.productImgDownload();\r\n                    this.show.networkError=false;\r\n                    this.skuList = response.data.skuList[0];\r\n                    this.evalInfo = response.data.evalInfo;\r\n                    const eva = response.data.evalInfo;\r\n                    if (eva == null) {\r\n                        this.show.firstEvaluate = false;\r\n                    } else {\r\n                        console.log(\"有第一条评价\");\r\n                        this.show.firstEvaluate = true;\r\n                    }\r\n                    this.getShopInfo(this.lists.shopCode);\r\n                }else{\r\n                    Dialog.alert({\r\n                        message:response.msg\r\n                    }).then(() => {\r\n                        this.$router.go(-1);//返回上一层\r\n                    });\r\n                }\r\n            })\r\n            // .catch(error => {\r\n            //     this.show.networkError=true;\r\n            //     this.$toast(\"网络异常，请稍后重试\");\r\n            //     this.productImgs=[this.icon.defaultXWJPic];\r\n            // });\r\n        },\r\n        // 获取店铺信息\r\n        getShopInfo(shopCode){\r\n            console.log(\"店铺详情==========>\")\r\n            const data={\r\n                shopCode:shopCode\r\n            }\r\n            getProductShopInfo(data).then(response=>{\r\n                this.shopInfo=response.data;\r\n            });\r\n        },\r\n        //通过activityId获取商品秒杀信息\r\n        flashSaleDetail() {\r\n            const data = {\r\n                activitySpuId:this.activitySpuId,\r\n                ownerCode:this.$userInfo.OWNER_CODE,\r\n            };\r\n            getFlashSaleDetail(data).then(response=> {\r\n                console.log(\"提醒业主\"+JSON.stringify(response));\r\n                this.status=response.data.spuStatus;\r\n                this.flashSaleData = response.data;\r\n                //  this.status=0;\r\n                if (this.status == 0) {\r\n                    this.flashSaleData.time = (response.data.startTime - response.data.nowTime) * 1000;\r\n                    console.log(\"获取到的时间\"+this.flashSaleData.time)\r\n                    this.remind=response.data.isSubsribe==0?'开抢时提醒我':'取消订阅';\r\n                } else {\r\n                    this.flashSaleData.time = (response.data.endTime - response.data.nowTime) * 1000;\r\n                    console.log(1111111111+this.time);\r\n                }\r\n                console.log(1111111111+this.flashSaleData.spuSkPrice);\r\n            }).catch(error => {\r\n                this.show.networkError=true;\r\n                this.$toast(\"网络异常，请稍后重试\");\r\n                this.productImgs=[this.icon.defaultXWJPic];\r\n            });\r\n        },\r\n        // 秒杀结算\r\n        toBuy() {\r\n            const data={\r\n                activitySpuId: this.activitySpuId,\r\n                count: this.goodsNum\r\n            }\r\n            if(this.status!=1){\r\n                return;\r\n            }\r\n            console.log(\"是否绑定房间\"+this.$userInfo.ROOM_CODE)\r\n            if(!this.$userInfo.ROOM_CODE) {\r\n                Dialog.confirm({\r\n                    message: \"您未绑定房间，是否前往绑定？\",\r\n                    confirmButtonText: \"前往\"\r\n                }).then(() => {\r\n                    //跳转到绑定房产页面\r\n                    this.$router.push(\"selectArea\");\r\n                }).catch(() => {\r\n                });\r\n                return;\r\n            }\r\n            // getToPay(data).then(response=>{\r\n            //   if(response.resultCode==0){\r\n            const settleAccountsList = [];\r\n            settleAccountsList.push({\r\n                shopName: this.lists.shopName,\r\n                shopCode: this.lists.shopCode,\r\n                shopTotal: this.goodsNum * this.lists.skuList[0].skuPrice, //数量需要改变\r\n                skuList: [\r\n                    {\r\n                        spuCode: this.lists.skuList.spuCode,\r\n                        spuName: this.lists.skuList.spuName,\r\n                        skuNo: this.lists.skuList[0].skuNo,\r\n                        attrValueContent: this.lists.skuList[0].attrValueContent,\r\n                        skuPrice: this.flashSaleData.skuPrice,\r\n                        skuCount: this.goodsNum, //数量\r\n                        skuDelivery: 0,\r\n                        skuTotal: this.goodsNum * this.lists.skuList[0].skuPrice,\r\n                        skuPicUrl: this.lists.skuPicUrl,\r\n                        activitySpuId:this.activitySpuId\r\n                    }\r\n                ]\r\n            });\r\n            const goodsData = {\r\n                orderSource: \"2\",\r\n                goodsList: settleAccountsList,\r\n                num: Math.random() * 100\r\n            };\r\n            console.log(\"跳转传参：\"+JSON.stringify(goodsData));\r\n            this.$router.push({\r\n                name: \"orderPayNew\",\r\n                params: {\r\n                    'goodsData': goodsData\r\n                }\r\n            });\r\n        },\r\n        handleScroll: function() {\r\n            //监听滚动设置吸顶格式\r\n            const _this=this;\r\n            _this.$nextTick(() => {\r\n                let scrollTop = _this.$refs.goodsPageScroll.scrollTop;\r\n                const changeTitChange = _this.$refs.titChange.offsetTop-60;\r\n                const changeTodetail =_this.$refs.detailChange.offsetTop-60;\r\n                if(scrollTop >this.$stbHeight){\r\n                    _this.show.activeTitle=true;\r\n                    _this.show.normalTitle=false;\r\n                    if (scrollTop >= changeTodetail) {//吸顶详情和评价的切换\r\n                        _this.show.titShow = 2;\r\n                    } else if(scrollTop>=changeTitChange){\r\n                        _this.show.titShow = 1;\r\n                    } else{\r\n                        _this.show.titShow = 0;\r\n                    }\r\n                    _this.isShowTopBtn = true;\r\n                }else{\r\n                    _this.show.activeTitle=false;\r\n                    _this.show.normalTitle=true;\r\n                    _this.isShowTopBtn = false;\r\n                }\r\n            });\r\n        },\r\n        //跳转店铺详情\r\n        toShop() {\r\n            if(this.ifNetworkError){\r\n                this.$toast(\"网络异常，请稍后重试\");\r\n            }else{\r\n                this.$router.push({ name: 'shopPage', params: { shopCode: this.lists.shopCode } });\r\n            }\r\n        },\r\n        // 跳转待评价列表\r\n        showMoreEval(){\r\n            console.log(\"商品编码\"+this.lists.spuCode);\r\n\r\n            this.$router.push({name:'evaluateList',params:{ spuCode: this.lists.spuCode}});\r\n        },\r\n        goodsChange(){\r\n            this.$refs.goodsPageScroll.scrollTop = 0;\r\n        },\r\n        titChange: function() {\r\n            //点击顶部评价事件\r\n            const titChange = this.$refs.titChange.offsetTop-60;\r\n            this.$refs.goodsPageScroll.scrollTop=titChange;\r\n        },\r\n        detailChange: function() {\r\n            //点击顶部详情事件\r\n            const changeTodetail =this.$refs.detailChange.offsetTop-60;\r\n            this.$refs.goodsPageScroll.scrollTop=changeTodetail;\r\n            if(this.$refs.goodsPageScroll.scrollTop!=changeTodetail){\r\n                this.$toast(\"详情已全部展示完\")\r\n            }\r\n        },\r\n        //打开微信分享弹窗\r\n        wechartShare() {\r\n            this.show.weChartShare = true;\r\n        },\r\n        //取消微信分享\r\n        onCancel: function() {\r\n            this.show.weChartShare = false;\r\n        },\r\n        shareAction(x){\r\n            if (this.hasStoragePermission) {\r\n                this.shareToFriend(x)\r\n            }else{\r\n                Dialog.confirm({\r\n                    message: \"请您打开存储权限，以正常使用分享功能\"\r\n                })\r\n                    .then(() => {\r\n                        this.requestStoragePermissions(x);\r\n                    })\r\n                    .catch(() => {\r\n                        //oncancel\r\n                    });\r\n            }\r\n        },\r\n        //分享到朋友圈或者微信好友\r\n        shareToFriend(x) {\r\n            const data = {\r\n                ownerCode: this.$userInfo.OWNER_CODE,\r\n                areaCode:this.$userInfo.AREA_CODE,\r\n                shareTo: 1,//1--分享至微信\r\n                activitySpuId: this.activitySpuId,\r\n            }\r\n            getFlashSaleUrl(data).then(response => {\r\n                if (response.resultCode == '0') {\r\n                    this.show.weChartShare = false;\r\n                    const shareUrl = response.data;\r\n                    Wechat.share({\r\n                        message: {\r\n                            title: this.lists.spuName,\r\n                            description: this.lists.spuSalePoint==null?'更多精彩，尽在信我家':this.lists.spuSalePoint,\r\n                            thumb: this.lists.skuList[0].skuPicUrl,\r\n                            media: {\r\n                                type: Wechat.Type.WEBPAGE,\r\n                                webpageUrl: shareUrl\r\n                            }\r\n                        },\r\n                        scene: x == 1 ? Wechat.Scene.SESSION : Wechat.Scene.TIMELINE  //1是微信好友 2是朋友圈\r\n                    }, function () {\r\n                        //alert(\"Success\");\r\n                    }, reason=>{\r\n                        this.$toast(reason);//无微信时提示用户未安装微信\r\n                    });\r\n                } else {\r\n                    this.$toast(\"分享失败，请稍后重试\");\r\n                }\r\n            });\r\n        },\r\n        checkStoragePermissions(x) {\r\n            const platform = navigator.userAgent;\r\n            const isiOS = !!platform.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/);\r\n            let _this = this;\r\n            if (isiOS) {\r\n                this.hasStoragePermission = true;\r\n                this.shareAction(x);\r\n            } else {\r\n                var list = \"android.permission.WRITE_EXTERNAL_STORAGE\";\r\n                var permissions = cordova.plugins.permissions;\r\n                permissions.checkPermission(\r\n                    list,\r\n                    function(status) {\r\n                        if (status.hasPermission) {\r\n                            _this.hasStoragePermission = true;\r\n                            _this.shareAction(x);\r\n                        } else {\r\n                            _this.hasStoragePermission = false;\r\n                            _this.shareAction(x);\r\n                        }\r\n                    },\r\n                    function() {\r\n                        _this.hasStoragePermission = false;\r\n                        _this.shareAction(x);\r\n                    }\r\n                );\r\n            }\r\n        },\r\n        requestStoragePermissions(x) {\r\n            const platform = navigator.userAgent;\r\n            const isiOS = !!platform.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/);\r\n            let _this = this;\r\n            if (isiOS) {\r\n                this.hasStoragePermission = true;\r\n                this.shareAction(x);\r\n            } else {\r\n                var list = [\"android.permission.WRITE_EXTERNAL_STORAGE\"];\r\n                var permissions = cordova.plugins.permissions;\r\n                permissions.requestPermissions(\r\n                    list,\r\n                    function(status) {\r\n                        if (status.hasPermission) {\r\n                            _this.hasStoragePermission = true;\r\n                            _this.shareAction(x);\r\n                        } else {\r\n                            _this.hasStoragePermission = false;\r\n                        }\r\n                    },\r\n                    function() {\r\n                        _this.hasStoragePermission = false;\r\n                    }\r\n                );\r\n            }\r\n        },\r\n        callShop: function() {\r\n            const platform = navigator.userAgent;\r\n            const isiOS = !!platform.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/);\r\n            if (isiOS) {\r\n                window.location.href = \"tel:\" + this.lists.shopTel;\r\n            } else {\r\n                Dialog.confirm({\r\n                    message: this.lists.shopTel,\r\n                }).then(() => {\r\n                    window.location.href = \"tel:\" + this.lists.shopTel;\r\n                }).catch(() => {\r\n                    // on cancel\r\n                    Dialog.close;\r\n                });\r\n            }\r\n        },\r\n        addCollection() {//点击收藏切换收藏样式\r\n            const _this = this;\r\n            const savecollect = {\r\n                collectType: '01',\r\n                contentCode: _this.lists.spuCode,\r\n                userCode: _this.$userInfo.OWNER_CODE,\r\n            };\r\n            const delectcollect = { collectCodes: [_this.collectCode] };\r\n            if (_this.collectCode == '') {\r\n                addToCollection(savecollect).then(function (response) {\r\n                    _this.collectCode = response.data.collectCode;\r\n                    _this.$toast('添加收藏成功');\r\n                    _this.show.afterCollect = true;\r\n                    _this.show.beforeCollect = false;\r\n                }).catch(error => {\r\n                    _this.$toast(\"网络异常，请稍后重试\");\r\n                });\r\n            } else if (_this.collectCode != '') {\r\n                delectCollection(delectcollect).then(function (response) {\r\n                    _this.collectCode = '';\r\n                    _this.$toast('取消收藏成功');\r\n                    _this.show.afterCollect = false;\r\n                    _this.show.beforeCollect = true;\r\n                }).catch(error => {\r\n                    _this.$toast(\"网络异常，请稍后重试\");\r\n                });;\r\n            }\r\n        },\r\n\r\n        ifCollection() {\r\n            const _this = this;\r\n            const data = {\r\n                collectType: '01',\r\n                userCode: _this.$userInfo.OWNER_CODE,\r\n                contentCode: this.spuCode\r\n            }\r\n            ifCollection(data).then(function (response) {\r\n                const collectList = response.data.list;\r\n                if (collectList.length > 0) {\r\n                    _this.show.afterCollect = true;\r\n                    _this.show.beforeCollect = false;\r\n                    _this.collectCode = collectList[0].collectCode;\r\n                } else {\r\n                    _this.show.afterCollect = false;\r\n                    _this.show.beforeCollect = true;\r\n                    _this.collectCode = '';\r\n                }\r\n            });\r\n        },\r\n\r\n        onClickLeft: function() {\r\n            this.$router.go(-1); //返回上一层\r\n        },\r\n        // 点击已下架商品弹窗\r\n        goodsDown() {\r\n            Dialog.alert({\r\n                message: \"该商品的秒杀已结束<br>下次再来吧\",\r\n                confirmButtonText: \"我知道了\"\r\n            }).then(() => {\r\n\r\n            }).catch(() => {\r\n                // on cancel\r\n                Dialog.close;\r\n            });\r\n        },\r\n        // 补货中\r\n        saleOut() {\r\n\r\n            Dialog.alert({\r\n                message: \"补货中/已下架的商品<br>不可以结算哦\",\r\n                confirmButtonText: \"我知道了\"\r\n            }).then(() => {\r\n            })\r\n        },\r\n        //订阅\r\n        remindSale(time,spuId) {\r\n            const data={\r\n                startTime:time,\r\n                ownerCode:this.$userInfo.OWNER_CODE,\r\n                activitySpuId:this.activitySpuId,\r\n                subscribeFlag: this.flashSaleData.isSubsribe==0?'1':'0',\r\n            }\r\n            remindUser(data).then(response =>{\r\n\r\n                if(response.resultCode=='0'&& this.flashSaleData.isSubsribe==0){\r\n\r\n                    Dialog.alert({\r\n                        message: \"订阅成功<br>将在开抢前提醒您\",\r\n                        confirmButtonText: \"我知道了\"\r\n                    }).then(() => {\r\n                    })\r\n                    this.remind=\"取消订阅\"\r\n                    this.flashSaleData.isSubsribe=1;\r\n                }else if(response.resultCode=='0'&& this.flashSaleData.isSubsribe==1){\r\n                    this.$toast(\"取消订阅成功\");\r\n                    this.remind=\"开抢时提醒我\"\r\n                    this.flashSaleData.isSubsribe=0;\r\n                }else{\r\n                    this.$toast(\"订阅失败,请稍后重试!\");\r\n                }\r\n            });\r\n        },\r\n        // 活动开始前5分钟提醒业主\r\n        remindBefor(item,remind){\r\n            const _this=this;\r\n            const data={\r\n                startTime:item.startTime,\r\n                ownerCode:this.$userInfo.OWNER_CODE,\r\n                activitySpuId:item.activitySpuId,\r\n                subscribeFlag: remind,\r\n            }\r\n            remindUser(data).then(response =>{\r\n                if(response.resultCode=='0'&&item.isSubsribe==0){\r\n                    _this.$toast(\"订阅成功\");\r\n                    _this.onRefresh();\r\n                }else if(response.resultCode=='0'&&item.isSubsribe==1){\r\n                    _this.$toast(\"取消订阅成功\");\r\n                    _this.onRefresh();\r\n                }else{\r\n                    _this.$toast(\"订阅失败,请稍后重试!\");\r\n                    console.log(\"222222\");\r\n                }\r\n            }).catch(error => {\r\n                _this.$toast(\"网络异常，请稍后重试\");\r\n            });\r\n        },\r\n        // 增加商品数量超过限制\r\n        addNumBtn(){\r\n            // if(this.flashSaleData.limitAccount==1){\r\n            //     this.$toast(\"该商品限购1件哦\")\r\n            // }\r\n            // else if(this.flashSaleData.limitAccount!=1){\r\n            //     this.$toast(\"已经是极限了\")\r\n            // }\r\n        },\r\n\r\n        addToChart() {//添加购物车\r\n            if (this.skuList.storeNumber != 0||this.flashSaleData.skStoreBal!=0) {\r\n                const chartData = {\r\n                    ownerCode: this.$userInfo.OWNER_CODE,\r\n                    spuCode: this.lists.spuCode,\r\n                    skuNo: this.lists.skuList[0].skuNo,\r\n                    shopCode: this.lists.shopCode,\r\n                    skuCount: this.goodsNum,\r\n                    activitySpuId: this.activitySpuId,\r\n                    mark: 1\r\n                };\r\n                addToCart(chartData).then(response =>{\r\n                    if (response.resultCode == '0') {\r\n                        this.$toast('添加购物车成功');\r\n                        this.getCartNum();\r\n                    } else if (response.resultCode == '20100' && response.data.result == '0') {\r\n                        this.$toast('该商品添加购物车的数量已达上限');\r\n                    }\r\n                });\r\n            } else {\r\n                this.$toast(\"该商品正在努力补货中哦\");\r\n            }\r\n        },\r\n        getCartNum() {\r\n            const _this = this;\r\n            const data = {\r\n                ownerCode: _this.$userInfo.OWNER_CODE,\r\n            }\r\n            getCartNum(data).then(function (response) {\r\n                _this.skuNum = response.data.skuTypeNum;\r\n                storage.setStorage('skuTypeNum',_this.skuNum);\r\n            });\r\n        },\r\n        getCount(){\r\n            // if(this.goodsNum>=this.flashSaleData.limitAccount){\r\n            //     this.$toast(\"已经是极限了\")\r\n            // }\r\n        },\r\n        'turnToCart': function () {\r\n            this.$router.push({ path: '/shoppingCart' });\r\n        },\r\n        countDownFinish(){\r\n            this.flashSaleDetail();\r\n            this.init();\r\n        },\r\n        //键盘弹出事件\r\n        moveInputIntoView(e){\r\n\r\n\r\n            this.isShowPlaceHolder = true;\r\n\r\n            this.$nextTick(() => {\r\n                this.$refs.goodsPageScroll.scrollTop = this.$refs.changeTop.offsetTop - 100;\r\n            });\r\n\r\n        },\r\n        //键盘收回事件\r\n        resetInputIntoView(e){\r\n            this.isShowPlaceHolder = false;\r\n        },\r\n    },\r\n    mounted: function() {\r\n        // let goodsUrl = this.$route.query.goodsUrl;//获取列表传入的缩略图\r\n        // if (goodsUrl && goodsUrl != undefined) {\r\n        //     this.productImgs = [goodsUrl];\r\n        // }\r\n        // window.addEventListener(\"scroll\", this.handleScroll, true);\r\n        // this.spuCode = this.$route.query.spuCode\r\n        // this.init();\r\n        // this.flashSaleDetail();\r\n    },\r\n    computed: mapState({\r\n        setFlashSaleSpuCode: state => state.productPage.setFlashSaleSpuCode,\r\n    }),\r\n    watch: {\r\n\r\n        setFlashSaleSpuCode:{\r\n            handler(newval, oldval) {\r\n                console.log(\"setFlashSaleSpuCodenewval\")\r\n                console.log(newval,oldval)\r\n                if(newval!=-1){\r\n                    if(newval.indexOf(\",\")!=-1){\r\n                        var arr = newval.split(\",\");\r\n                        this.activitySpuId=arr[0];\r\n                        this.spuCode=arr[1];\r\n                        this.flashSaleDetail();\r\n                        this.init();\r\n                    }\r\n\r\n                    this.$store.commit(\"setFlashSaleSpuCodeChange\", {\r\n                        flashSaleSpuCode: -1\r\n                    });\r\n                }\r\n            },\r\n        },\r\n    },\r\n\r\n    activated(){\r\n        this.isShowPreview = false;\r\n        let goodsUrl = this.$route.params.goodsUrl;\r\n        if (goodsUrl && goodsUrl != undefined) {\r\n            this.productImgs = [goodsUrl];\r\n        }\r\n        window.addEventListener(\"scroll\", this.handleScroll);\r\n        //添加键盘监听,让第一响应者滚动到键盘上方显示\r\n        window.addEventListener(\"native.keyboardshow\", this.moveInputIntoView);\r\n        window.addEventListener(\"native.keyboardhide\", this.resetInputIntoView);\r\n        document.querySelector(\".goodsDetail\").addEventListener('touchmove', function (e) {\r\n            if (document.activeElement)\r\n                document.activeElement.blur();\r\n        }, { passive: false });\r\n        if(this.$route.query.spuCode){\r\n            // console.log(111111111);\r\n            this.$refs.goodsPageScroll.scrollTop = this.scroll = 0;\r\n            this.spuCode=this.$route.query.spuCode;\r\n            this.activitySpuId=this.$route.query.activitySpuId;\r\n            this.init();\r\n            this.ifCollection();\r\n            this.getCartNum();\r\n            this.flashSaleDetail();\r\n        }else{\r\n            this.init();\r\n            this.ifCollection();\r\n            this.getCartNum();\r\n            this.flashSaleDetail();\r\n        }\r\n    },\r\n    deactivated(){\r\n        this.lists={};\r\n        this.skuList={};\r\n        this.goodsNum=1;\r\n        this.productImgs=[];\r\n        this.shopInfo={};\r\n        this.titShow=1;\r\n        this.show.activeTitle = false;\r\n        this.show.normalTitle = true;\r\n        this.show.beforeCollect = true;\r\n        this.show.afterCollect = false;\r\n        this.isShowTopBtn = false;\r\n\r\n    },\r\n\r\n    //移除滚动条监听\r\n    beforeRouteLeave(to, from, next){\r\n        window.removeEventListener(\"scroll\", this.handleScroll, true);\r\n        next();\r\n    }\r\n};\r\n"],"sourceRoot":""}