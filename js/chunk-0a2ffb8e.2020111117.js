(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0a2ffb8e"],{4953:function(t,o,e){"use strict";var s=e("4ab8"),i=e.n(s);i.a},"4ab8":function(t,o,e){},"507b":function(t,o){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAICAYAAADJEc7MAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAADqADAAQAAAABAAAACAAAAAAysMxaAAAA60lEQVQYGY2QvYrCUBCFvQnp8wZ2sV6w04CVrU8ggiQBH0C0F7ewErHJn42ynZ3NwnaxtlDLPIggSfabIqIuiw6EmXtyvjmXq3zfPyqlhp7nfVfeKPxtbEuNmjFswzC0X3FRFDXES9BEc113UxTFMM/zXRzH9f9goA/xEDTmdmtVGoMgGMkCXddbjuOcS106C2tZliUkzQn6FO0GyoH7T2l9YBs4FY2kKkl7xi+SRqJJPYAikLwguWMYRpOEK5Ug/wAN5H9Zf0AgxUOt6PIQF74TUJcleQlJ1+4PMmMoTNN0GA/MqWVZvWdIfL8WKF1X4hn1KgAAAABJRU5ErkJggg=="},"5e0f":function(t,o,e){"use strict";var s=function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("div",{staticClass:"couponList"},t._l(t.lists,(function(o,i){return s("div",{key:"couponItem"+i,staticClass:"couponItem",class:o.isShowScope?"couponItemMinMargin":"couponItemMaxMargin"},[s("div",{staticClass:"couponBg"}),s("div",{staticClass:"couponContent",class:t.setCouponBg(o)},[s("div",{staticClass:"couponPriceBox"},[s("div",{staticClass:"couponPrice"},[s("div",{staticClass:"couponPriceIcon"},[t._v("￥")]),s("div",{staticClass:"couponPriceNum"},[t._v(t._s(o.couponTotal))])]),s("div",{directives:[{name:"show",rawName:"v-show",value:0!=o.limitTotal,expression:"couponItem.limitTotal!=0"}],staticClass:"couponPriceTxt"},[t._v("满"+t._s(o.limitTotal)+"元可用")]),s("div",{directives:[{name:"show",rawName:"v-show",value:0==o.limitTotal,expression:"couponItem.limitTotal==0"}],staticClass:"couponPriceTxt"},[t._v("无门槛")])]),s("div",{staticClass:"couponInfoBox"},[s("div",{staticClass:"couponInfo"},[s("div",{directives:[{name:"show",rawName:"v-show",value:"02"!=o.type,expression:"couponItem.type!='02'"}],staticClass:"couponName"},[t._v(t._s(o.name))]),s("div",{directives:[{name:"show",rawName:"v-show",value:"02"==o.type,expression:"couponItem.type=='02'"}],staticClass:"couponName"},[t._v(t._s(o.shopName)+"优惠券")]),"1"==o.effType||o.effBeginDay?s("div",{staticClass:"couponTime"},[t._v(t._s(o.effBeginDay)+"-"+t._s(o.effEndDay))]):t._e(),"2"!=o.effType||1!=o.effDays||o.effBeginDay?t._e():s("div",{staticClass:"couponTime"},[t._v("\n                            领取后当天有效\n                        ")]),"2"!=o.effType||1==o.effDays||o.effBeginDay?t._e():s("div",{staticClass:"couponTime"},[t._v("\n                            领取后"+t._s(o.effDays)+"天内有效\n                        ")]),s("div",{staticClass:"couponScope",on:{click:function(e){return t.showAndHideScope(o)}}},[s("div",{staticClass:"couponScopeTxt"},[t._v("适用范围")]),s("img",{directives:[{name:"show",rawName:"v-show",value:"02"!=o.type,expression:"couponItem.type!='02'"}],staticClass:"couponScopeIcon",class:o.isShowScope?"rotateImg":"",attrs:{src:e("ed05"),alt:""}}),s("img",{directives:[{name:"show",rawName:"v-show",value:"02"==o.type,expression:"couponItem.type=='02'"}],staticClass:"couponScopeIcon",class:o.isShowScope?"rotateImg":"",attrs:{src:e("507b"),alt:""}})])]),s("div",{staticClass:"couponBtnBox"},[1!=o.isPicked&&"01"!=o.status||!t.lists.isShowBtn?t._e():s("div",{staticClass:"couponBtn",on:{click:function(e){return t.goToShopPage(o)}}},[t._v("立即使用")]),0==o.isPicked&&0==o.isFinished?s("div",{staticClass:"couponBtn",on:{click:function(e){return t.receiveBtn(o)}}},[t._v("立即领取")]):t._e()])])]),s("div",{directives:[{name:"show",rawName:"v-show",value:o.isShowScope,expression:"couponItem.isShowScope"}],staticClass:"couponTypeBox"},[s("div",{staticClass:"couponTypeTxt"},[s("div",[t._v(t._s(o.shopScope))])])])])})),0)},i=[],n=e("5c36"),a=e("2241"),c=e("d399"),A={name:"couponItem",data:function(){return{}},props:{lists:{type:Array,default:function(){return[]}}},mounted:function(){console.log(this.lists),this.lists.map((function(t){t.isShowScope=!1}))},activated:function(){},deactivated:function(){},watch:{},computed:{setCouponBg:function(){return function(t){return"02"==t.type?t.status?"01"==t.status?"stayCouponBg":"02"==t.status?"beenUsedCouponBg":"pastdueCouponBg":1==t.isFinished&&1!=t.isPicked?"staleCouponBg":1==t.isPicked?"getCouponBg":"stayCouponBg":t.status?"01"==t.status?"terraceBg":"02"==t.status?"beenUsedTerraceBg":"pastdueTerraceBg":1==t.isFinished&&1!=t.isPicked?"staleTerraceBg":1==t.isPicked?"getTerraceBg":"terraceBg"}}},methods:{receiveBtn:function(t){var o=this;if(this.$userInfo.ROOM_CODE){var e={id:t.id,ownerCode:this.$userInfo.OWNER_CODE,areaCode:this.$userInfo.AREA_CODE,roomCode:this.$userInfo.ROOM_CODE};Object(n["N"])(e).then((function(o){0==o.resultCode?(Object(c["a"])("领取优惠券成功"),t.isPicked=1):Object(c["a"])(o.msg)})).catch((function(t){Object(c["a"])(t)}))}else a["a"].confirm({title:"您未绑定房间，是否前往绑定？",confirmButtonText:"前往"}).then((function(){o.$router.push("selectArea")})).catch((function(){}))},goToShopPage:function(t){if("01"==t.type){var o=[];this.$router.push({name:"goodsCollection",params:{couponName:0!=t.limitTotal?"满".concat(t.limitTotal,"减").concat(t.couponTotal):"无门槛立减".concat(t.couponTotal,"元"),shopCodeList:o}})}else if("02"==t.type)this.$router.push({name:"shopPage",params:{shopCode:t.shopCode}});else{var e="";t.couponShopList.map((function(t,o){e=0==o?t.shopCode:e+","+t.shopCode})),this.$router.push({name:"goodsCollection",params:{couponName:0!=t.limitTotal?"满".concat(t.limitTotal,"减").concat(t.couponTotal):"无门槛立减".concat(t.couponTotal,"元"),shopCodeList:e}})}},showAndHideScope:function(t){console.log(t),t.isShowScope=!t.isShowScope,this.$forceUpdate()}}},u=A,r=(e("9e60"),e("2877")),l=Object(r["a"])(u,s,i,!1,null,"c66b8140",null);o["a"]=l.exports},"7a81":function(t,o,e){"use strict";e.r(o);var s=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"allCouponList"},[e("navigation-bar",{ref:"navigation",attrs:{pageName:1==t.couponType?"平台红包":"店铺优惠券"},on:{onLeftClick:t.onLeftClick}}),e("div",{ref:"scrollY",staticClass:"scrollY"},[e("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isRefreshLoading,callback:function(o){t.isRefreshLoading=o},expression:"isRefreshLoading"}},[t.lists.length>0?e("van-list",{style:{minHeight:t.scrollYHeight+"px"},attrs:{finished:t.finished,offset:30,"immediate-check":t.immediateBol},on:{load:t.onLoad},model:{value:t.loading,callback:function(o){t.loading=o},expression:"loading"}},[e("div",{staticClass:"topSpace"}),e("coupon-item",{attrs:{lists:t.lists}})],1):t._e(),t.isNoNetwork?e("div",[e("NetworkError")],1):t._e()],1)],1)],1)},i=[],n=e("6c90"),a=e("0aa6"),c=e("5e0f"),A=e("dcbb"),u={name:"allCouponList",components:{NavigationBar:a["a"],couponItem:c["a"],NetworkError:A["a"]},data:function(){return{immediateBol:!1,finished:!1,loading:!1,isRefreshLoading:!1,couponType:null,statusType:null,page:1,lists:[],isNoNetwork:!1,scrollYHeight:0}},mounted:function(){},activated:function(){var t=this;this.$route.params.couponType&&(this.couponType=this.$route.params.couponType,this.statusType=this.$route.params.statusType,this.$nextTick((function(){console.log(),t.scrollYHeight=t.$refs.scrollY.clientHeight})),this.init())},deactivated:function(){},watch:{},computed:{},methods:{init:function(){this.page=1,this.lists=[],this.loading=!1,this.finished=!1,this.isNoNetwork=!1,1==this.couponType?this.queryByUserV33(1):this.queryByUser(1)},queryByUser:function(t){var o=this,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s={page:t,rows:10,ownerCode:this.$userInfo.OWNER_CODE,status:this.statusType};Object(n["k"])(s).then((function(t){0==t.resultCode&&(o.lists=e?t.data.couponScopeList:o.lists.concat(t.data.couponScopeList),o.isLoading=!1,o.loading=!1,o.isRefreshLoading=!1,o.finished=o.lists.length>=t.total)})).catch((function(t){o.couponList=[],o.isRefreshLoading=!1,o.isLoading=!0,o.isNoNetwork=!0}))},queryByUserV33:function(t){var o=this,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s={page:t,rows:10,ownerCode:this.$userInfo.OWNER_CODE,status:this.statusType};Object(n["m"])(s).then((function(t){0==t.resultCode&&(o.lists=e?t.data.platformList:o.lists.concat(t.data.platformList),o.isLoading=!1,o.loading=!1,o.isRefreshLoading=!1,o.finished=o.lists.length>=t.total)})).catch((function(t){o.couponList=[],o.isRefreshLoading=!1,o.isLoading=!0,o.isNoNetwork=!0}))},onRefresh:function(){this.init()},onLoad:function(){this.page++,console.log(this.page),1==this.couponType?this.queryByUserV33(this.page,!1):this.queryByUser(this.page,!1)},onLeftClick:function(){this.$router.go(-1)}},beforeRouteLeave:function(t,o,e){e()}},r=u,l=(e("4953"),e("2877")),p=Object(l["a"])(r,s,i,!1,null,"06c69054",null);o["default"]=p.exports},"9e60":function(t,o,e){"use strict";var s=e("ae66"),i=e.n(s);i.a},ae66:function(t,o,e){},ed05:function(t,o){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAICAYAAADJEc7MAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAADqADAAQAAAABAAAACAAAAAAysMxaAAAAnklEQVQYGY3QLwoCQRQH4PXPISxiESwWwSZWvYQeQDyAYDdYLUaTYPIwxjWJQRBBRPv6ubCwK7vowDfz5r3flAmiKDowDP5csgPCwDbiRf/XW5keT8ZxVjHhQbfosVmHO9NMRmPGjXZm4KLX4sr8exbfDRZcaCYBdYMzy6SXewqsOFGnxpF1bjjdFCqxIeTz41vK6UxhLVhhx55qXvANpAaZho+5RScAAAAASUVORK5CYII="}}]);
//# sourceMappingURL=chunk-0a2ffb8e.2020111117.js.map