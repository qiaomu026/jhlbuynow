(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-72122964"],{"05d0":function(t,e,a){},"0b2c":function(t,e){t.exports="data:image/png;base64,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"},"28da":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"afterSaleApply",class:{themeL:t.bindThemeL}},[a("navigation-bar",{attrs:{pageName:"售后申请"},on:{onLeftClick:t.goBack},scopedSlots:t._u([{key:"nav-right",fn:function(){return[a("div",{staticClass:"submit",on:{click:t.clickRight}},[t._v("提交")])]},proxy:!0}])}),t.afterSaleDetail?a("div",{staticClass:"content"},[a("div",{staticClass:"box"},[a("div",{staticClass:"top"},[a("div",{staticClass:"shop_info"},[a("div",{staticClass:"shop_name"},[t._v(t._s(t.afterSaleDetail.shopName))]),a("div",{staticClass:"status"},[t._v("已发货")])]),a("div",{staticClass:"order_info"},[a("div",{staticClass:"left"},[a("img",{attrs:{src:t.afterSaleDetail.spuPicUrl,alt:""}})]),a("div",{staticClass:"right"},[a("div",{staticClass:"good_name"},[t._v(t._s(t.afterSaleDetail.spuName))]),a("div",{staticClass:"good_unit"},[a("div",{staticClass:"unit"},[t._v(t._s(t.afterSaleDetail.attrValueContent))]),a("div",{staticClass:"num"},[t._v("×"+t._s(t.afterSaleDetail.skuCount))])])])])]),a("div",{staticClass:"middle"},[a("div",{staticClass:"left"},[t._v("退款金额")]),a("div",{staticClass:"right"},[a("span",[t._v("￥")]),a("span",[t._v(t._s(t.afterSaleDetail.returnRealTotal))])])]),a("div",{staticClass:"bottom"},[a("div",{staticClass:"reason"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.reason,expression:"reason"}],attrs:{name:"",id:"",placeholder:"请输入退货原因",maxlength:"100"},domProps:{value:t.reason},on:{input:function(e){e.target.composing||(t.reason=e.target.value)}}})]),a("div",{staticClass:"photo_box"},[t._m(0),a("div",{staticClass:"line"}),a("div",{staticClass:"image-box"},[a("add-image",{ref:"addImageComponent",attrs:{"is-upload":t.isUpload},on:{imageAddAction:t.showAddSheetControll,imageMapChange:t.upDateImageData,changeUploadStatus:t.changeStatus}})],1)])])])]):t._e(),a("van-action-sheet",{attrs:{actions:t.actions,"cancel-text":"取消",round:!1,"close-on-click-action":""},on:{select:t.addSelect},model:{value:t.showAddSheet,callback:function(e){t.showAddSheet=e},expression:"showAddSheet"}})],1)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"title"},[a("span",{staticClass:"add"},[t._v("添加照片")]),a("span",[t._v("（最多4张）")])])}],n=a("6c90"),o=a("4e4d"),l=a("0aa6"),c={name:"afterSaleApply",data:function(){return{reason:"",imgList:[],afterSaleDetail:null,showAddSheet:!1,actions:[{name:"拍照"},{name:"从手机相册选择"}],isUpload:!1,bindThemeL:0!=this.$curTheme}},created:function(){this.afterSaleDetail=this.$route.params.detail,this.bindThemeL=0!=this.$curTheme},components:{"add-image":o["a"],NavigationBar:l["a"]},methods:{goBack:function(){this.$store.state.preview.previewId&&this.$store.dispatch("setPreviewId",""),this.$router.go(-1)},submit:function(){var t=this,e={skuNo:this.afterSaleDetail.skuNo,billNo:this.afterSaleDetail.saleOrderBillNo,subBillNo:this.afterSaleDetail.saleOrderSubBillNo,shopCode:this.afterSaleDetail.shopCode,shopName:this.afterSaleDetail.shopName,ownerCode:this.$userInfo.OWNER_CODE,ownerName:this.$userInfo.OWNER_NAME,areaCode:this.$userInfo.AREA_CODE,spuCode:this.afterSaleDetail.spuCode,spuName:this.afterSaleDetail.spuName,attrValueContent:this.afterSaleDetail.attrValueContent,skuPrice:this.afterSaleDetail.skuPrice,returnReason:this.reason,returnCount:this.afterSaleDetail.skuCount,skuPicUrl:this.afterSaleDetail.picUrl,returnTotal:this.afterSaleDetail.returnRealTotal,returnPicUrlList:this.imgList,returnAddr:""};Object(n["c"])(e).then((function(e){"0"==e.resultCode?(t.$toast("申请已提交"),t.goBack()):t.$toast(e.msg)})).catch((function(t){this.$toast(t)}))},clickRight:function(){0!=this.reason.length?this.isUpload=!0:this.$toast("退货原因不能为空")},changeStatus:function(){this.isUpload=!1},upDateImageData:function(t){this.imgList=t,this.submit()},showAddSheetControll:function(){this.showAddSheet=!this.showAddSheet},addSelect:function(t,e){this.getPictureData(e)},getPictureData:function(t){t?this.$refs.addImageComponent.getPicture():this.$refs.addImageComponent.useCamera()}}},r=c,u=(a("d214"),a("2877")),d=Object(u["a"])(r,s,i,!1,null,"bf86c324",null);e["default"]=d.exports},"48d8":function(t,e,a){},"4e4d":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("ul",{staticClass:"image-list"},[t._l(t.selectPictures,(function(e,i){return s("li",{key:i,style:{width:t.imageWidthAndHeight+"px",height:t.imageWidthAndHeight+"px"}},[s("img",{staticClass:"delete-picture",attrs:{src:a("0b2c"),alt:""},on:{click:function(e){return t.deletePicture(i)}}}),s("img",{attrs:{src:e,alt:""},on:{click:function(e){return t.preview(i)}}})])})),t.accountAddImage&&t.isShowAdd?s("li",[s("div",{staticClass:"add-image",on:{click:t.addAction}},[s("van-icon",{attrs:{name:"plus",color:"rgb(181, 181, 181)"}})],1)]):t._e()],2),s("Preview",{ref:"myPreview",attrs:{images:t.images}})],1)},i=[],n=(a("ac6a"),a("28a5"),a("c5f6"),a("a49b"),a("e036")),o=a("5d2d"),l={name:"AddImage",props:{maxImageCount:{type:Number,default:4},selectPictures:{type:Array,default:function(){return[]}},isShowAdd:{type:Boolean,default:!0},isUpload:{type:Boolean,default:!1}},data:function(){return{images:[],uploadImageList:[],loading:""}},components:{Preview:n["a"]},mounted:function(){var t=document.querySelector(".image-list");this.imageWidthAndHeight=t.offsetWidth/4},computed:{accountAddImage:function(){return this.selectPictures.length<this.maxImageCount},maximumImagesCount:function(){return this.maxImageCount-this.selectPictures.length}},watch:{selectPictures:function(t,e){},isUpload:function(t,e){t&&(console.log(t),this.uploadFile(),this.$emit("changeUploadStatus"))}},methods:{preview:function(t){this.images=this.selectPictures,this.$refs.myPreview.setIndex(t),this.$refs.myPreview.setIsShowPreview(!0),this.$store.dispatch("setPreviewId",this.$refs.myPreview)},addAction:function(){this.$emit("imageAddAction")},deletePicture:function(t){this.selectPictures.splice(t,1),console.log(this.selectPictures)},addSelect:function(t,e){e?this.getPicture():this.useCamera()},useCamera:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.$plugin.usePlugin("camera")((function(a){e&&"android"==t.$devicePlatform?t.$plugin.usePlugin("crop")(a,(function(e){console.log("yuanl=> 裁剪url = "+e),e=e.split("?"),t.selectPictures.push(e[0])}),(function(a){console.log("Crop error. "+JSON.stringify(a)),"true"==a.recapture?(console.log("调用相机重拍. "),t.useCamera(e)):"User cancelled"==a.message?console.log("用户取消裁剪操作. "):t.$toast("裁剪图片出现异常，请重试！")})):t.selectPictures.push(a)}),(function(t){}),e,!1)},uploadFile:function(){var t=this;this.uploadImageList=[];var e="".concat(o["b"].get("custUrl.homeUrl"),"xwj-sys-media/media/upload/uploadFile"),a={params:{file:"",source:"yzApp",business:"dicoveryPic"},headers:{contentType:"multipart/form-data"}},s=this.selectPictures.length,i=0;console.log("开始调用图片上传"),0==this.selectPictures.length&&this.$emit("imageMapChange",[]),console.log(this.selectPictures),this.loading=o["b"].get("showLoadingView"),this.loading&&this.loading(!0),this.selectPictures.forEach((function(n){a.params.file=n,t.$plugin.usePlugin("fileTransfer")(e,n,a,(function(e){var a=JSON.parse(e.response);0==a.resultCode&&t.uploadImageList.push(a.data),i++,console.log(s),console.log(i),t.dealResult(s==i)}),(function(e){i++,console.log(s),console.log(i),t.dealResult(s==i)}))}))},dealResult:function(t){this.loading&&this.loading(!1),console.log(this.uploadImageList),t&&this.$emit("imageMapChange",this.uploadImageList)},getPicture:function(){var t=this;this.$plugin.usePlugin("getPictures")(this.maximumImagesCount,(function(e){e.forEach((function(e){t.selectPictures.push(e)}))}),(function(t){}),!0,!1)}}},c=l,r=(a("fc26"),a("2877")),u=Object(r["a"])(c,s,i,!1,null,"3716b700",null);e["a"]=u.exports},d214:function(t,e,a){"use strict";var s=a("05d0"),i=a.n(s);i.a},fc26:function(t,e,a){"use strict";var s=a("48d8"),i=a.n(s);i.a}}]);
//# sourceMappingURL=chunk-72122964.01138b35.js.map