(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3c38a951"],{2511:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{background:"#F9F9F9",height:"100%",display:"flex","flex-direction":"column"}},[i("navigation-bar",{attrs:{pageName:"选择小区"},on:{onLeftClick:t.onClickLeft}}),i("van-search",{attrs:{placeholder:"请输入小区名称",disabled:"",shape:"round"},on:{click:t.showSerchView}}),i("van-cell",{staticClass:"themeLPos",attrs:{title:"当前定位："+t.cityName,value:"切换城市",icon:"location-o","is-link":""},on:{click:t.selectCity}}),t.showSearch?i("div",{staticClass:"searchView",style:t.padingtopNum},[i("div",{staticClass:"searchInput"},[i("div",{staticClass:"left"},[i("form",{staticClass:"inputBg",attrs:{action:"javascript:return true"},on:{submit:function(e){return e.preventDefault(),t.formSubmit(e)}}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],ref:"searchField",staticClass:"search-input",attrs:{type:"search",placeholder:"请输入小区名称"},domProps:{value:t.searchText},on:{keydown:function(e){return e.type.indexOf("key")||13===e.keyCode?t.onSearch(e):null},input:function(e){e.target.composing||(t.searchText=e.target.value)}}})])]),i("div",{staticClass:"searchActionBtn",class:{searchBtn:!t.searchNull},on:{click:t.searchBtnAction}},[t._v(t._s(t.searchNull?"取消":"搜索"))])]),t._l(t.searchResults,(function(e,a){return i("van-cell",{key:a,attrs:{title:e.AREA_NAME},on:{click:function(i){return t.cellClicked(e)}}})}))],2):t._e(),i("div",{staticClass:"search-box",staticStyle:{flex:"1",overflow:"hidden"}},[i("van-index-bar",{directives:[{name:"show",rawName:"v-show",value:!t.showSearch,expression:"!showSearch"}],staticStyle:{height:"100%",overflow:"auto"},attrs:{sticky:!1,"index-list":t.indexList,"highlight-color":"#17B7BD"}},t._l(t.list,(function(e,a){return i("div",{key:a},[i("van-index-anchor",{attrs:{index:e.letter}}),t._l(e.item,(function(e){return i("van-cell",{key:e.AREA_NAME,staticClass:"themeLArea",attrs:{title:e.AREA_NAME},on:{click:function(i){return t.cellClicked(e)}}})}))],2)})),0)],1)],1)},n=[],c=i("68c2"),s={name:"selectAreaThemeL",mixins:[c["a"]]},o=s,r=(i("432f"),i("2877")),l=Object(r["a"])(o,a,n,!1,null,"65ae22e0",null);e["default"]=l.exports},"432f":function(t,e,i){"use strict";var a=i("d67a"),n=i.n(a);n.a},"68c2":function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var a=i("75fc"),n=(i("456d"),i("4917"),i("ac4d"),i("8a81"),i("ac6a"),i("bc3a"),i("226f")),c=i("0aa6"),s=i("471e"),o={components:{NavigationBar:c["a"]},data:function(){return{searchText:"",cityCode:"2018012400001",cityName:"正在定位...",list:[],indexList:[],showSearch:!1,searchResults:[],searchNull:!0,padingtopNum:{"margin-top":this.$stbHeight+44+"px"},showLeftArrow:!0}},watch:{searchText:function(){""!==this.searchText?this.searchNull=!1:this.searchNull=!0}},methods:{searchBtnAction:function(){this.searchNull?this.onCancel():this.onSearch()},onClickLeft:function(){this.$router.back(-1)},selectCity:function(){this.$router.push("/selectCity")},showSerchView:function(){var t=this;this.showSearch=!0,setTimeout((function(){t.$refs.searchField.focus()}),200)},cellClicked:function(t){this.$router.push({path:"/selectHouse",query:{areaCode:t.AREA_CODE,areaName:t.AREA_NAME,cityCode:this.cityCode,cityName:"正在定位..."==this.cityName?"":this.cityName}})},onSearch:function(){this.searchResults=[];var t=!0,e=!1,i=void 0;try{for(var a,n=this.allAreaList[Symbol.iterator]();!(t=(a=n.next()).done);t=!0){var c=a.value;c.AREA_NAME.match(this.searchText)&&this.searchResults.push(c)}}catch(s){e=!0,i=s}finally{try{t||null==n.return||n.return()}finally{if(e)throw i}}0==this.searchResults.length&&this.$toast("没有搜索到此小区")},onCancel:function(){this.showSearch=!1},initAreaList:function(){var t=this,e={CITY_CODE:this.cityCode};Object(n["m"])(e).then((function(e){t.list=e.areaList,t.indexList=e.areaTitleList})).catch((function(t){}))},getCurrentLocation:function(){var t=this;Object(s["a"])().then((function(e){e.plugin("AMap.Geolocation",(function(){var i=new e.Geolocation({enableHighAccuracy:!0,timeout:1e4});function a(e){t.cityName=e.addressComponent.city}function n(t){console.log("定位失败错误：",t)}i.getCurrentPosition(),e.event.addListener(i,"complete",a),e.event.addListener(i,"error",n)}))})).catch((function(t){console.log("地图加载失败！"+t)}))}},mounted:function(){var t=this;this.showLeftArrow="/"!=this.$fromPage,setTimeout((function(){document.querySelector(".search-box").append(document.querySelector(".van-index-bar__sidebar"))}),100),this.$userInfo.CITY_CODE&&(this.cityCode=this.$userInfo.CITY_CODE);var e=this.$route.query;0!=Object.keys(e).length?e.city.CITY_CODE&&e.city.CITY_NAME?(this.cityCode=e.city.CITY_CODE,this.cityName=e.city.CITY_NAME):(this.cityCode=e.city,this.cityName=""==e.cityName?"正在定位...":e.cityName,""==e.cityName&&this.getCurrentLocation()):(this.getCurrentLocation(),console.log("开始计时"),setTimeout((function(){console.log("====qiao===="),"正在定位..."==t.cityName&&(console.log("++++qiao++++"),t.cityName="请检查设置")}),5e3)),this.initAreaList()},computed:{allAreaList:function(){var t=[],e=!0,i=!1,n=void 0;try{for(var c,s=this.list[Symbol.iterator]();!(e=(c=s.next()).done);e=!0){var o=c.value;t.push.apply(t,Object(a["a"])(o.item)),console.log(o)}}catch(r){i=!0,n=r}finally{try{e||null==s.return||s.return()}finally{if(i)throw n}}return t}}}},d67a:function(t,e,i){}}]);
//# sourceMappingURL=chunk-3c38a951.4c20c655.js.map