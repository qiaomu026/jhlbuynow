(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-18a2704f"],{"20f0":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"couponCenter",class:{themeL:t.bindThemeL},attrs:{"can-swipe-back":"false"}},[s("div",{staticClass:"shopBar header-view",class:t.isNavBar?"whiteNavBar":"",style:t.blackHeaderStyle},[s("div",{staticClass:"leftBar",attrs:{slot:"left"},slot:"left"},[s("div",{staticClass:"backIcon",on:{click:function(e){return t.goBack()}}},[s("img",{attrs:{src:t.isNavBar?t.icon.backBlack:t.icon.backWhite,alt:""}})]),s("div",{staticClass:"searhInputBox",class:t.isNavBar?"searhInputBoxAct":""},[t._v("领券中心")])])]),s("div",{ref:"contentScroll",staticClass:"couponCenterContent",on:{scroll:function(e){return t.onScroll()}}},[s("div",{ref:"imgHeight"},[s("img",{staticStyle:{width:"100%"},attrs:{src:i("89ab"),alt:""}})]),0!=t.getPickupList.length?s("div",{staticClass:"couponList"},t._l(t.getPickupList,(function(e,n){return s("div",{key:"getPickupItem"+n,staticClass:"couponItem"},[s("div",{staticClass:"couponInfo",class:1==e.isFinished&&1!=e.isPicked?"grayCouponInfo":1==e.isPicked?"carCouponInfo":""},[s("div",{staticClass:"couponBox"},[s("div",{staticClass:"couponFirst"},[s("div",{staticClass:"couponPriceBox"},[s("div",{staticClass:"couponPriceNum"},[s("span",[t._v("￥")]),s("span",[t._v(t._s(e.couponTotal))])]),s("div",{staticClass:"rangeBox",on:{click:function(i){return t.changeSeeRange(e)}}},[s("div",[t._v("适用范围")]),e.seeRange?t._e():s("img",{attrs:{src:i("cb1c"),alt:""}}),e.seeRange?s("img",{attrs:{src:i("2736"),alt:""}}):t._e()])]),s("div",{staticClass:"couponRight"},[s("div",{staticClass:"couponPriceTxt"},[s("div",[t._v(t._s(e.shopName))]),s("div",[t._v(t._s(e.name))])]),s("div",{staticClass:"couponBottom"},["1"==e.effType||e.effBeginDay?s("div",{staticClass:"timeTxt"},[t._v("\n                                        "+t._s(e.effBeginDay)+"-"+t._s(e.effEndDay)+"\n                                    ")]):t._e(),"2"!=e.effType||1!=e.effDays||e.effBeginDay?t._e():s("div",{staticClass:"timeTxt"},[t._v("\n                                        领取后当天有效\n                                    ")]),"2"!=e.effType||1==e.effDays||e.effBeginDay?t._e():s("div",{staticClass:"timeTxt"},[t._v("\n                                        领取后"+t._s(e.effDays)+"天内有效\n                                    ")]),0==e.isPicked&&0==e.isFinished?s("div",{staticClass:"couponBtn"},[s("div",{staticClass:"receiveBtn",on:{click:function(i){return t.receiveBtn(e)}}},[t._v("立即领取")])]):t._e(),1==e.isPicked?s("div",{staticClass:"couponBtn"},[s("div",{staticClass:"receiveBtn",on:{click:function(i){return t.goshop(e.shopCode)}}},[t._v("立即使用")])]):t._e()])])])])]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.seeRange,expression:"getPickupItem.seeRange"}],staticClass:"couponContent"},[t._v("\n                    全品类通用\n                ")])])})),0):t._e(),0==t.getPickupList.length?s("div",{staticClass:"noCouponList"},[s("img",{attrs:{src:i("8c6a"),alt:""}}),s("div",[t._v("暂无优惠券")])]):t._e()])])},n=[],c=i("2f62"),o=i("2241"),a=i("d399"),r=i("5c36"),u={name:"couponCenter",components:{},data:function(){return{isNavBar:!1,getPickupList:[],isTopBool:!1,icon:{backWhite:i("0de9"),backBlack:i("8bb7")},bindThemeL:0!=this.$curTheme}},mounted:function(){window.addEventListener("scroll",this.handleScroll),this.queryPickupList(),this.isTopBool=!0},activated:function(){},computed:Object(c["c"])({blackHeaderStyle:function(){var t=this.$stbHeight+44+"px !important",e=this.$stbHeight+"px";return{height:t,"padding-top":e}}}),methods:{onScroll:function(){var t=this.$refs.contentScroll.scrollTop,e=this.$refs.imgHeight.clientHeight;console.log(t),t>e-this.$stbHeight-44?this.isNavBar=!0:this.isNavBar=!1},queryPickupList:function(){var t=this,e={ownerCode:this.$userInfo.OWNER_CODE,areaCode:this.$userInfo.AREA_CODE};Object(r["G"])(e).then((function(e){0==e.resultCode&&(t.getPickupList=e.data.date)})).catch((function(t){}))},receiveBtn:function(t){var e=this,i=this;if(this.$userInfo.ROOM_CODE){var s={id:t.id,ownerCode:this.$userInfo.OWNER_CODE,areaCode:this.$userInfo.AREA_CODE,roomCode:this.$userInfo.ROOM_CODE};Object(r["J"])(s).then((function(e){0==e.resultCode?(Object(a["a"])("领取优惠券成功"),i.queryPickupListByItem(t)):Object(a["a"])(e.msg)})).catch((function(t){Object(a["a"])(t)}))}else o["a"].confirm({title:"您未绑定房间，是否前往绑定？",confirmButtonText:"前往"}).then((function(){e.$router.push("selectArea")})).catch((function(){}))},queryPickupListByItem:function(t){var e=this,i={ownerCode:this.$userInfo.OWNER_CODE,areaCode:this.$userInfo.AREA_CODE};Object(r["G"])(i).then((function(i){if(0==i.resultCode){console.log(t),console.log("1111111111"),console.log(e.getPickupList);for(var s=0;s<e.getPickupList.length;s++)if(e.getPickupList[s].id==t.id)for(var n=0;n<i.data.date.length;n++){var c=i.data.date[n];c.id==t.id&&(e.getPickupList[s].effBeginDay=c.effBeginDay,e.getPickupList[s].effEndDay=c.effEndDay,e.getPickupList[s].isPicked=c.isPicked,e.getPickupList[s].effType=c.effType,e.getPickupList[s].effDays=c.effDays)}e.$forceUpdate()}})).catch((function(t){}))},goshop:function(t){this.$router.push({name:"shopPage",params:{shopCode:t}})},handleScroll:function(){var t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;this.$refs.sideBar.offsetTop;this.isTopBool=!(t>=130)},changeSeeRange:function(t){t.seeRange=!t.seeRange,this.$forceUpdate()},goBack:function(){this.$router.back()}}},l=u,f=(i("a4df"),i("2877")),d=Object(f["a"])(l,s,n,!1,null,"2a313e2e",null);e["default"]=d.exports},2736:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAMCAYAAABm+U3GAAAAAXNSR0IArs4c6QAAAQ5JREFUOBGdkdtOwkAURVvBAOUS/QN+iw8zMeGBxERRDMgTUIw0ioGY+Dc+8jCuTeYkttJS2Mnqmc7ZZ/cyQVBCzrk2rGAD1yVGjlsIasEnmL5ZXB2fLHAQ0IS1T3yg3vj1F7VTMJrfYlCh7z7okVqBEG793pbazk840GEgggSkJ6iYjbXC+yDpF7WsV1gxNuANpBFUswPsKXwA0gc0s57UPQaFvoL0DP9CbYDeBdyBlEBkvVSlUYcYpDHkhtogHoXfg6SvbFhvX9mowQKkCVymDAU3eHWoOlxpCfW/obP9tnMv1NKh9jxmqqBfJ82hFnDRG0pTODk0E25ZE51uTPMHemEY7sx4TvUvNmS2+wvUoFm5yP6K7gAAAABJRU5ErkJggg=="},"89ab":function(t,e,i){t.exports=i.p+"img/bg_coupon_center.0c25cee0.png"},"8c6a":function(t,e,i){t.exports=i.p+"img/no_coupon_img.a94be2ee.png"},a3f4:function(t,e,i){},a4df:function(t,e,i){"use strict";var s=i("a3f4"),n=i.n(s);n.a},cb1c:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAMCAYAAABm+U3GAAAAAXNSR0IArs4c6QAAAQVJREFUOBGlkd1KAlEURuc0U47zQ/l4PZggdBEEalka3lgpJZUgwjyE7+HFaX1juwtRmcYPFvuc2Wev+XPe+yIIgjVcO+c21NrBdcFwD/KAzQgU1aiuldlzGIMykrgBL9qRR/i3nBlJn0GZQKN8QBYxTEG5h7Dqk3NWUnvrV9ZbqQm40IR3ULpwZr1DlTMRDEF5g3jvWRoJzEG5g4NyepI+gTKD/VK7EwdS+ALlFpz1rHJN0gEoesum9Y5WDmawAOUG/uSsQ3gAZQ7JUdluk4EclqB0wIGk+rnKJ6S7c5X2DF7CCpQ29MuV99/UelK7M4IrKH6FKvpEmfVPqohaoM/yAXkV2Q+jmVmqKd7MGwAAAABJRU5ErkJggg=="}}]);
//# sourceMappingURL=chunk-18a2704f.32ef24c1.js.map