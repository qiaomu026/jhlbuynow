(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4901bef0"],{2557:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"find-box",attrs:{id:"notify-detail"}},[n("navigation-bar",{attrs:{pageName:"消息详情"},on:{onLeftClick:e.goBack}}),e.detail?n("div",{staticClass:"refreshWrapper",on:{click:function(t){e.replyInputShow=!1}}},["0"==e.themeCurrent?n("section",{staticClass:"friend-message"},[n("div",{staticClass:"friend-msg"},[n("div",[e.detail.headPic?n("img",{staticClass:"head",attrs:{src:e.detail.headPic,alt:""}}):n("img",{staticClass:"head",attrs:{src:i("51f7"),alt:""}}),n("p",[e._v(e._s(e.detail.nickName))])])]),n("div",{staticClass:"message-container"},[n("p",[e._v(e._s(e.detail.content))]),e.detail.notePic?n("van-row",{staticClass:"message-img",class:{"big-image":1==e.detail.notePic.length}},e._l(e.detail.notePic,(function(t,i){return n("van-col",{key:i,attrs:{span:"6"}},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t,expression:"imgurl"}],key:t,attrs:{alt:""},on:{click:function(t){return e.preview(e.detail.notePic,i)}}})])})),1):e._e()],1),n("div",{staticClass:"handler-container"},[n("van-row",{attrs:{span:"8",type:"flex",justify:"space-between"}},[n("van-col",{staticClass:"desc"},[n("span",[e._v(e._s(e.detail.createdTime))])]),n("van-col",{staticClass:"handle-type",attrs:{span:"8"},on:{click:function(e){e.stopPropagation()}}},[n("span",{staticStyle:{"padding-left":"15px"},on:{click:function(t){return e.setLike(e.detail.noteCode,e.detail.likerList)}}},[e.checkLike(e.detail.likerList)?n("img",{attrs:{src:i("2a2a"),alt:""}}):n("img",{attrs:{src:i("43c7"),alt:""}}),e.detail.likerList?n("span",[e._v(e._s(e.detail.likerList.length))]):e._e()]),n("span",{on:{click:function(t){return e.udClick(null,e.detail.noteCode)}}},[n("img",{attrs:{src:i("5737"),alt:""}}),e._v("\n                "+e._s(e.detail.commentList?e.detail.commentList.length:0)+"\n              ")])])],1)],1),e.detail.likerList.length>0||e.detail.commentList.length>0?n("div",{staticClass:"reply-container"},[e.detail.likerList.length>0?n("div",{staticClass:"goods-group"},[n("img",{attrs:{src:i("35b3"),alt:""}}),e._l(e.detail.likerList,(function(t,i){return n("span",{key:i},[e._v("\n              "+e._s(t.nickName)+"\n              "),i!=e.detail.likerList.length-1?n("i",[e._v(",")]):e._e()])}))],2):e._e(),e.detail.commentList.length>0?n("div",{staticClass:"reply-group-box"},e._l(e.detail.commentList,(function(t,a){return n("div",{key:a,staticClass:"reply-group",attrs:{type:"flex"}},[n("div",{staticClass:"reply-item",on:{click:function(e){e.stopPropagation()}}},[n("div",{staticClass:"reply-desc",on:{click:function(i){return e.udClick(t,e.detail.noteCode,0,!1)}}},[n("span",{staticClass:"reply-name"},[e._v(e._s(t.nickName))]),1==t.isProperty?n("img",{attrs:{src:i("8841")}}):e._e(),t.returner?n("span",{staticClass:"result"},[e._v("回复")]):e._e(),t.returner?n("span",{staticClass:"reply-name"},[e._v(e._s(t.returner))]):e._e(),1==t.returnerType?n("img",{attrs:{src:i("8841")}}):e._e(),e._v(":\n                  "),n("span",[e._v(e._s(t.content))])]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.evalPic&&t.evalPic.length>0,expression:"eva.evalPic && eva.evalPic.length > 0"}],staticClass:"eval-pic-box"},e._l(t.evalPic,(function(i,a){return n("div",{key:a},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:i,expression:"ind"}],key:i,staticClass:"small-reply-img",attrs:{alt:""},on:{click:function(i){return e.preview(t.evalPic,a)}}})])})),0)])])})),0):e._e(),n("van-row")],1):e._e()]):e._e(),"1"==e.themeCurrent?n("section",{staticClass:"friend-message-l"},[n("div",{staticClass:"friend-msg-l"},[n("div",[e.detail.headPic?n("img",{staticClass:"head-l",attrs:{src:e.detail.headPic,alt:""}}):n("img",{staticClass:"head-l",attrs:{src:i("51f7"),alt:""}}),n("p",[e._v(e._s(e.detail.nickName))])])]),n("div",{staticClass:"message-container-l"},[n("p",[e._v(e._s(e.detail.content))]),e.detail.notePic?n("van-row",{staticClass:"message-img-l",class:{"big-image":1==e.detail.notePic.length}},e._l(e.detail.notePic,(function(t,i){return n("van-col",{key:i,attrs:{span:"6"}},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t,expression:"imgurl"}],key:t,attrs:{alt:""},on:{click:function(t){return e.preview(e.detail.notePic,i)}}})])})),1):e._e()],1),n("div",{staticClass:"handler-container-l"},[n("van-row",{attrs:{span:"8",type:"flex",justify:"space-between"}},[n("van-col",{staticClass:"desc-l"},[n("span",[e._v(e._s(e.detail.createdTime))])]),n("van-col",{staticClass:"handle-type-l",attrs:{span:"8"},on:{click:function(e){e.stopPropagation()}}},[n("span",{staticStyle:{"padding-left":"15px"},on:{click:function(t){return e.setLike(e.detail.noteCode,e.detail.likerList)}}},[e.checkLike(e.detail.likerList)?n("img",{attrs:{src:i("2a2a"),alt:""}}):n("img",{attrs:{src:i("43c7"),alt:""}}),e.detail.likerList?n("span",[e._v(e._s(e.detail.likerList.length))]):e._e()]),n("span",{on:{click:function(t){return e.udClick(null,e.detail.noteCode)}}},[n("img",{attrs:{src:i("5737"),alt:""}}),e._v("\n                "+e._s(e.detail.commentList?e.detail.commentList.length:0)+"\n              ")])])],1)],1),e.detail.likerList.length>0||e.detail.commentList.length>0?n("div",{staticClass:"reply-container-l"},[e.detail.likerList.length>0?n("div",{staticClass:"goods-group-l"},[n("img",{attrs:{src:i("35b3"),alt:""}}),e._l(e.detail.likerList,(function(t,i){return n("span",{key:i},[e._v("\n              "+e._s(t.nickName)+"\n              "),i!=e.detail.likerList.length-1?n("i",[e._v(",")]):e._e()])}))],2):e._e(),e.detail.commentList.length>0?n("div",{staticClass:"reply-group-box-l"},e._l(e.detail.commentList,(function(t,a){return n("div",{key:a,staticClass:"reply-group-l",attrs:{type:"flex"}},[n("div",{staticClass:"reply-item-l",on:{click:function(e){e.stopPropagation()}}},[n("div",{staticClass:"reply-desc-l",on:{click:function(i){return e.udClick(t,e.detail.noteCode,0,!1)}}},[n("span",{staticClass:"reply-name-l"},[e._v(e._s(t.nickName))]),1==t.isProperty?n("img",{attrs:{src:i("8841")}}):e._e(),t.returner?n("span",{staticClass:"result-l"},[e._v("回复")]):e._e(),t.returner?n("span",{staticClass:"reply-name-l"},[e._v(e._s(t.returner))]):e._e(),1==t.returnerType?n("img",{attrs:{src:i("8841")}}):e._e(),e._v(":\n                  "),n("span",[e._v(e._s(t.content))])]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.evalPic&&t.evalPic.length>0,expression:"eva.evalPic && eva.evalPic.length > 0"}],staticClass:"eval-pic-box-l"},e._l(t.evalPic,(function(i,a){return n("div",{key:a},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:i,expression:"ind"}],key:i,staticClass:"small-reply-img-l",attrs:{alt:""},on:{click:function(i){return e.preview(t.evalPic,a)}}})])})),0)])])})),0):e._e(),n("van-row")],1):e._e()]):e._e()]):e._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:e.replyInputShow,expression:"replyInputShow"}],ref:"myReply",staticClass:"reply-wrapper"},[n("div",{staticClass:"box"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.replyValue,expression:"replyValue"}],ref:"myInput",attrs:{type:"text",placeholder:"reply"==e.commitType&&e.replys?"回复 "+e.replys.nickName+":":"写下你此刻的想法",autofocus:"",maxlength:"200"},domProps:{value:e.replyValue},on:{input:function(t){t.target.composing||(e.replyValue=t.target.value)}}}),n("van-button",{attrs:{slot:"button",size:"small",type:"primary",color:"#17B7BD"},on:{click:e.submitInput},slot:"button"},[e._v("发送")])],1)]),n("van-action-sheet",{style:{color:"#17B7BD"},attrs:{actions:e.deleteActions,"cancel-text":"取消",round:"","close-on-click-action":"","safe-area-inset-bottom":""},on:{select:e.delCommentAction},model:{value:e.deleteShow,callback:function(t){e.deleteShow=t},expression:"deleteShow"}}),n("Preview",{ref:"myPreview",attrs:{images:e.images},on:{indexChange:e.indexChange}})],1)},a=[],s=(i("8e6e"),i("ac6a"),i("456d"),i("bd86")),o=i("2f62"),r=i("2241"),l=(i("5d2d"),i("e036")),c=(i("387e"),i("0aa6"));function d(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function u(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?d(i,!0).forEach((function(t){Object(s["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):d(i).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var p={name:"FindNotifyDetail",created:function(){},mounted:function(){this.themeCurrent=this.$curTheme,this.noteCode=this.$route.params.noteCode,window.addEventListener("native.keyboardshow",this.keyboardshow),window.addEventListener("native.keyboardhide",this.keyboardhide),this.watcherScroll(),this.getDetail()},destroyed:function(){window.removeEventListener("native.keyboardshow",this.keyboardshow),window.removeEventListener("native.keyboardhide",this.keyboardhide)},props:{},watch:{replyInputShow:function(e,t){1==e?this.$nextTick((function(){this.$refs.myInput.focus()})):this.$nextTick((function(){this.$refs.myInput.blur()}))}},data:function(){return{deleteActions:[{name:"删除"}],deleteShow:!1,noteTotal:0,background:{backgroundImage:"url("+i("62ea")+") ",backgroundPosition:"center center",backgroundRepeat:"no-repeat",backgroundSize:"cover"},commitType:"",replys:null,ownerInfo:"",detail:null,replyInputShow:!1,replyValue:"",noteCode:"",comitNoteCode:"",images:[],themeCurrent:0}},components:{Preview:l["a"],NavigationBar:c["a"]},methods:u({},Object(o["b"])(["getNotesAction","saveLikeAction","getOneNoteMsgAction","delNoteDataAction","delCommentInforAction","addCommentAction","saveReplyAction","getMineMessageCountAction","getNoteDetailAction"]),{keyboardshow:function(e){this.$refs.myReply.style.bottom=e.keyboardHeight+"px",this.replyInputShow=!0},keyboardhide:function(e){this.replyInputShow=!1,this.$refs.myReply.style.bottom="0"},watcherScroll:function(){var e=this;document.querySelector(".find-box").addEventListener("touchmove",(function(t){e.replyInputShow=!1}),{passive:!1})},getDetail:function(){var e=this;this.getNoteDetailAction({noteCode:this.noteCode}).then((function(t){"0"==t.resultCode?e.detail=t.data:e.$toast(res.msg)}),(function(t){e.$toast(t)}))},udClick:function(e,t,i){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.comitNoteCode=t,n?(this.commitType="comment",this.replyInputShow=!0):(this.commitType="reply",console.log(e),this.$userInfo.OWNER_CODE===e.userCode?(this.deleteShow=!0,this.replyNoteIndex=i,this.delActionObj={noteCode:t,evalCode:e.evalCode}):(this.replyInputShow=!0,this.replys={nickName:e.nickName,evalCode:e.evalCode}))},submitInput:function(){0!=this.replyValue.length&&("reply"==this.commitType?this.replyAction():this.addComments(),this.replyInputShow=!1)},addComments:function(){var e=this;this.addCommentAction({content:this.replyValue,isProperty:0,noteCode:this.comitNoteCode,userCode:this.$userInfo.OWNER_CODE}).then((function(){e.$toast("评论成功"),e.replyValue="",e.getDetail()})).catch((function(t){e.$toast(t)}))},replyAction:function(e,t){var i=this,n={content:this.replyValue,evalCode:this.replys.evalCode,isProperty:0,userCode:this.$userInfo.OWNER_CODE};this.saveReplyAction(n).then((function(){i.replyValue="",i.getDetail()})).catch((function(e){i.$toast(e)}))},preview:function(e,t){this.images=e,this.indexChange(t),this.$refs.myPreview.setIndex(t),this.$refs.myPreview.setIsShowPreview(!0),this.$store.dispatch("setPreviewId",this.$refs.myPreview)},indexChange:function(e){var t=this,i=this.images[e];if(-1!=i.lastIndexOf("@")){var n=i.lastIndexOf("."),a=i.lastIndexOf("@"),s=i.substring(0,a)+i.substring(n,i.length),o=new Image;o.onload=function(){t.$set(t.images,e,s)},o.src=s}},setLike:function(e,t){var i=this,n={concemflag:1,isProperty:0,noteCode:e,userCode:this.$userInfo.OWNER_CODE};n.concemflag=t&&t.some((function(e){return e.userCode==n.userCode}))?0:1,this.saveLikeAction(n).then((function(e){i.getDetail()})).catch((function(e){i.$toast(e)}))},delCommentAction:function(){var e=this;r["a"].confirm({title:"提示",message:"确定删除此条评论？"}).then((function(){var t=e.delActionObj,i=t.noteCode,n=t.evalCode;e.delCommentInforAction({noteCode:i,evalCode:n}).then((function(){e.getDetail()})).catch((function(t){console.log(t),e.$toast(t)}))})).catch((function(){}))},checkLike:function(e){var t=this;return!!e&&(console.log(e),e.some((function(e){return e.userCode==t.$userInfo.OWNER_CODE})))},goBack:function(){this.$store.state.preview.previewId&&this.$store.dispatch("setPreviewId",""),this.$router.go(-1)}})},m=p,v=(i("3fa1"),i("2877")),h=Object(v["a"])(m,n,a,!1,null,"2aae3b4a",null);t["default"]=h.exports},"3fa1":function(e,t,i){"use strict";var n=i("3fd8"),a=i.n(n);a.a},"3fd8":function(e,t,i){}}]);
//# sourceMappingURL=chunk-4901bef0.2020111117.js.map