(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dd9d2680"],{"2e2b":function(t,o,e){},"3da7":function(t,o,e){t.exports=e.p+"img/speech_audio.3bd131da.gif"},"54dd":function(t,o,e){"use strict";var s=e("2e2b"),n=e.n(s);n.a},5608:function(t,o,e){t.exports=e.p+"img/mall_sort_more.5a8b5aa5.png"},"79a8":function(t,o,e){"use strict";var s=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.showMask,expression:"showMask"}],staticClass:"dialog"},[e("div",{staticClass:"dialogback",on:{click:t.closeMask}}),e("div",{staticClass:"dialog-container"},[e("div",{staticClass:"dialog-title"},[t._v(t._s(t.title))]),e("div",{staticClass:"content",domProps:{innerHTML:t._s(t.content)}}),t._m(0),e("div",{staticClass:"close-btn",on:{click:t.closeMask}},[e("i",{staticClass:"iconfont icon-close"})])])])},n=[function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("div",{staticClass:"btns"},[s("div",{staticClass:"voice-gif",staticStyle:{width:"5rem",background:"transparent"}},[s("img",{staticStyle:{width:"5rem"},attrs:{src:e("3da7")}})])])}],i={props:{value:{},type:{type:String,default:"default"},content:{type:String,default:""},title:{type:String,default:""},cancelText:{type:String,default:"取消"},dangerText:{type:String,default:"删除"},confirmText:{type:String,default:"确认"}},data:function(){return{showMask:!1}},methods:{closeMask:function(){this.showMask=!1},closeBtn:function(){this.$emit("cancel"),this.closeMask()},dangerBtn:function(){this.$emit("danger"),this.closeMask()},confirmBtn:function(){this.$emit("confirm"),this.closeMask()}},mounted:function(){this.showMask=this.value},watch:{value:function(t,o){this.showMask=t},showMask:function(t){this.$emit("input",t)}}},a=i,r=(e("54dd"),e("2877")),c=Object(r["a"])(a,s,n,!1,null,"8b970dea",null);o["a"]=c.exports},9963:function(t,o){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAzNJREFUWAntl01oE0EUx5ukREtFLUoKOUgEC2qQKOQiHqLph4gKgijUevIgiEKpVtBDRQ+C1YNaoVfBohQsHgQRmmIaISVoFURPHupFhIIQaDCl+fT34m5I0mwz2W3VQwZe3pv3+d+3M5PZpqbGaHTg33bAthrlJycnA+S5CPmhVuiDzWYb7+7ufoJsaVgGGAqF7oJgMJ/PL8sFyFdtbW2n/X5/0ixKu9lAiZuamuoD2NVq4MSO/mg8Hr8jstlhGiDFHdBDhcKXwuHwTgW/qi6mAU5PT+8C4JaqWUuU+Niy2eyBElVdommA6XR6Tx2V6vEtS2saoMPhWFeWaYUJXVT2rUxjGmBlorWaNwBa7Wyjg40OWu2A1fj/fg02qz4hF4P9+J6ERru6uuZU40r9YrHYxoWFhUF0n3t6ep6X2oxk5Q7ybzCWy+WuQMOSDJ4wSlpFX/BNJBLnsQ1xDXsWjUZdVfyWqZQBEikXURl75cfpdH4UrjIAVPDlIX3iD29OJpPrVWLrAfhdS7iN69OGQCDwjcJfaxXBZ5FuvxU/ZK/mn/V4PPO1YsWuDJDkES2hk+vTMZG5MJyD5TR9VUa3rrPefkQike3I+zSnWEdHx1LVgAqlMkCST+ixyEOQIxgMRu12ex/6uG7TOQ+UgW7xXfJIdKlU6maJrZhL1xnxZd8RRo6i5/vjDcAOaT4jdKZfZD6a3AA9y6v0A6oVmmX+ggf4JHbizhD3VGRsP10ul8fn8/2Sea1RF0COmt0UmoVaJDHFRt1u94DX600ZFQLcBWwjxBSONID3ckyNG/lX6usCKMF0qxc2BjlkDsg5it9DfClrTXRsos2s08Po+yE5PwsD3/u88sv6XIXXDVCSAvIU7DGkHz2ilpEERBpQm/5Mi7+ykW7zADeKGkXBFEDJLbuShf8A8TiADPMA+D27fUA2lCKmMjfDxGVeK0x4nTsymcwJQB7BLai5fgHYBOvtdWdn57sVwmuaLAPUK7AZDgIyrM2v8TqHdZsVrnwOWiliJXbVANK9vA6EV1uUdZ1ZvmoA29vbZ1l38wBZAmvILKA1jZuZmWlh02xd0yKN5I0O/OUO/AYp7x42io8XAwAAAABJRU5ErkJggg=="},a9ae:function(t,o,e){t.exports=e.p+"img/no_shop_con_img.7a6f8ec6.png"},ef2e:function(t,o,e){"use strict";e.d(o,"a",(function(){return C}));e("8e6e"),e("ac6a"),e("456d"),e("4917"),e("a481");var s=e("bd86"),n=e("5c36"),i=e("226f"),a=e("a9c9"),r=e("77c5"),c=e("d399"),l=e("2241"),u=e("3f1b"),h=e("2b0e"),d=e("2f62"),f=e("79a8"),g=e("5d2d");function p(t,o){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);o&&(s=s.filter((function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable}))),e.push.apply(e,s)}return e}function m(t){for(var o=1;o<arguments.length;o++){var e=null!=arguments[o]?arguments[o]:{};o%2?p(e,!0).forEach((function(o){Object(s["a"])(t,o,e[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):p(e).forEach((function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(e,o))}))}return t}var C={name:"productPage",data:function(){return{immediate:!1,isShowVoiceBtn:!1,skuTypeNum:0,totalPoints:0,bannerData:[],swipeIndex:0,goodsListData:[],setVantHeight:{},loading:!1,finished:!1,isLastPage:!1,offsetHeight:1e3,goodsCateList:[],activityGoodsList:[],current:0,currentChange:!1,bannerChangeBool:!1,shopList:[],columnList:[],columnListWidth:{},isLoading:!1,productScrollTop:0,isShowTopBtn:!1,areaList:[],sendVal:!1,recognizeResult:"正在聆听",bannerPicUrl:e("50e8"),catePicUrl:e("5608"),statusLabel:{orange:e("aa82"),red:e("be73")},areaCode:"",merchantLeft:0,oldScrollLeft:0,isScroll:!1,seckillGoodsItem:"",rows:10,changeInfoRows:0,isShowCircle:!1,addBtnIcon:null,isFirstLoading:!1,addGoodsLoading:!1,swiperFlag:!0,labelItemTop:0}},components:{"dialog-bar":f["a"],SwiperBanner:u["a"]},created:function(){this.areaCode=this.$userInfo.AREA_CODE},filters:{setSkuTypeNum:function(t){return t>=100?"99+":t},threshold:function(t){return t>=1e4?t/1e4>=10?"9万+":Math.floor(t/1e4)+"万+":t},priceFilters:function(t){return t>=1e4?Math.floor(t/1e4*100)/100+"万":t}},mounted:function(){if(this.getBannerList(),this.getGoodsCate(),this.loadRecommendGoods(1),this.getAreaList(),"android"==this.$devicePlatform){var t=document.querySelector(".searchInput");t&&(t.style.lineHeight="35px")}},activated:function(){var t=this;this.current=0,this.getSkuTypeNum(),this.getPointNum(),0!=this.productScrollTop&&this.$nextTick((function(){t.$refs.scrollContent.scrollTop=t.productScrollTop})),this.areaCode!=this.$userInfo.AREA_CODE&&(this.areaCode=this.$userInfo.AREA_CODE,this.getBannerList(),this.getGoodsCate(),this.loadRecommendGoods(1),this.getAreaList()),0!=this.goodsListData.length&&(this.changeInfoRows=this.goodsListData.length,this.getNewGoodsListData())},watch:{merchantLeft:function(t,o){var e=this;setTimeout((function(){t==e.$refs.merchantList.scrollLeft?(console.log("滚动结束"),e.isScroll=!1,e.oldScrollLeft=t):console.log("滚动中")}),200),this.oldScrollLeft==o&&(console.log("滚动开始"),this.isScroll=!0)},bannerData:{handler:function(t,o){var e=this;this.swiperFlag=!1,this.$nextTick((function(){e.swiperFlag=!0}))},immediate:!0}},computed:Object(d["c"])({pageNumber:function(t){return t.productPage.pageNumber}}),methods:m({},Object(d["b"])(["getRecommendGoods","getnewRecommendGoods"]),{beforeEnter:function(t){t.style.left=this.addBtnIcon.getBoundingClientRect().left+"px",t.style.top=this.addBtnIcon.getBoundingClientRect().top+"px",t.style.transform="scale(1)"},enter:function(t,o){t.offsetWidth,t.style.left=this.$refs.cartIcon.getBoundingClientRect().left+"px",t.style.top=this.$refs.cartIcon.getBoundingClientRect().top+"px",t.style.transform="scale(.5)",o()},afterEnter:function(t){this.isShowCircle=!this.isShowCircle},goTopBtn:function(){this.$refs.scrollContent.scrollTop=0},onRefresh:function(){this.rows=10,this.getBannerList(),this.getGoodsCate(),this.loadRecommendGoods(1),this.getAreaList(),this.current=0,this.getSkuTypeNum(),this.getPointNum(),this.$refs.merchantList.scrollLeft=0,this.$refs.choicenessScroll.scrollLeft=0,this.$refs.seckillScroll.scrollLeft=0},merchantScroll:function(){this.merchantLeft=this.$refs.merchantList.scrollLeft},paperScroll:function(){this.scrollTop=this.$refs.scrollContent.scrollTop,this.scrollTop>=this.$refs.scrollContent.clientHeight?this.isShowTopBtn=!0:this.isShowTopBtn=!1,this.scrollTop<-50&&this.onRefresh()},getAreaList:function(){var t=this,o={OWNER_CODE:this.$userInfo.OWNER_CODE,CITY_CODE:this.$userInfo.CITY_CODE,CITY_NAME:this.$userInfo.CITY_NAME};Object(r["c"])(o).then((function(o){o.length>0&&(t.areaList=o)})).catch((function(t){}))},skipLinkFun:function(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;this.bannerChangeBool||(-1!=o&&(this.swipeIndex=o,console.log(this.swipeIndex)),this.productScrollTop=this.$refs.scrollContent.scrollTop,Object(a["b"])(this,this.areaList.length,t))},onChange:function(t){var o=this;this.current=t,this.currentChange=!0,setTimeout((function(){o.currentChange=!1}),500)},bannerChange:function(){var t=this;this.bannerChangeBool=!0,setTimeout((function(){t.bannerChangeBool=!1}),500)},getPointNum:function(){var t=this,o={ownerCode:this.$userInfo.OWNER_CODE};Object(i["p"])(o).then((function(o){t.totalPoints=o.pointBalance})).catch((function(t){}))},onLoad:function(){this.loadRecommendGoods(this.pageNumber,!1)},getBannerList:function(){var t=this,o=(!(arguments.length>0&&void 0!==arguments[0])||arguments[0],{AREA_CODE:this.$userInfo.AREA_CODE,ADVERT_AREA:"0,7,9",OWNER_CODE:this.$userInfo.OWNER_CODE});Object(r["d"])(o).then((function(o){0==o.ADVERT_1.length?(o.ADVERT_1.push({PIC_URL:t.bannerPicUrl}),g["a"].setStorage("bannerListData",o.ADVERT_1),g["a"].setStorage("areaCode",t.$userInfo.AREA_CODE)):o.ADVERT_1.map((function(t,o){o%2==0&&(t.PIC_URL=t.PIC_URL.replace(/xwjfile.juhaolian.cn/,"xwjfilea.juhaolian.cn")),h["a"].prototype.$isHasLocalImage(t.PIC_URL,(function(o){t.PIC_URL=o}))})),t.bannerData=o.ADVERT_1,t.columnList=o.ADVERT_2,t.shopList=o.ADVERT_3,t.columnListWidth={width:240*o.ADVERT_2.length+"px"},t.isLoading=!1})).catch((function(o){t.isLoading=!1}))},getColumnList:function(){var t=this,o={AREA_CODE:this.$userInfo.AREA_CODE,ADVERT_AREA:7,OWNER_CODE:this.$userInfo.OWNER_CODE};Object(n["j"])(o).then((function(o){t.columnList=o,t.columnListWidth={width:240*o.length+"px"}})).catch((function(t){}))},addGoods:function(t,o){var e=this;if(!this.addGoodsLoading&&!this.isShowCircle){console.log(t),this.addBtnIcon=this.$refs.addBtn[o],this.isShowCircle=!0,this.addGoodsLoading=!0;var s={ownerCode:this.$userInfo.OWNER_CODE,spuCode:t.spuCode,skuNo:t.skuNo,shopCode:t.shopCode,activitySpuId:t.activitySpuId,skuCount:1,mark:1};Object(n["a"])(s).then((function(o){"0"==o.resultCode?(t.cartCount+=1,e.getSkuTypeNum(!0)):"20100"==o.resultCode&&"0"==o.data.result&&e.$toast("您所添加商品超过最大购买量了哦"),e.addGoodsLoading=!1})).catch((function(t){e.addGoodsLoading=!1}))}},getSkuTypeNum:function(){var t=this,o=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e={ownerCode:this.$userInfo.OWNER_CODE};Object(n["z"])(e).then((function(e){0==e.resultCode&&(o&&Object(c["a"])({message:"添加购物车成功",duration:1e3}),t.skuTypeNum=e.data.skuTypeNum)})).catch((function(t){}))},loadRecommendGoods:function(t){var o=this,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s={areaCode:this.$userInfo.AREA_CODE,ownerCode:this.$userInfo.OWNER_CODE,page:t,rows:this.rows};this.getRecommendGoods(s).then((function(t){0==t.resultCode&&(0!=t.data.list.length&&t.data.list.map((function(t,o){o%2==0&&(t.spuPicUrl=t.spuPicUrl.replace(/xwjfile.juhaolian.cn/,"xwjfilea.juhaolian.cn")),h["a"].prototype.$isHasLocalImage(t.spuPicUrl,(function(o){t.spuPicUrl=o}))})),e?(o.goodsListData=t.data.list,o.$store.commit("pageNumChange",{custPageNum:!0,pageNumber:2}),o.isFirstLoading=!0):o.goodsListData=o.goodsListData.concat(t.data.list),o.loading=!1,o.finished=t.data.isLastPage)})).catch((function(t){}))},getNewGoodsListData:function(){var t=this,o={areaCode:this.$userInfo.AREA_CODE,ownerCode:this.$userInfo.OWNER_CODE,page:1,rows:this.changeInfoRows};this.getnewRecommendGoods(o).then((function(o){0==o.resultCode&&(console.log(t.goodsListData),console.log(o.data.list),t.goodsListData.map((function(t,e){o.data.list.map((function(o){t.spuCode==o.spuCode&&(t.skuPrice=o.skuPrice,t.cartCount=o.cartCount,t.storeNumber=o.storeNumber)}))})))})).catch((function(t){}))},getGoodsCate:function(){var t=this,o=(!(arguments.length>0&&void 0!==arguments[0])||arguments[0],{});Object(n["o"])(o).then((function(o){o.data.length>0&&o.data.map((function(o,e){o.catePic?(e%2==0&&(o.catePic=o.catePic.replace(/xwjfile.juhaolian.cn/,"xwjfilea.juhaolian.cn")),h["a"].prototype.$isHasLocalImage(o.catePic,(function(t){o.catePic=t}))):o.catePic=t.catePicUrl})),t.goodsCateList=o.data})).catch((function(t){}))},getHotShops:function(){var t=this,o={areaCode:this.$userInfo.AREA_CODE};Object(n["s"])(o).then((function(o){console.log(o),0==o.resultCode&&(t.shopList=o.data)})).catch((function(t){}))},getActivityGoodsInfo:function(){var t=this,o={areaCode:this.$userInfo.AREA_CODE};Object(n["i"])(o).then((function(o){0==o.resultCode&&(t.activityGoodsList=o.data)})).catch((function(t){}))},goToMoreGoods:function(t,o){this.currentChange||(this.productScrollTop=this.$refs.scrollContent.scrollTop,this.$router.push({name:"moreClassify",params:{goodsCateList:t,goodsCateIndex:o}}))},goToMoreGoodsItem:function(){this.currentChange||(this.productScrollTop=this.$refs.scrollContent.scrollTop,this.$router.push({name:"moreClassify",params:{goodsCateList:this.goodsCateList,goodsCateIndex:0}}))},goToFlashSaleList:function(){var t=this;if(this.$userInfo.ROOM_CODE){var o={areaCode:this.$userInfo.AREA_CODE};Object(n["i"])(o).then((function(o){if(0==o.resultCode){console.log(o);var e=1;t.activityGoodsList.map((function(t){1!=t.spuStatus||(e=0)})),1==e?console.log("未开始"):0==e&&console.log("进行中"),t.productScrollTop=t.$refs.scrollContent.scrollTop,t.$router.push({name:"flashSaleList",params:{firstTab:e}})}})).catch((function(t){}))}else l["a"].confirm({message:"您未绑定房间，是否前往绑定？",confirmButtonText:"前往"}).then((function(){t.$router.push("selectArea")})).catch((function(){}))},goToFlashSaleGoods:function(t){var o=this;this.$userInfo.ROOM_CODE?(this.productScrollTop=this.$refs.scrollContent.scrollTop,this.$router.push({name:"flashSaleGoods",query:{spuCode:t.spuCode,activitySpuId:t.activitySpuId,status:t.spuStatus,goodsUrl:t.goodsPic}})):l["a"].confirm({message:"您未绑定房间，是否前往绑定？",confirmButtonText:"前往"}).then((function(){o.$router.push("selectArea")})).catch((function(){}))},goToGoodsSearch:function(t){this.productScrollTop=this.$refs.scrollContent.scrollTop,this.$router.push({name:"goodsSearch",params:{speechTxt:t,isRefresh:1}})},goToSpeech:function(){var t=this,o=cordova.plugins.IflyForXwjPlugin;t.recognizeResult="正在聆听";var e=navigator.userAgent,s=!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);if(s)t.sendVal=!0,o.startListen((function(o){if(o){if(t.sendVal){var e=o.replace(/[\ |\~|\`|\!|\@|\#|\$|\%|\^|\&|\*|\(|\)|\-|\_|\+|\=|\||\\|\[|\]|\{|\}|\;|\:|\"|\'|\,|\<|\。|\>|\/|\？]/g,"");t.recognizeResult=e,t.sendVal=!1,t.goToGoodsSearch(e)}}else t.sendVal=!1,console.log("没有值"),Object(c["a"])("我没听清您说什么")}),(function(o){t.sendVal=!1,console.log("err"+o)}),!1,!0);else{var n=["android.permission.RECORD_AUDIO"],i=cordova.plugins.permissions;i.requestPermissions(n,(function(e){e.hasPermission&&(t.sendVal=!0,o.startListen((function(o){if(o){if(console.log(o),t.sendVal){var e=o.replace(/[\ |\~|\`|\!|\@|\#|\$|\%|\^|\&|\*|\(|\)|\-|\_|\+|\=|\||\\|\[|\]|\{|\}|\;|\:|\"|\'|\,|\<|\。|\>|\/|\？]/g,"");t.recognizeResult=e,t.sendVal=!1,t.goToGoodsSearch(e)}}else t.sendVal=!1,console.log("没有值"),Object(c["a"])("我没听清您说什么")}),(function(o){t.sendVal=!1,console.log("err"+o)}),!1,!0))}),(function(t){alert("请打开麦克风权限")}))}},goToProduct:function(t){t.activitySpuId?this.$router.push({name:"flashSaleGoods",query:{spuCode:t.spuCode,activitySpuId:t.activitySpuId,goodsUrl:t.spuPicUrl}}):this.$router.push({name:"goodsDetail",params:{spuCode:t.spuCode,goodsUrl:t.spuPicUrl}})},goToShopPage:function(t){this.isScroll||this.$router.push({name:"shopPage",params:{shopCode:t}})},goToShoppingCart:function(){this.$router.push({name:"shoppingCart",params:{}})},goToPoint:function(){this.$router.push({name:"myPoints",params:{}})},goToCouponCenter:function(){this.$router.push({name:"couponCenter",params:{}})}}),beforeDestroy:function(){},beforeRouteLeave:function(t,o,e){this.productScrollTop=this.$refs.scrollContent.scrollTop,e()}}}}]);
//# sourceMappingURL=chunk-dd9d2680.bf5c66dd.js.map