(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7e8bd718"],{"0865":function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"a",(function(){return s})),i.d(e,"d",(function(){return r})),i.d(e,"e",(function(){return o})),i.d(e,"c",(function(){return c})),i.d(e,"f",(function(){return l})),i.d(e,"g",(function(){return u}));var n=i("ba6a"),a=function(t){return new Promise((function(e,i){n["a"].post("hisense-systemServer/app/owner/ownerActivitiesController/getActiMsg.do",t,!0,"homeUrl",!1).then((function(t){e(t)})).catch((function(t){i(t)}))}))},s=function(t){return new Promise((function(e,i){n["a"].post("hisense-systemServer/app/owner/ownerActivitiesController/getActiMsgByActiCode.do",t,!0,"homeUrl").then((function(t){e(t)})).catch((function(t){i(t)}))}))},r=function(t){return new Promise((function(e,i){n["a"].post("hisense-systemServer/app/owner/ownerActivitiesController/getDetailMsgByDetailCode.do",t,!0,"homeUrl").then((function(t){e(t)})).catch((function(t){i(t)}))}))},o=function(t){return new Promise((function(e,i){n["a"].post("hisense-systemServer/app/owner/ownerActivitiesController/getIsActiDetailMsg.do",t,!0,"homeUrl").then((function(t){e(t)})).catch((function(t){i(t)}))}))},c=function(t){return new Promise((function(e,i){n["a"].post("hisense-systemServer/app/owner/ownerActivitiesController/deleteEnrol.do",t,!0,"homeUrl").then((function(t){e(t)})).catch((function(t){i(t)}))}))},l=function(t){return new Promise((function(e,i){n["a"].post("hisense-systemServer/app/owner/ownerActivitiesController/addActiEnrol.do",t,!0,"homeUrl").then((function(t){e(t)})).catch((function(t){i(t)}))}))},u=function(t){return new Promise((function(e,i){n["a"].post("hisense-systemServer/app/owner/ownerActivitiesController/getDetailByActiCode.do",t,!0,"homeUrl").then((function(t){e(t)})).catch((function(t){i(t)}))}))}},"647a":function(t,e,i){t.exports=i.p+"img/defaultImg.f3fdc31a.png"},"64ce":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"propertyActivity"},[n("navigation-bar",{attrs:{pageName:t.title,bothWidth:t.headerItemWidth},on:{onLeftClick:t.goBack}}),n("div",{staticClass:"scroll-content",style:{top:44+this.$stbHeight+"px"}},[n("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[t.isShowEmpty?t._e():n("van-list",{attrs:{finished:t.finished,"immediate-check":!1,offset:600},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.activity,(function(e){return n("van-cell",{key:e.ACTI_CODE,on:{click:function(i){return t.toDetail(e)}}},[n("div",{staticClass:"bgGray clearfix"},[n("div",{staticClass:"activity clearfix"},[n("div",{staticClass:"cardArea"},[n("div",{staticClass:"activityContent clearfix"},[n("div",{staticClass:"imgDrakArea"},[0==e.isImg?n("img",{staticClass:"full-image",attrs:{src:e.PIC_URL}}):t._e(),1==e.isImg?n("img",{staticClass:"full-image",attrs:{src:i("647a")}}):t._e(),n("div",{staticClass:"backDrap"},[e.START_TIME2>t.date1?n("span",{staticClass:"backText noStart"},[t._v("活动未开始")]):t._e(),e.END_TIME2<t.date1?n("span",{staticClass:"backText already"},[t._v("活动结束")]):t._e()])]),"1"==e.FLAG?n("div",{staticClass:"joinFlag"},[t._v("已报名")]):t._e(),n("div",{staticClass:"liveTitle"},[t._v(t._s(e.ACTI_NAME))]),n("div",{staticClass:"validDate colorAThree"},[t._v("\n                    活动时间\n                    "),n("i",{staticStyle:{visibility:"hidden"}},[t._v("1")]),t._v("\n                    "+t._s(t._f("limitMax")(e.START_TIME))+"\n                    "),n("i",{staticStyle:{visibility:"hidden"}},[t._v("1")]),t._v("至\n                    "),n("i",{staticStyle:{visibility:"hidden"}},[t._v("1")]),t._v("\n                    "+t._s(t._f("limitMax")(e.END_TIME))+"\n                    "),n("span",{staticStyle:{float:"right"}},[t._v(t._s(e.COUNTS)+"人报名")])])])])])])])})),1)],1)],1),t.isShowEmpty?n("div",{staticClass:"no-message"},[n("img",{attrs:{src:i("e88a")}}),n("p",[t._v("暂无活动")])]):t._e()],1)},a=[],s=(i("6b54"),i("a481"),i("c5f6"),i("0aa6")),r=i("0865"),o={name:"propertyActivityList",components:{NavigationBar:s["a"]},data:function(){return{total:0,isShowEmpty:!1,date1:"",activity:[],loading:!0,finished:!1,headerItemWidth:{width:"84px"},title:"物业活动",refreshing:!1}},mounted:function(){this.userInfo=this.$userInfo,this.query={page:"1",rows:"10",AREA_CODES:[{AREA_CODE:this.userInfo.AREA_CODE}],AREA_CODE:this.userInfo.AREA_CODE,OWNER_CODE:this.userInfo.OWNER_CODE,ROOM_CODE:this.userInfo.ROOM_CODE},this.onRefresh()},methods:{getActivityList:function(){var t=this;Object(r["b"])({data:JSON.stringify(this.query)}).then((function(e){t.total=e.TOTAL,t.date1=(new Date).getTime();var i=e.ROWS;t.total=e.TOTAL,0===t.total&&(t.isShowEmpty=!0),t.finished=e.ROWS.length>=t.total;for(var n=0;n<i.length;n++){var a=void 0,s=i[n].LIMIT_MAX,r=i[n].COUNTS;a=Math.round(Number(r)/Number(s)*1e4)/100,i[n].percent=a}for(var o=0;o<e.ROWS.length;o++)if(e.ROWS[o].PIC_URL){if(e.ROWS[o].isImg=0,o%2==0){var c=e.ROWS[o];c.PIC_URL=c.PIC_URL.replace("xwjfile.juhaolian.cn","xwjfilea.juhaolian.cn")}}else e.ROWS[o].isImg=1;t.activity=e.ROWS;for(var l=0;l<t.activity.length;l++)t.activity[l].START_TIME2=new Date(t.activity[l].START_TIME.replace(/-/g,"/")).getTime(),t.activity[l].END_TIME2=new Date(t.activity[l].END_TIME.replace(/-/g,"/")).getTime();t.loading=!1,t.refreshing=!1})).catch((function(e){t.$toast("网络异常，请稍后重试！"),t.refreshing=!1,t.loading=!1,t.isShowEmpty=!0}))},onRefresh:function(){this.query.page="1",this.getActivityList()},onLoad:function(){var t=this,e=Number(this.query.page),i=Number(this.query.rows),n=Number(this.total);if(e*i<n){var a=e+1;this.query.page=a.toString(),Object(r["b"])({data:JSON.stringify(this.query)}).then((function(e){t.loading=!1;for(var i=e.ROWS,n=0;n<e.ROWS.length;n++)if(e.ROWS[n].PIC_URL){if(e.ROWS[n].isImg=0,n%2==0){var a=e.ROWS[n];a.PIC_URL=a.PIC_URL.replace("xwjfile.juhaolian.cn","xwjfilea.juhaolian.cn")}}else e.ROWS[n].isImg=1;for(var s=0;s<i.length;s++){var r=void 0,o=i[s].LIMIT_MAX,c=i[s].COUNTS;r=Math.round(Number(c)/Number(o)*1e4)/100,i[s].percent=r}t.activity=t.activity.concat(e.ROWS);for(var l=0;l<t.activity.length;l++)t.activity[l].START_TIME2=new Date(t.activity[l].START_TIME.replace(/-/g,"/")).getTime(),t.activity[l].END_TIME2=new Date(t.activity[l].END_TIME.replace(/-/g,"/")).getTime();t.activity.length>=t.total&&(t.finished=!0)})).catch((function(e){t.$toast("网络异常，请稍后重试！"),t.loading=!1}))}else this.query={},this.loading=!1},toDetail:function(t){var e=this;this.date2=(new Date).getTime();var i={ACTI_CODE:t.ACTI_CODE,flag:1};setTimeout((function(){console.log("来啦"+e.date2),t.END_TIME2<e.date2?"0"!=t.FLAG?i.state=0:i.state=1:t.START_TIME2>e.date2?i.state=4:t.START_TIME2<e.date2&&t.END_TIME2>e.date2&&("0"==t.FLAG?i.state=2:i.state=3),e.$router.push({path:"/propertyActivityDetail",query:{object:JSON.stringify(i)}})}),350)},goBack:function(){this.$router.back(-1)}},filters:{limitMax:function(t){return t.substr(0,10)}}},c=o,l=(i("d3ea"),i("2877")),u=Object(l["a"])(c,n,a,!1,null,"a6715746",null);e["default"]=u.exports},8881:function(t,e,i){},d3ea:function(t,e,i){"use strict";var n=i("8881"),a=i.n(n);a.a}}]);
//# sourceMappingURL=chunk-7e8bd718.4691a2f6.js.map