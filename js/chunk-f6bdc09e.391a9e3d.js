(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f6bdc09e"],{"0bb2":function(t,n){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAA8klEQVRYR+3W0Q3CMAwE0PMEsEFhg26A2MAZgc3YoN6AjsAIHQEmMMpfhZCaxFdVSM1fP9J7OiWRBRsv2TgfO+B/Gkgpje7eAUhm9mSdneIGUkoTgM7dXwCuLEQxQFV7ERkBHJiIYkCufA1EFWANRDWAjWgCMBHNABYiBGAgwoAoggL4gZjM7FzyWjIBRwAPEekBvIdhyN+LiwJQ1Xk43P1mZvfFdCA+D0TCMzDUQDQ8BGCENwNY4U0AZng1gB1eBVgjvAqQZ0IAl7yp5p4vvQXF13A2ExY/MkvhVQ2o6ilvMLM8nNJWcQO0xK8f7YDNG/gAwGu6IfuBM1kAAAAASUVORK5CYII="},2756:function(t,n,e){"use strict";e.d(n,"d",(function(){return o})),e.d(n,"c",(function(){return s})),e.d(n,"g",(function(){return a})),e.d(n,"e",(function(){return r})),e.d(n,"f",(function(){return c})),e.d(n,"a",(function(){return u})),e.d(n,"i",(function(){return l})),e.d(n,"b",(function(){return E})),e.d(n,"h",(function(){return h}));var i=e("ba6a"),o=function(t){return new Promise((function(n,e){i["a"].post("hisense-systemServer/app/owner/homePage/getAppList.do",t,!0,"homeUrl").then((function(t){n(t)})).catch((function(t){e(t)}))}))},s=function(t){return new Promise((function(n,e){i["a"].get("xwj-sys-user/life/getAppLifeShop",t,!0,"baseUrl").then((function(t){n(t)})).catch((function(t){e(t)}))}))},a=function(t){return new Promise((function(n,e){i["a"].post("hisense-systemServer/app/owner/engineerController/getEngineer.do",t,!0,"homeUrl").then((function(t){n(t)})).catch((function(t){e(t)}))}))},r=function(t){return new Promise((function(n,e){i["a"].post("hisense-systemServer/app/owner/engineerController/getComments.do",t,!0,"homeUrl").then((function(t){n(t)})).catch((function(t){e(t)}))}))},c=function(t){return new Promise((function(n,e){i["a"].post("hisense-systemServer/app/owner/engineerController/detailsEngineer.do",t,!0,"homeUrl").then((function(t){n(t)})).catch((function(t){e(t)}))}))},u=function(t){return new Promise((function(n,e){i["a"].post("hisense-systemServer/app/owner/engineerController/addComment.do",t,!0,"homeUrl").then((function(t){n(t)})).catch((function(t){e(t)}))}))},E=function(t){return new Promise((function(n,e){i["a"].post("hisense-systemServer/app/owner/engineerController/deleteComment.do",t,!0,"homeUrl").then((function(t){n(t)})).catch((function(t){e(t)}))}))},l=function(t){return new Promise((function(n,e){i["a"].post("xwj-adapter-jieshen/jieshen/getRealServiceUrl.json",t,!0,"baseUrl").then((function(t){n(t)})).catch((function(t){e(t)}))}))},h=function(t){return new Promise((function(n,e){i["a"].get("xwj-adapter-jieshen/use/serviceIsUse",t,"baseUrl").then((function(t){n(t)})).catch((function(t){e(t)}))}))}},"4328d":function(t,n,e){"use strict";e.r(n);var i=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"engineeringList"},[e("navigation-bar",{attrs:{pageName:t.title,bothWidth:t.headerItemWidth},on:{onLeftClick:t.onClickLeft},scopedSlots:t._u([{key:"nav-right",fn:function(){return[e("div",{staticClass:"rightBtn",on:{click:t.onClickRight}},[t._v(t._s(t.rightName))])]},proxy:!0}])}),e("div",{staticClass:"engineeringListContent"},[e("ul",{staticClass:"engineering-list"},t._l(t.engineeringList,(function(n,i){return e("li",{key:i,on:{click:function(e){return t.gotoEngineerDetail(n)}}},[e("div",{staticClass:"backCon",style:{backgroundColor:n.color}}),e("div",{staticClass:"engineerCon"},[e("span",{staticClass:"engineerInfo"},[t._v(t._s(n.TITLE))])]),e("div",[e("span",{staticClass:"engineerInfo"},[t._v(t._s(n.CREATED_TIME))])]),e("img",{attrs:{src:t.rightArrowImg}})])})),0),t.commentList.length>0?e("div",{staticClass:"moment-list"},[e("div",{staticClass:"moment-title"},[e("span",{staticClass:"fontSize14"},[t._v("评论("+t._s(t.commentCount)+")")]),e("span",{staticClass:"more fontSize14",on:{click:function(n){return t.gotoMore()}}},[t._v("\n          查看更多\n          "),e("img",{attrs:{src:t.rightArrowImg}})])]),t._l(t.commentList,(function(n,i){return e("div",{key:i,staticClass:"engineer-list"},[e("div",{staticClass:"head-img"},[void 0==n.PIC_URL||""==n.PIC_URL?e("img",{staticClass:"head-picture",attrs:{src:t.headImg}}):t._e(),void 0!=n.PIC_URL&&""!=n.PIC_URL?e("img",{staticClass:"head-picture",attrs:{src:n.PIC_URL}}):t._e()]),e("div",{staticClass:"comment-con"},[e("div",{staticClass:"fontSize12"},[e("span",{staticClass:"font-style"},[t._v(t._s(n.USER_NICK_NAME))]),void 0!=n.BE_OWNER_CODE&&1==n.TYPE_FLAG?e("span",{staticClass:"office-holder"},[t._v("地产")]):t._e(),void 0!=n.BE_OWNER_CODE&&""!=n.BE_OWNER_CODE?e("span",{staticClass:"fontSize14"},[t._v("\n              回复\n              "),e("span",{staticClass:"font-style"},[t._v(t._s(n.BE_OWNER_NICK_NAME))])]):t._e(),e("span",{staticClass:"fontSize14"},[t._v(":"+t._s(n.CONTENT))])]),e("div",{staticClass:"comment-time"},[e("span",{staticClass:"fontSize14"},[t._v(t._s(n.CREATED_TIME))]),n.USER_CODE==t.ownerCode?e("span",{staticClass:"fontSize14",staticStyle:{"padding-left":"20px"},on:{click:function(e){return t.replayOperat(n,i)}}},[t._v("删除")]):t._e(),e("span",{staticClass:"reply",on:{click:function(e){return t.replyComment(n)}}},[e("img",{attrs:{src:t.replyImg}})])])])])}))],2):t._e()]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showFlag,expression:"showFlag"}],ref:"commentKeyboard",staticClass:"bar item-input-inset",attrs:{keyboardshoweng:"",id:"commentKeyboard"}},[e("label",{staticClass:"item-input-wrapper"},[e("van-icon",{staticStyle:{"margin-top":"9px"},attrs:{name:"edit"}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.add.content,expression:"add.content"}],ref:"commnetInputEng",staticClass:"content",attrs:{type:"text",id:"commnetInputEng",placeholder:t.add.name,maxlength:"200","ng-change":"inputValidation()"},domProps:{value:t.add.content},on:{input:function(n){n.target.composing||t.$set(t.add,"content",n.target.value)}}})],1),e("button",{staticClass:"button button-positive",on:{click:function(n){return t.sendComment()}}},[t._v("评论")])])],1)},o=[],s=e("2756"),a=e("0aa6"),r=e("2b0e"),c=e("2241");r["a"].use(c["a"]);var u={name:"engineeringList",components:{NavigationBar:a["a"]},data:function(){return{engineeringList:[],commentList:[],commentCount:0,showFlag:!1,add:{content:"",name:"说点什么"},replyInfo:{BE_OWNER_CODE:"",BE_OWNER_NICK_NAME:"",BE_OWNER_NAME:"",BE_PHONE:"",BE_PIC_URL:""},headerItemWidth:{width:"84px"},title:"工程进展",rightName:"评论",headImg:e("db04"),replyImg:e("4866"),rightArrowImg:e("0bb2"),ownerCode:this.$userInfo.OWNER_CODE,marTop:{marginTop:this.$stbHeight+46+"px"}}},mounted:function(){var t=this;cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!1),window.addEventListener("native.keyboardshow",(function(n){"Android"==device.platform?t.$refs.commentKeyboard.style.bottom=n.keyboardHeight+20+"px":t.$refs.commentKeyboard.style.bottom=n.keyboardHeight+"px",t.showFlag=!0})),window.addEventListener("native.keyboardhide",(function(n){t.$refs.commentKeyboard.style.bottom="0px",t.showFlag=!1})),this.getEngineer(),this.getComments()},methods:{getEngineer:function(){var t=this,n={USER_CODE:this.$userInfo.OWNER_CODE,AREA_CODE:this.$userInfo.AREA_CODE};Object(s["g"])({data:JSON.stringify(n)}).then((function(n){if(""==n);else{t.engineeringList=n;for(var e=0;e<t.engineeringList.length;e++)t.engineeringList[e].color="rgb("+Math.floor(256*Math.random())+","+Math.floor(256*Math.random())+","+Math.floor(256*Math.random())+")"}})).catch((function(n){t.$toast("网络异常，请稍后重试！")}))},getComments:function(){var t=this,n={AREA_CODE:this.$userInfo.AREA_CODE};Object(s["e"])({data:JSON.stringify(n)}).then((function(n){""==n?t.commentCount=n.length:(t.commentCount=n.length,t.commentList=n)})).catch((function(n){t.$toast("网络异常，请稍后重试！")}))},getRandomColor:function(){return"#"+function(t){return(t+="0123456789abcdef"[Math.floor(16*Math.random())])&&6==t.length?t:arguments.callee(t)}("")},onClickLeft:function(){cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),this.$router.back()},onClickRight:function(){var t=this;this.showFlag=!0,this.add.content="",this.replyInfo={BE_OWNER_CODE:"",BE_OWNER_NICK_NAME:"",BE_OWNER_NAME:"",BE_PHONE:"",BE_PIC_URL:""},this.add.name="说点什么",setTimeout((function(){t.$refs.commnetInputEng.focus()}),100)},replyComment:function(t){console.log("点击回复"),this.showFlag=!0,this.add.content="",this.add.name="回复 "+t.USER_NICK_NAME+"：",this.replyInfo.BE_OWNER_CODE=t.USER_CODE,this.replyInfo.BE_OWNER_NICK_NAME=t.USER_NICK_NAME,this.replyInfo.BE_OWNER_NAME=t.USER_NAME,this.replyInfo.BE_PHONE=t.USER_PHONE,this.replyInfo.BE_PIC_URL=t.PIC_URL},sendComment:function(){var t=this,n={AREA_CODE:this.$userInfo.AREA_CODE,AREA_NAME:this.$userInfo.AREA_NAME,CITY_CODE:this.$userInfo.CITY_CODE,DEPT_CODE:this.$userInfo.DEPT_CODE,CONTENT:this.add.content,USER_CODE:this.$userInfo.OWNER_CODE,USER_NAME:this.$userInfo.OWNER_NAME,USER_NICK_NAME:this.$userInfo.OWNER_NICK_NAME,USER_PHONE:this.$userInfo.OWNER_PHONE,PIC_URL:this.$userInfo.PIC_URL,TYPE_FLAG:"0",BE_OWNER_CODE:this.replyInfo.BE_OWNER_CODE,BE_OWNER_NICK_NAME:this.replyInfo.BE_OWNER_NICK_NAME,BE_OWNER_NAME:this.replyInfo.BE_OWNER_NAME,BE_PHONE:this.replyInfo.BE_PHONE,BE_PIC_URL:this.replyInfo.BE_PIC_URL,UUID_PARENT:""};""!==this.add.content&&null!==this.add.content?Object(s["a"])({data:JSON.stringify(n)}).then((function(n){n.success?(t.getComments(),t.showFlag=!1,t.add.content=""):t.$toast(n.msg)})).catch((function(n){t.$toast("网络异常，请稍后重试！")})):this.$toast("说点什么，再评论吧","center")},replayOperat:function(t,n){var e=this;c["a"].confirm({title:"提示",message:"确认删除评论？"}).then((function(){e.delMoments(t,n)}))},delMoments:function(t,n){var e=this,i={UUID:t.UUID,USER_CODE:this.$userInfo.OWNER_CODE};Object(s["b"])({data:JSON.stringify(i)}).then((function(t){t.success?(e.$toast(t.msg),e.getComments()):e.$toast(t.msg)}))},gotoEngineerDetail:function(t){this.$router.push({name:"engineeringDetail",params:{projectCode:t.PROJECT_CODE}})},gotoMore:function(){this.$router.push({name:"engineeringMore"})}}},E=u,l=(e("aa4c"),e("2877")),h=Object(l["a"])(E,i,o,!1,null,"4a1bd000",null);n["default"]=h.exports},4866:function(t,n){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAWCAYAAADafVyIAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QjQ0QTg0NTRCQzgzMTFFNzkxNDNFMjZBMzNCOTQyODYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QjQ0QTg0NTVCQzgzMTFFNzkxNDNFMjZBMzNCOTQyODYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpCNDRBODQ1MkJDODMxMUU3OTE0M0UyNkEzM0I5NDI4NiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpCNDRBODQ1M0JDODMxMUU3OTE0M0UyNkEzM0I5NDI4NiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PlTJXRYAAAF4SURBVHjaxJW9SgNBFIVnk6i1CiIJASvfwzRWgiZvYLEQwcb/qBiITUCx3y38eQQRBAsthFRBBO2sfAALUbFS13PhDAzDrCzurl744O7NzTnszJ0dLwiCIaXUDpgHo+BLpYsCeAKHoFOi+CY4Bw+glNLgA0yCLUWxJjgFs79R833fWQ/DUDSb8jrD4F5lH3dgpMCHYg4GRb0huca/GdSIHVPE3tCakNSgDi5Jw6hLfkXqhnhD9yOfS2JQNvJKTD2up2KLuQ7VCRs9cGTUj1mP2GPWy456rMEraMXUNxwH7cVV//MpinLQjrSBJAM5GIhmJAa3HLtqVsoY1yrH+sbDfTCN5Iyf2Uejz2NNJmM/RmtR9pnDYi7zBL9FM/LDBU+nNI4ZTZ+8gPbAOFixxLfBLrgGb9bA9OVFMGE9PaY94ooDsMybbo21dYq3IdL5abmS3F5L3LBV8A6eQVeuQ6LSGui1ljVt87lr5JkYSCyAQS5VK+mfvgUYANMfV0OyehN4AAAAAElFTkSuQmCC"},a739:function(t,n,e){},aa4c:function(t,n,e){"use strict";var i=e("a739"),o=e.n(i);o.a},db04:function(t,n,e){t.exports=e.p+"img/head.60c5fc25.png"}}]);
//# sourceMappingURL=chunk-f6bdc09e.391a9e3d.js.map