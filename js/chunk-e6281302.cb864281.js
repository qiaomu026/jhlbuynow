(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e6281302"],{"37a6":function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"reset-pwd-page"},[o("navigation-bar",{attrs:{pageName:e.title},on:{onLeftClick:e.onBack}}),o("div",{staticClass:"setpwd-content"},[o("div",{staticClass:"phone-number"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.phoneNum,expression:"phoneNum"}],staticClass:"input-phone",attrs:{type:"tel",placeholder:"输入手机号",maxlength:"11",onkeyup:"value=value.replace(/[^\\d]/g,'')"},domProps:{value:e.phoneNum},on:{input:function(t){t.target.composing||(e.phoneNum=t.target.value)}}})]),o("div",{staticClass:"phone-authcode"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.phoneAuthCode,expression:"phoneAuthCode"}],staticClass:"input-authcode",attrs:{type:"tel",placeholder:"输入验证码",maxlength:"6",onkeyup:"value=value.replace(/[^\\d]/g,'')"},domProps:{value:e.phoneAuthCode},on:{input:function(t){t.target.composing||(e.phoneAuthCode=t.target.value)}}}),o("div",{staticClass:"get-verification",style:{color:e.verifyStrColor},on:{click:e.getPhoneValit}},[e._v(e._s(e.verifyCodeStr))])]),o("div",{staticStyle:{height:"0px",overflow:"hidden"}},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.phoneAuthCode,expression:"phoneAuthCode"}],attrs:{type:"tel",onkeyup:"value=value.replace(/[^\\d]/g,'')"},domProps:{value:e.phoneAuthCode},on:{input:function(t){t.target.composing||(e.phoneAuthCode=t.target.value)}}})]),o("div",{staticClass:"new-password"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"input-password",attrs:{type:"password",placeholder:"输入新密码（6-16位字符）",maxlength:"16"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),o("div",{staticClass:"ok-btn",style:{"background-color":e.okBtnBackground,"box-shadow":e.okBtnShadow},on:{click:e.clickedokBtn}},[e._v("\n        确认\n        ")])]),o("van-dialog",{attrs:{confirmButtonColor:"#17B7BD",message:e.dialogMessage,"show-cancel-button":"",beforeClose:e.beforeClose},model:{value:e.isShowDialog,callback:function(t){e.isShowDialog=t},expression:"isShowDialog"}})],1)},s=[],a=o("d28e"),i=o("2b0e"),h=o("d399"),u=o("0aa6");i["a"].use(h["a"]);var c={components:{NavigationBar:u["a"]},name:"resetPwd",mounted:function(){var e=this.$route.params;void 0!=e&&void 0!=e.phoneNum&&(this.phoneNum=e.phoneNum),this.getPubKey()},data:function(){return{title:"重置密码",verifyCodeStr:"获取验证码",verifyStrColor:"#17B7BD",phoneNum:"",phoneAuthCode:"",password:"",okBtnEnable:!1,isShowDialog:!1,dialogMessage:"",publicKey:""}},watch:{phoneNum:function(e){this.changngeLoginBtnStatus()},phoneAuthCode:function(e){this.changngeLoginBtnStatus()},password:function(e){this.changngeLoginBtnStatus()}},computed:{okBtnBackground:function(){return this.okBtnEnable?"#17B7BD":"#D0CDCE"},okBtnShadow:function(){return this.okBtnEnable?"0 0 15px 0 rgba(197,58,72,0.39)":" 0 0 15px 0 #D0CDCE"}},methods:{changngeLoginBtnStatus:function(){this.okBtnEnable=this.phoneNum.length>=11&&this.phoneAuthCode.length>=6&&this.password.length>=6},clickedokBtn:function(){var e=this;if(console.log("点击确认按钮"),this.okBtnEnable){var t=btoa(this.password),o=this.phoneNum+","+this.phoneAuthCode+","+t,n=i["a"].prototype.$getRSASign(o,this.publicKey),s={modifyInfo:n};Object(a["h"])(s).then((function(t){e.showMsg(t.msg),0==t.resultCode&&e.onBack()})).catch((function(t){e.showMsg(t)}))}},getPhoneValit:function(){var e=this;if("获取验证码"==this.verifyCodeStr)if(void 0!==this.phoneNum&&0!=this.phoneNum.length){var t=/^1[0-9]{10}$/;if(t.test(this.phoneNum)){var o={PHONE:this.phoneNum};Object(a["f"])(o).then((function(t){"1"==t.success?e.getPhoneAuthCode():(e.dialogMessage="该手机号尚未注册，请通过验证码登录",e.isShowDialog=!0)})).catch((function(t){e.showMsg(t)}))}else this.showMsg("请输入有效的手机号码")}else this.showMsg("请输入手机号")},getPhoneAuthCode:function(){var e=this,t={PHONE:this.phoneNum};Object(a["c"])(t).then((function(t){if(0==t.success)e.showMsg(t.msg);else{e.showMsg("验证码已发送"),e.verifyStrColor="#bdbdbd";var o=60;e.verifyCodeStr=o+"秒";var n=window.setInterval((function(){o--,o>0?e.verifyCodeStr=o+"秒":(window.clearInterval(n),e.verifyStrColor="#17B7BD",e.verifyCodeStr="获取验证码")}),1e3)}})).catch((function(t){e.showMsg(t)}))},beforeClose:function(e,t){"confirm"===e&&(this.$store.dispatch("changeActiveTabFun",0),this.onBack()),t()},onBack:function(){this.$router.back(-1)},showMsg:function(e){this.$toast(e)},getPubKey:function(){var e=this;Object(a["e"])().then((function(t){e.publicKey=t.data.publicKey})).catch((function(t){e.isLoading=!1}))}}},r=c,l=(o("875e"),o("2877")),d=Object(l["a"])(r,n,s,!1,null,"26bf80a6",null);t["default"]=d.exports},"7f3b":function(e,t,o){},"875e":function(e,t,o){"use strict";var n=o("7f3b"),s=o.n(n);s.a}}]);
//# sourceMappingURL=chunk-e6281302.cb864281.js.map