(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-23b15880"],{"0367":function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{background:"#F9F9F9",height:"100%",display:"flex","flex-direction":"column"}},[i("navigation-bar",{attrs:{pageName:"选择小区"},on:{onLeftClick:t.onClickLeft}}),i("van-search",{attrs:{placeholder:"请输入小区名称",disabled:"",shape:"round"},on:{click:t.showSerchView}}),i("van-cell",{attrs:{title:"当前定位："+t.cityName,value:"切换城市",icon:"location-o","is-link":""},on:{click:t.selectCity}}),t.showSearch?i("div",{staticClass:"searchView",style:t.padingtopNum},[i("div",{staticClass:"searchInput"},[i("div",{staticClass:"left"},[i("form",{staticClass:"inputBg",attrs:{action:"javascript:return true"},on:{submit:function(e){return e.preventDefault(),t.formSubmit(e)}}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],ref:"searchField",staticClass:"search-input",attrs:{type:"search",placeholder:"请输入小区名称"},domProps:{value:t.searchText},on:{keydown:function(e){return e.type.indexOf("key")||13===e.keyCode?t.onSearch(e):null},input:function(e){e.target.composing||(t.searchText=e.target.value)}}})])]),i("div",{staticClass:"searchActionBtn",class:{searchBtn:!t.searchNull},on:{click:t.searchBtnAction}},[t._v(t._s(t.searchNull?"取消":"搜索"))])]),t._l(t.searchResults,(function(e,o){return i("van-cell",{key:o,attrs:{title:e.AREA_NAME},on:{click:function(i){return t.cellClicked(e)}}})}))],2):t._e(),i("div",{staticClass:"search-box",staticStyle:{flex:"1",overflow:"hidden"}},[i("van-index-bar",{directives:[{name:"show",rawName:"v-show",value:!t.showSearch,expression:"!showSearch"}],staticStyle:{height:"100%",overflow:"auto"},attrs:{sticky:!1,"index-list":t.indexList,"highlight-color":"#FB5768"}},t._l(t.list,(function(e,o){return i("div",{key:o},[i("van-index-anchor",{attrs:{index:e.letter}}),t._l(e.item,(function(e){return i("van-cell",{key:e.AREA_NAME,attrs:{title:e.AREA_NAME},on:{click:function(i){return t.cellClicked(e)}}})}))],2)})),0)],1)],1)},c=[],a=i("68c2"),s={name:"selectArea",mixins:[a["a"]]},n=s,r=(i("6c7a"),i("2877")),l=Object(r["a"])(n,o,c,!1,null,"45cd5a66",null);e["default"]=l.exports},"68c2":function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var o=i("75fc"),c=(i("456d"),i("4917"),i("ac4d"),i("8a81"),i("ac6a"),i("bc3a")),a=i.n(c),s=i("226f"),n=i("0aa6"),r={components:{NavigationBar:n["a"]},data:function(){return{searchText:"",cityCode:"2018012400001",cityName:"正在定位...",list:[],indexList:[],showSearch:!1,searchResults:[],searchNull:!0,padingtopNum:{"margin-top":this.$stbHeight+44+"px"},showLeftArrow:!0}},watch:{searchText:function(){""!==this.searchText?this.searchNull=!1:this.searchNull=!0}},methods:{searchBtnAction:function(){this.searchNull?this.onCancel():this.onSearch()},onClickLeft:function(){this.$router.back(-1)},selectCity:function(){this.$router.push("/selectCity")},showSerchView:function(){var t=this;this.showSearch=!0,setTimeout((function(){t.$refs.searchField.focus()}),200)},cellClicked:function(t){this.$router.push({path:"/selectHouse",query:{areaCode:t.AREA_CODE,areaName:t.AREA_NAME,cityCode:this.cityCode,cityName:"正在定位..."==this.cityName?"":this.cityName}})},onSearch:function(){this.searchResults=[];var t=!0,e=!1,i=void 0;try{for(var o,c=this.allAreaList[Symbol.iterator]();!(t=(o=c.next()).done);t=!0){var a=o.value;a.AREA_NAME.match(this.searchText)&&this.searchResults.push(a)}}catch(s){e=!0,i=s}finally{try{t||null==c.return||c.return()}finally{if(e)throw i}}0==this.searchResults.length&&this.$toast("没有搜索到此小区")},onCancel:function(){this.showSearch=!1},initAreaList:function(){var t=this,e={CITY_CODE:this.cityCode};Object(s["l"])(e).then((function(e){t.list=e.areaList,t.indexList=e.areaTitleList})).catch((function(t){}))},getCurrentLocation:function(){var t=this;console.log(navigator),navigator.geolocation.getCurrentPosition((function(e){console.log("success"),console.log(e);var o=i("6cd4"),c=o.wgs84togcj02(e.coords.longitude,e.coords.latitude),s=c[0],n=c[1],r="https://apis.map.qq.com/ws/geocoder/v1/?location="+n+","+s+"&key=HC3BZ-W7SHU-GUTVY-2MOH3-HZMC5-F7F3D&get_poi=0&output=json";console.log(r),a.a.get(r).then((function(e){console.log(e),console.log(e.data),console.log(e.data.result),console.log(e.data.result.address_component),console.log(e.data.result.address_component.city),t.cityName=e.data.result.address_component.city,console.log(t.cityName)})).catch((function(t){console.log(t)}))}),(function(t){console.log(t)}))}},mounted:function(){var t=this;this.showLeftArrow="/"!=this.$fromPage,setTimeout((function(){document.querySelector(".search-box").append(document.querySelector(".van-index-bar__sidebar"))}),100),this.$userInfo.CITY_CODE&&(this.cityCode=this.$userInfo.CITY_CODE);var e=this.$route.query;0!=Object.keys(e).length?e.city.CITY_CODE&&e.city.CITY_NAME?(this.cityCode=e.city.CITY_CODE,this.cityName=e.city.CITY_NAME):(this.cityCode=e.city,this.cityName=""==e.cityName?"正在定位...":e.cityName,""==e.cityName&&this.getCurrentLocation()):(this.getCurrentLocation(),console.log("开始计时"),setTimeout((function(){console.log("====qiao===="),"正在定位..."==t.cityName&&(console.log("++++qiao++++"),t.cityName="请检查设置")}),5e3)),this.initAreaList()},computed:{allAreaList:function(){var t=[],e=!0,i=!1,c=void 0;try{for(var a,s=this.list[Symbol.iterator]();!(e=(a=s.next()).done);e=!0){var n=a.value;t.push.apply(t,Object(o["a"])(n.item)),console.log(n)}}catch(r){i=!0,c=r}finally{try{e||null==s.return||s.return()}finally{if(i)throw c}}return t}}}},"6c7a":function(t,e,i){"use strict";var o=i("ebb3"),c=i.n(o);c.a},ebb3:function(t,e,i){}}]);
//# sourceMappingURL=chunk-23b15880.45e1b96e.js.map