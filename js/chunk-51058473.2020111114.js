(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-51058473"],{"12f5":function(t,o,e){"use strict";e.r(o);var s=function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("div",{staticClass:"newCouponCenter"},[s("navigation-bar",{ref:"navigation",attrs:{pageName:"领券中心"},on:{onLeftClick:t.onLeftClick}}),s("van-tabs",{attrs:{swipeable:t.swipeable,animated:""},model:{value:t.tabIndex,callback:function(o){t.tabIndex=o},expression:"tabIndex"}},[s("van-tab",{ref:"vantTab",attrs:{title:"店铺优惠券",color:"#FB5768","line-width":"0.67rem","line-height":"0.08rem"}},[0==t.tabIndex?s("div",{ref:"scrollContent",staticClass:"scrollY"},[s("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isRefreshLoading,callback:function(o){t.isRefreshLoading=o},expression:"isRefreshLoading"}},[t.shopCouponList.length>0?s("div",[s("div",{staticClass:"topSpace"}),s("coupon-item",{attrs:{lists:t.shopCouponList}}),s("div",{staticClass:"topSpace"})],1):t._e(),0!=t.shopCouponList.length||t.isLoading?t._e():s("div",{staticClass:"noList"},[s("img",{attrs:{src:e("8c6a")}}),s("div",[t._v("暂无优惠券")])]),t.isNoNetwork?s("div",[s("NetworkError")],1):t._e()])],1):t._e()]),s("van-tab",{attrs:{title:"平台红包",color:"#FB5768","line-width":"0.67rem","line-height":"0.08rem"}},[1==t.tabIndex?s("div",{ref:"scrollContent",staticClass:"scrollY"},[s("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isRefreshLoading,callback:function(o){t.isRefreshLoading=o},expression:"isRefreshLoading"}},[t.platformList.length>0?s("div",[s("div",{staticClass:"topSpace"}),s("coupon-item",{attrs:{lists:t.platformList}}),s("div",{staticClass:"topSpace"})],1):t._e(),0!=t.platformList.length||t.isPlatformListLoading?t._e():s("div",{staticClass:"noList"},[s("img",{attrs:{src:e("8c6a")}}),s("div",[t._v("暂无优惠券")])]),t.isNoNetwork?s("div",[s("NetworkError")],1):t._e()])],1):t._e()])],1)],1)},i=[],n=e("0aa6"),a=e("5e0f"),c=e("dcbb"),r=e("5c36"),A={name:"newCouponCenter",components:{NavigationBar:n["a"],couponItem:a["a"],NetworkError:c["a"]},data:function(){return{swipeable:!0,tabIndex:0,isNoNetwork:!1,isLoading:!0,isPlatformListLoading:!0,isRefreshLoading:!1,shopCouponList:[],platformList:[],scrollTop:0}},created:function(){},activated:function(){var t=this;this.$nextTick((function(){var o=document.documentElement.clientHeight||document.body.clientHeight;t.$refs.vantTab.$el.parentNode.parentNode.style.height=o-44-t.$stbHeight-50+"px"})),this.$route.params.isInit?(this.tabIndex=0,this.init()):this.$refs.scrollContent.scrollTop=this.scrollTop},deactivated:function(){},watch:{tabIndex:{handler:function(t,o){this.init()}}},computed:{},methods:{init:function(){this.$refs.scrollContent.scrollTop=0,this.platformList=[],this.shopCouponList=[],this.isLoading=!0,this.isPlatformListLoading=!0,this.isNoNetwork=!1,0==this.tabIndex?this.queryPickupList():this.queryPickupListV33()},queryPickupList:function(){var t=this,o={ownerCode:this.$userInfo.OWNER_CODE,areaCode:this.$userInfo.AREA_CODE};Object(r["J"])(o).then((function(o){0==o.resultCode&&(t.isLoading=!1,t.isRefreshLoading=!1,t.shopCouponList=o.data.date,t.shopCouponList.isShowBtn=!0)})).catch((function(o){t.shopCouponList=[],t.isRefreshLoading=!1,t.isLoading=!0,t.isNoNetwork=!0}))},queryPickupListV33:function(){var t=this,o={ownerCode:this.$userInfo.OWNER_CODE,areaCode:this.$userInfo.AREA_CODE};Object(r["L"])(o).then((function(o){0==o.resultCode&&(t.isPlatformListLoading=!1,t.isRefreshLoading=!1,t.platformList=o.data.platformList,t.platformList.isShowBtn=!0)})).catch((function(o){t.platformList=[],t.isRefreshLoading=!1,t.isPlatformListLoading=!0,t.isNoNetwork=!0}))},onRefresh:function(){this.init()},onLeftClick:function(){this.$router.go(-1)}},beforeRouteLeave:function(t,o,e){this.scrollTop=this.$refs.scrollContent.scrollTop,e()}},l=A,p=(e("a528"),e("2877")),u=Object(p["a"])(l,s,i,!1,null,"3bf57e27",null);o["default"]=u.exports},"507b":function(t,o){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAICAYAAADJEc7MAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAADqADAAQAAAABAAAACAAAAAAysMxaAAAA60lEQVQYGY2QvYrCUBCFvQnp8wZ2sV6w04CVrU8ggiQBH0C0F7ewErHJn42ynZ3NwnaxtlDLPIggSfabIqIuiw6EmXtyvjmXq3zfPyqlhp7nfVfeKPxtbEuNmjFswzC0X3FRFDXES9BEc113UxTFMM/zXRzH9f9goA/xEDTmdmtVGoMgGMkCXddbjuOcS106C2tZliUkzQn6FO0GyoH7T2l9YBs4FY2kKkl7xi+SRqJJPYAikLwguWMYRpOEK5Ug/wAN5H9Zf0AgxUOt6PIQF74TUJcleQlJ1+4PMmMoTNN0GA/MqWVZvWdIfL8WKF1X4hn1KgAAAABJRU5ErkJggg=="},"5e0f":function(t,o,e){"use strict";var s=function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("div",{staticClass:"couponList"},t._l(t.lists,(function(o,i){return s("div",{key:"couponItem"+i,staticClass:"couponItem",class:o.isShowScope?"couponItemMinMargin":"couponItemMaxMargin"},[s("div",{staticClass:"couponBg"}),s("div",{staticClass:"couponContent",class:t.setCouponBg(o)},[s("div",{staticClass:"couponPriceBox"},[s("div",{staticClass:"couponPrice"},[s("div",{staticClass:"couponPriceIcon"},[t._v("￥")]),s("div",{staticClass:"couponPriceNum"},[t._v(t._s(o.couponTotal))])]),s("div",{directives:[{name:"show",rawName:"v-show",value:0!=o.limitTotal,expression:"couponItem.limitTotal!=0"}],staticClass:"couponPriceTxt"},[t._v("满"+t._s(o.limitTotal)+"元可用")]),s("div",{directives:[{name:"show",rawName:"v-show",value:0==o.limitTotal,expression:"couponItem.limitTotal==0"}],staticClass:"couponPriceTxt"},[t._v("无门槛")])]),s("div",{staticClass:"couponInfoBox"},[s("div",{staticClass:"couponInfo"},[s("div",{directives:[{name:"show",rawName:"v-show",value:"02"!=o.type,expression:"couponItem.type!='02'"}],staticClass:"couponName"},[t._v(t._s(o.name))]),s("div",{directives:[{name:"show",rawName:"v-show",value:"02"==o.type,expression:"couponItem.type=='02'"}],staticClass:"couponName"},[t._v(t._s(o.shopName)+"优惠券")]),"1"==o.effType||o.effBeginDay?s("div",{staticClass:"couponTime"},[t._v(t._s(o.effBeginDay)+"-"+t._s(o.effEndDay))]):t._e(),"2"!=o.effType||1!=o.effDays||o.effBeginDay?t._e():s("div",{staticClass:"couponTime"},[t._v("\n                            领取后当天有效\n                        ")]),"2"!=o.effType||1==o.effDays||o.effBeginDay?t._e():s("div",{staticClass:"couponTime"},[t._v("\n                            领取后"+t._s(o.effDays)+"天内有效\n                        ")]),s("div",{staticClass:"couponScope",on:{click:function(e){return t.showAndHideScope(o)}}},[s("div",{staticClass:"couponScopeTxt"},[t._v("适用范围")]),s("img",{directives:[{name:"show",rawName:"v-show",value:"02"!=o.type,expression:"couponItem.type!='02'"}],staticClass:"couponScopeIcon",class:o.isShowScope?"rotateImg":"",attrs:{src:e("ed05"),alt:""}}),s("img",{directives:[{name:"show",rawName:"v-show",value:"02"==o.type,expression:"couponItem.type=='02'"}],staticClass:"couponScopeIcon",class:o.isShowScope?"rotateImg":"",attrs:{src:e("507b"),alt:""}})])]),s("div",{staticClass:"couponBtnBox"},[1!=o.isPicked&&"01"!=o.status||!t.lists.isShowBtn?t._e():s("div",{staticClass:"couponBtn",on:{click:function(e){return t.goToShopPage(o)}}},[t._v("立即使用")]),0==o.isPicked&&0==o.isFinished?s("div",{staticClass:"couponBtn",on:{click:function(e){return t.receiveBtn(o)}}},[t._v("立即领取")]):t._e()])])]),s("div",{directives:[{name:"show",rawName:"v-show",value:o.isShowScope,expression:"couponItem.isShowScope"}],staticClass:"couponTypeBox"},[s("div",{staticClass:"couponTypeTxt"},[s("div",[t._v(t._s(o.shopScope))])])])])})),0)},i=[],n=e("5c36"),a=e("2241"),c=e("d399"),r={name:"couponItem",data:function(){return{}},props:{lists:{type:Array,default:function(){return[]}}},mounted:function(){console.log(this.lists),this.lists.map((function(t){t.isShowScope=!1}))},activated:function(){},deactivated:function(){},watch:{},computed:{setCouponBg:function(){return function(t){return"02"==t.type?t.status?"01"==t.status?"stayCouponBg":"02"==t.status?"beenUsedCouponBg":"pastdueCouponBg":1==t.isFinished&&1!=t.isPicked?"staleCouponBg":1==t.isPicked?"getCouponBg":"stayCouponBg":t.status?"01"==t.status?"terraceBg":"02"==t.status?"beenUsedTerraceBg":"pastdueTerraceBg":1==t.isFinished&&1!=t.isPicked?"staleTerraceBg":1==t.isPicked?"getTerraceBg":"terraceBg"}}},methods:{receiveBtn:function(t){var o=this;if(this.$userInfo.ROOM_CODE){var e={id:t.id,ownerCode:this.$userInfo.OWNER_CODE,areaCode:this.$userInfo.AREA_CODE,roomCode:this.$userInfo.ROOM_CODE};Object(n["N"])(e).then((function(o){0==o.resultCode?(Object(c["a"])("领取优惠券成功"),t.isPicked=1):Object(c["a"])(o.msg)})).catch((function(t){Object(c["a"])(t)}))}else a["a"].confirm({title:"您未绑定房间，是否前往绑定？",confirmButtonText:"前往"}).then((function(){o.$router.push("selectArea")})).catch((function(){}))},goToShopPage:function(t){if("01"==t.type){var o=[];this.$router.push({name:"goodsCollection",params:{couponName:0!=t.limitTotal?"满".concat(t.limitTotal,"减").concat(t.couponTotal):"无门槛立减".concat(t.couponTotal,"元"),shopCodeList:o}})}else if("02"==t.type)this.$router.push({name:"shopPage",params:{shopCode:t.shopCode}});else{var e="";t.couponShopList.map((function(t,o){e=0==o?t.shopCode:e+","+t.shopCode})),this.$router.push({name:"goodsCollection",params:{couponName:0!=t.limitTotal?"满".concat(t.limitTotal,"减").concat(t.couponTotal):"无门槛立减".concat(t.couponTotal,"元"),shopCodeList:e}})}},showAndHideScope:function(t){console.log(t),t.isShowScope=!t.isShowScope,this.$forceUpdate()}}},A=r,l=(e("9e60"),e("2877")),p=Object(l["a"])(A,s,i,!1,null,"c66b8140",null);o["a"]=p.exports},"71e0":function(t,o,e){},"8c6a":function(t,o,e){t.exports=e.p+"img/no_coupon_img.a94be2ee.png"},"9e60":function(t,o,e){"use strict";var s=e("ae66"),i=e.n(s);i.a},a528:function(t,o,e){"use strict";var s=e("71e0"),i=e.n(s);i.a},ae66:function(t,o,e){},ed05:function(t,o){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAICAYAAADJEc7MAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAADqADAAQAAAABAAAACAAAAAAysMxaAAAAnklEQVQYGY3QLwoCQRQH4PXPISxiESwWwSZWvYQeQDyAYDdYLUaTYPIwxjWJQRBBRPv6ubCwK7vowDfz5r3flAmiKDowDP5csgPCwDbiRf/XW5keT8ZxVjHhQbfosVmHO9NMRmPGjXZm4KLX4sr8exbfDRZcaCYBdYMzy6SXewqsOFGnxpF1bjjdFCqxIeTz41vK6UxhLVhhx55qXvANpAaZho+5RScAAAAASUVORK5CYII="}}]);
//# sourceMappingURL=chunk-51058473.2020111114.js.map