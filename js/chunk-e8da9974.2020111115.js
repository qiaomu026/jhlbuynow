(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e8da9974"],{"48ab":function(t,o,s){},"507b":function(t,o){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAICAYAAADJEc7MAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAADqADAAQAAAABAAAACAAAAAAysMxaAAAA60lEQVQYGY2QvYrCUBCFvQnp8wZ2sV6w04CVrU8ggiQBH0C0F7ewErHJn42ynZ3NwnaxtlDLPIggSfabIqIuiw6EmXtyvjmXq3zfPyqlhp7nfVfeKPxtbEuNmjFswzC0X3FRFDXES9BEc113UxTFMM/zXRzH9f9goA/xEDTmdmtVGoMgGMkCXddbjuOcS106C2tZliUkzQn6FO0GyoH7T2l9YBs4FY2kKkl7xi+SRqJJPYAikLwguWMYRpOEK5Ug/wAN5H9Zf0AgxUOt6PIQF74TUJcleQlJ1+4PMmMoTNN0GA/MqWVZvWdIfL8WKF1X4hn1KgAAAABJRU5ErkJggg=="},"5e0f":function(t,o,s){"use strict";var i=function(){var t=this,o=t.$createElement,i=t._self._c||o;return i("div",{staticClass:"couponList"},t._l(t.lists,(function(o,e){return i("div",{key:"couponItem"+e,staticClass:"couponItem",class:o.isShowScope?"couponItemMinMargin":"couponItemMaxMargin"},[i("div",{staticClass:"couponBg"}),i("div",{staticClass:"couponContent",class:t.setCouponBg(o)},[i("div",{staticClass:"couponPriceBox"},[i("div",{staticClass:"couponPrice"},[i("div",{staticClass:"couponPriceIcon"},[t._v("￥")]),i("div",{staticClass:"couponPriceNum"},[t._v(t._s(o.couponTotal))])]),i("div",{directives:[{name:"show",rawName:"v-show",value:0!=o.limitTotal,expression:"couponItem.limitTotal!=0"}],staticClass:"couponPriceTxt"},[t._v("满"+t._s(o.limitTotal)+"元可用")]),i("div",{directives:[{name:"show",rawName:"v-show",value:0==o.limitTotal,expression:"couponItem.limitTotal==0"}],staticClass:"couponPriceTxt"},[t._v("无门槛")])]),i("div",{staticClass:"couponInfoBox"},[i("div",{staticClass:"couponInfo"},[i("div",{directives:[{name:"show",rawName:"v-show",value:"02"!=o.type,expression:"couponItem.type!='02'"}],staticClass:"couponName"},[t._v(t._s(o.name))]),i("div",{directives:[{name:"show",rawName:"v-show",value:"02"==o.type,expression:"couponItem.type=='02'"}],staticClass:"couponName"},[t._v(t._s(o.shopName)+"优惠券")]),"1"==o.effType||o.effBeginDay?i("div",{staticClass:"couponTime"},[t._v(t._s(o.effBeginDay)+"-"+t._s(o.effEndDay))]):t._e(),"2"!=o.effType||1!=o.effDays||o.effBeginDay?t._e():i("div",{staticClass:"couponTime"},[t._v("\n                            领取后当天有效\n                        ")]),"2"!=o.effType||1==o.effDays||o.effBeginDay?t._e():i("div",{staticClass:"couponTime"},[t._v("\n                            领取后"+t._s(o.effDays)+"天内有效\n                        ")]),i("div",{staticClass:"couponScope",on:{click:function(s){return t.showAndHideScope(o)}}},[i("div",{staticClass:"couponScopeTxt"},[t._v("适用范围")]),i("img",{directives:[{name:"show",rawName:"v-show",value:"02"!=o.type,expression:"couponItem.type!='02'"}],staticClass:"couponScopeIcon",class:o.isShowScope?"rotateImg":"",attrs:{src:s("ed05"),alt:""}}),i("img",{directives:[{name:"show",rawName:"v-show",value:"02"==o.type,expression:"couponItem.type=='02'"}],staticClass:"couponScopeIcon",class:o.isShowScope?"rotateImg":"",attrs:{src:s("507b"),alt:""}})])]),i("div",{staticClass:"couponBtnBox"},[1!=o.isPicked&&"01"!=o.status||!t.lists.isShowBtn?t._e():i("div",{staticClass:"couponBtn",on:{click:function(s){return t.goToShopPage(o)}}},[t._v("立即使用")]),0==o.isPicked&&0==o.isFinished?i("div",{staticClass:"couponBtn",on:{click:function(s){return t.receiveBtn(o)}}},[t._v("立即领取")]):t._e()])])]),i("div",{directives:[{name:"show",rawName:"v-show",value:o.isShowScope,expression:"couponItem.isShowScope"}],staticClass:"couponTypeBox"},[i("div",{staticClass:"couponTypeTxt"},[i("div",[t._v(t._s(o.shopScope))])])])])})),0)},e=[],a=s("5c36"),n=s("2241"),c=s("d399"),l={name:"couponItem",data:function(){return{}},props:{lists:{type:Array,default:function(){return[]}}},mounted:function(){console.log(this.lists),this.lists.map((function(t){t.isShowScope=!1}))},activated:function(){},deactivated:function(){},watch:{},computed:{setCouponBg:function(){return function(t){return"02"==t.type?t.status?"01"==t.status?"stayCouponBg":"02"==t.status?"beenUsedCouponBg":"pastdueCouponBg":1==t.isFinished&&1!=t.isPicked?"staleCouponBg":1==t.isPicked?"getCouponBg":"stayCouponBg":t.status?"01"==t.status?"terraceBg":"02"==t.status?"beenUsedTerraceBg":"pastdueTerraceBg":1==t.isFinished&&1!=t.isPicked?"staleTerraceBg":1==t.isPicked?"getTerraceBg":"terraceBg"}}},methods:{receiveBtn:function(t){var o=this;if(this.$userInfo.ROOM_CODE){var s={id:t.id,ownerCode:this.$userInfo.OWNER_CODE,areaCode:this.$userInfo.AREA_CODE,roomCode:this.$userInfo.ROOM_CODE};Object(a["N"])(s).then((function(o){0==o.resultCode?(Object(c["a"])("领取优惠券成功"),t.isPicked=1):Object(c["a"])(o.msg)})).catch((function(t){Object(c["a"])(t)}))}else n["a"].confirm({title:"您未绑定房间，是否前往绑定？",confirmButtonText:"前往"}).then((function(){o.$router.push("selectArea")})).catch((function(){}))},goToShopPage:function(t){if("01"==t.type){var o=[];this.$router.push({name:"goodsCollection",params:{couponName:0!=t.limitTotal?"满".concat(t.limitTotal,"减").concat(t.couponTotal):"无门槛立减".concat(t.couponTotal,"元"),shopCodeList:o}})}else if("02"==t.type)this.$router.push({name:"shopPage",params:{shopCode:t.shopCode}});else{var s="";t.couponShopList.map((function(t,o){s=0==o?t.shopCode:s+","+t.shopCode})),this.$router.push({name:"goodsCollection",params:{couponName:0!=t.limitTotal?"满".concat(t.limitTotal,"减").concat(t.couponTotal):"无门槛立减".concat(t.couponTotal,"元"),shopCodeList:s}})}},showAndHideScope:function(t){console.log(t),t.isShowScope=!t.isShowScope,this.$forceUpdate()}}},r=l,u=(s("9e60"),s("2877")),p=Object(u["a"])(r,i,e,!1,null,"c66b8140",null);o["a"]=p.exports},"8c6a":function(t,o,s){t.exports=s.p+"img/no_coupon_img.a94be2ee.png"},"9e60":function(t,o,s){"use strict";var i=s("ae66"),e=s.n(i);e.a},ae66:function(t,o,s){},bb8c:function(t,o,s){"use strict";s.r(o);var i=function(){var t=this,o=t.$createElement,i=t._self._c||o;return i("div",{staticClass:"newCouponList"},[i("navigation-bar",{ref:"navigation",attrs:{pageName:"我的优惠券"},on:{onLeftClick:t.onLeftClick}}),i("van-tabs",{attrs:{swipeable:t.swipeable,animated:""},model:{value:t.tabIndex,callback:function(o){t.tabIndex=o},expression:"tabIndex"}},[i("van-tab",{ref:"vantTab",attrs:{title:"待使用",color:"#FB5768","line-width":"0.67rem","line-height":"0.08rem"}},[0==t.tabIndex?i("div",{ref:"scrollContent",staticClass:"scrollY"},[i("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isRefreshLoading,callback:function(o){t.isRefreshLoading=o},expression:"isRefreshLoading"}},[t.platformList.length>0||t.couponList.length>0?i("div",[i("div",{staticClass:"topSpace"}),t.platformList.length>0?i("div",[i("div",{staticClass:"couponTitleBox"},[i("div",{staticClass:"couponTitle"},[t._v("平台红包")]),i("div",{staticClass:"allCouponNumBox",on:{click:function(o){return t.goToAllCouponList(1)}}},[i("div",{staticClass:"allCouponNum"},[t._v("查看全部（共"+t._s(t.platformAllTotal)+"张）")]),i("img",{staticClass:"allCouponIcon",attrs:{src:s("d3b8"),alt:""}})])]),i("coupon-item",{attrs:{url:t.url,lists:t.platformList}})],1):t._e(),t.couponList.length>0?i("div",[i("div",{staticClass:"couponTitleBox"},[i("div",{staticClass:"couponTitle"},[t._v("店铺优惠券")]),i("div",{staticClass:"allCouponNumBox",on:{click:function(o){return t.goToAllCouponList(2)}}},[i("div",{staticClass:"allCouponNum"},[t._v("查看全部（共"+t._s(t.couponAllTotal)+"张）")]),i("img",{staticClass:"allCouponIcon",attrs:{src:s("d3b8"),alt:""}})])]),i("coupon-item",{attrs:{url:t.url,lists:t.couponList}})],1):t._e(),i("div",{staticClass:"topSpace"})]):t._e(),0==t.couponList.length&&0==t.platformList.length&&t.isLoading>=2?i("div",{staticClass:"noList"},[i("img",{attrs:{src:s("8c6a")}}),i("div",[t._v("暂无优惠券")])]):t._e(),t.isNoNetwork?i("div",[i("NetworkError")],1):t._e()])],1):t._e()]),i("van-tab",{attrs:{title:"已使用",color:"#FB5768","line-width":"0.67rem","line-height":"0.08rem"}},[1==t.tabIndex?i("div",{ref:"scrollContent",staticClass:"scrollY"},[i("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isRefreshLoading,callback:function(o){t.isRefreshLoading=o},expression:"isRefreshLoading"}},[t.platformList.length>0||t.couponList.length>0?i("div",[i("div",{staticClass:"topSpace"}),t.platformList.length>0?i("div",[i("div",{staticClass:"couponTitleBox"},[i("div",{staticClass:"couponTitle"},[t._v("平台红包")]),i("div",{staticClass:"allCouponNumBox",on:{click:function(o){return t.goToAllCouponList(1)}}},[i("div",{staticClass:"allCouponNum"},[t._v("查看全部（共"+t._s(t.platformAllTotal)+"张）")]),i("img",{staticClass:"allCouponIcon",attrs:{src:s("d3b8"),alt:""}})])]),i("coupon-item",{attrs:{url:t.url,lists:t.platformList}})],1):t._e(),t.couponList.length>0?i("div",[i("div",{staticClass:"couponTitleBox"},[i("div",{staticClass:"couponTitle"},[t._v("店铺优惠券")]),i("div",{staticClass:"allCouponNumBox",on:{click:function(o){return t.goToAllCouponList(2)}}},[i("div",{staticClass:"allCouponNum"},[t._v("查看全部（共"+t._s(t.couponAllTotal)+"张）")]),i("img",{staticClass:"allCouponIcon",attrs:{src:s("d3b8"),alt:""}})])]),i("coupon-item",{attrs:{url:t.url,lists:t.couponList}})],1):t._e(),i("div",{staticClass:"topSpace"})]):t._e(),0==t.couponList.length&&0==t.platformList.length&&t.isLoading>=2?i("div",{staticClass:"noList"},[i("img",{attrs:{src:s("8c6a")}}),i("div",[t._v("暂无优惠券")])]):t._e(),t.isNoNetwork?i("div",[i("NetworkError")],1):t._e()])],1):t._e()]),i("van-tab",{attrs:{title:"已过期",color:"#FB5768","line-width":"0.67rem","line-height":"0.08rem"}},[2==t.tabIndex?i("div",{ref:"scrollContent",staticClass:"scrollY"},[i("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isRefreshLoading,callback:function(o){t.isRefreshLoading=o},expression:"isRefreshLoading"}},[t.platformList.length>0||t.couponList.length>0?i("div",[i("div",{staticClass:"topSpace"}),t.platformList.length>0?i("div",[i("div",{staticClass:"couponTitleBox"},[i("div",{staticClass:"couponTitle"},[t._v("平台红包")]),i("div",{staticClass:"allCouponNumBox",on:{click:function(o){return t.goToAllCouponList(1)}}},[i("div",{staticClass:"allCouponNum"},[t._v("查看全部（共"+t._s(t.platformAllTotal)+"张）")]),i("img",{staticClass:"allCouponIcon",attrs:{src:s("d3b8"),alt:""}})])]),i("coupon-item",{attrs:{url:t.url,lists:t.platformList}})],1):t._e(),t.couponList.length>0?i("div",[i("div",{staticClass:"couponTitleBox"},[i("div",{staticClass:"couponTitle"},[t._v("店铺优惠券")]),i("div",{staticClass:"allCouponNumBox",on:{click:function(o){return t.goToAllCouponList(2)}}},[i("div",{staticClass:"allCouponNum"},[t._v("查看全部（共"+t._s(t.couponAllTotal)+"张）")]),i("img",{staticClass:"allCouponIcon",attrs:{src:s("d3b8"),alt:""}})])]),i("coupon-item",{attrs:{url:t.url,lists:t.couponList}})],1):t._e(),i("div",{staticClass:"topSpace"})]):t._e(),0==t.couponList.length&&0==t.platformList.length&&t.isLoading>=2?i("div",{staticClass:"noList"},[i("img",{attrs:{src:s("8c6a")}}),i("div",[t._v("暂无优惠券")])]):t._e(),t.isNoNetwork?i("div",[i("NetworkError")],1):t._e()])],1):t._e()])],1)],1)},e=[],a=s("6c90"),n=s("0aa6"),c=s("5e0f"),l=s("dcbb"),r={name:"newCouponList",components:{NavigationBar:n["a"],couponItem:c["a"],NetworkError:l["a"]},data:function(){return{swipeable:!0,tabIndex:0,statusList:[{tabName:"未使用",status:"01"},{tabName:"已使用",status:"02"},{tabName:"已失效",status:"03"}],url:["/newCouponList","我的优惠券列表"],isNoNetwork:!1,isLoading:0,isRefreshLoading:!1,couponList:[],couponAllTotal:0,platformList:[],platformAllTotal:0,scrollTop:0}},mounted:function(){},activated:function(){var t=this;this.$nextTick((function(){var o=document.documentElement.clientHeight||document.body.clientHeight;t.$refs.vantTab.$el.parentNode.parentNode.style.height=o-44-t.$stbHeight-50+"px"})),this.$route.params.isInit?(this.tabIndex=0,this.init()):this.$refs.scrollContent.scrollTop=this.scrollTop},deactivated:function(){},watch:{tabIndex:{handler:function(t,o){this.init()}}},computed:{},methods:{init:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isLoading=0,this.isNoNetwork=!1,this.couponList=[],this.couponAllTotal=0,this.platformList=[],this.platformAllTotal=0,this.queryByUser(),t?this.queryByUserV33():this.queryByUserNewV33()},queryByUser:function(){var t=this,o=this.tabIndex,s={page:1,rows:10,ownerCode:this.$userInfo.OWNER_CODE,status:this.statusList[this.tabIndex].status};Object(a["k"])(s).then((function(s){0==s.resultCode?(o==t.tabIndex&&(t.couponList=[],s.data.couponScopeList.length>0&&s.data.couponScopeList.map((function(o,s){s<3&&t.couponList.push(o)})),t.couponList.isShowBtn=!0,t.isLoading+=1),t.couponAllTotal=s.total):t.isLoading+=1})).catch((function(o){t.couponList=[],t.isRefreshLoading=!1,t.isLoading=0,t.isNoNetwork=!0}))},queryByUserV33:function(){var t=this,o=this.tabIndex,s={page:1,rows:10,ownerCode:this.$userInfo.OWNER_CODE,status:this.statusList[this.tabIndex].status};Object(a["m"])(s).then((function(s){0==s.resultCode?(t.isRefreshLoading=!1,o==t.tabIndex&&(t.platformList=[],s.data.platformList.length>0&&s.data.platformList.map((function(o,s){s<3&&t.platformList.push(o)})),t.platformList.isShowBtn=!0,t.isLoading+=1),console.log("isLoading"+t.isLoading),t.platformAllTotal=s.total):t.isLoading+=1})).catch((function(o){t.platformList=[],t.isRefreshLoading=!1,t.isLoading=0,t.isNoNetwork=!0}))},queryByUserNewV33:function(){var t=this,o=this.tabIndex,s={page:1,rows:10,ownerCode:this.$userInfo.OWNER_CODE,status:this.statusList[this.tabIndex].status};Object(a["l"])(s).then((function(s){0==s.resultCode?(t.isRefreshLoading=!1,o==t.tabIndex&&(t.platformList=[],s.data.platformList.length>0&&s.data.platformList.map((function(o,s){s<3&&t.platformList.push(o)})),t.platformList.isShowBtn=!0,t.isLoading+=1),console.log("isLoading"+t.isLoading),t.platformAllTotal=s.total):t.isLoading+=1})).catch((function(o){t.platformList=[],t.isRefreshLoading=!1,t.isLoading=0,t.isNoNetwork=!0}))},goToAllCouponList:function(t){console.log(t),this.$router.push({name:"allCouponList",params:{couponType:t,statusType:this.statusList[this.tabIndex].status}})},onRefresh:function(){this.init(!0)},onLeftClick:function(){var t=this.$setRouterIndex();t&&this.$router.go(-1)}},beforeRouteLeave:function(t,o,s){this.scrollTop=this.$refs.scrollContent.scrollTop,s()}},u=r,p=(s("e874"),s("2877")),A=Object(p["a"])(u,i,e,!1,null,"00bd84d7",null);o["default"]=A.exports},d3b8:function(t,o){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAYCAYAAADKx8xXAAAAAXNSR0IArs4c6QAAAeNJREFUOBGdkz9MwkAUxrm2oNEOMOiEiZuTGhajMSqJcdDFiS7EASywuLCYGBcWFxcGJ/4EI4uGOJq6mKjRwSiLkyZusuiiicHIn9D6vWqhQQqNTR7vru/73Xe8uzoc/3wYcfl8frBSqWw7nc79UCj0ZGctjkSALjVN26rVasVsNjtlG3S73f5fcX+j0TjPZDIrvWDdUZKkssfjGWCMFQEwVVWPAa93g3WQBIC/sF0/YAWhAd4DnLCC9eaYi4AZgCRyFOHAIkfRaFRGVs26P6BRTKVScYx3aA7oCh1fRccrRt0SJAHgANIBAix75DhuUZblN6p1BUmQTqcXsOUTDF2IF8RcLBZ77glCSM7jSBdwFbHIJ8YLtkCCc7ncSL1ev8FwGCE0j4OKNh7N0NgCaatwuwc0hO2WkScEYwWr3NacV0EQZsPhcKmrIx0HmnEKFzJ4EEVxkiAysQQBxQHQGeoXwOVyTQeDwXea08P/pNYvHJjX66UrtwlQQxQikYjk8/nqLVXbBYCLE8VDiJdpAdyUXUAJM2CMm46FQkGsVqtnKMwjGM/zG4CShrA96xdAUZS+UqlE7R5FNOAUAKS0i81z/TgAXePlGOIDTku4yLdmUaex0dU1/K87fDozdqBOC9l+9w1OV7EeOsl6xwAAAABJRU5ErkJggg=="},e874:function(t,o,s){"use strict";var i=s("48ab"),e=s.n(i);e.a},ed05:function(t,o){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAICAYAAADJEc7MAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAADqADAAQAAAABAAAACAAAAAAysMxaAAAAnklEQVQYGY3QLwoCQRQH4PXPISxiESwWwSZWvYQeQDyAYDdYLUaTYPIwxjWJQRBBRPv6ubCwK7vowDfz5r3flAmiKDowDP5csgPCwDbiRf/XW5keT8ZxVjHhQbfosVmHO9NMRmPGjXZm4KLX4sr8exbfDRZcaCYBdYMzy6SXewqsOFGnxpF1bjjdFCqxIeTz41vK6UxhLVhhx55qXvANpAaZho+5RScAAAAASUVORK5CYII="}}]);
//# sourceMappingURL=chunk-e8da9974.2020111115.js.map