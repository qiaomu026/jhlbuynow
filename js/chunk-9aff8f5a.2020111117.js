(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9aff8f5a"],{"17a2":function(e,t,s){e.exports=s.p+"img/no_searching_img.bbf25fa1.png"},"28d3":function(e,t,s){},"6cbd":function(e,t,s){"use strict";var a=s("28d3"),i=s.n(a);i.a},b287:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"orderSearch"},[a("div",{staticClass:"flex-full",style:{paddingTop:this.$stbHeight+"px"}},[a("div",{staticClass:"leftBar"},[a("div",{staticClass:"searchBox"},[a("img",{staticClass:"searchIcon",attrs:{src:s("f717"),alt:""}}),a("form",{staticClass:"searchInputForm",attrs:{action:"javascript:return true"},on:{submit:function(t){return t.preventDefault(),e.formSubmit(t)}}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.searchTxt,expression:"searchTxt"}],ref:"searchInput",staticClass:"searchInput",attrs:{placeholder:"商品名称",type:"search"},domProps:{value:e.searchTxt},on:{keydown:function(t){return t.type.indexOf("key")||13===t.keyCode?e.searchBtn(t):null},input:function(t){t.target.composing||(e.searchTxt=t.target.value)}}})])]),a("img",{staticClass:"searchClosed",attrs:{src:s("ec64"),alt:""},on:{click:function(t){return t.stopPropagation(),e.emptyBtn(t)}}})]),a("div",{staticClass:"rightBar",on:{click:e.goBack}},[a("div",[e._v("取消")])])]),a("div",{ref:"scrollContent",staticClass:"post-wrapper",class:e.isShowWrapperBg?"post-wrapperBg":""},[a("van-pull-refresh",{on:{refresh:e.onRefresh},model:{value:e.isLoading,callback:function(t){e.isLoading=t},expression:"isLoading"}},[e.lists.length>0?a("van-list",{attrs:{finished:e.finished,offset:30,"immediate-check":e.immediateBol},on:{load:e.onLoad},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[a("div",{staticClass:"topSpace"}),a("order-item",{attrs:{lists:e.lists},on:{refresh:e.onRefresh,setExpressInfo:e.setExpressInfo,setSelectOrderItem:e.setSelectOrderItem,childPayFun:e.goToPay}})],1):e._e(),0!=e.lists.length||e.loading?e._e():a("div",{staticClass:"noList"},[a("img",{attrs:{src:s("17a2")}}),a("div",[e._v("暂无相关搜索结果")])]),e.isNoNetwork?a("div",[a("NetworkError")],1):e._e()],1)],1),a("van-popup",{staticClass:"vanPopup",attrs:{position:"bottom"},on:{close:e.closePopup},model:{value:e.payWindowShow,callback:function(t){e.payWindowShow=t},expression:"payWindowShow"}},[a("div",{staticClass:"payModeBox"},[a("div",{staticClass:"payModeTitle"},[e._v("支付方式")]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isAcppay,expression:"isAcppay"}],staticClass:"payModeItem",on:{click:function(t){return e.alipay(2)}}},[a("div",{staticClass:"unipayclass"},[a("img",{staticClass:"unipayIcon",attrs:{src:s("82b3"),alt:""}}),a("div",{staticStyle:{display:"inline-block","vertical-align":"middle"}},[e._v("云闪付")]),a("img",{staticClass:"iconUnipayRight",staticStyle:{display:"inline-block","vertical-align":"middle",width:"21px",height:"21px"},attrs:{src:s("c9ef"),alt:""}}),e.isAcpPayTag?a("div",{staticClass:"saleIcon",staticStyle:{display:"inline-block","vertical-align":"middle"}},[e._v(e._s(e.acpPayTag))]):e._e()])]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isAlipay,expression:"isAlipay"}],staticClass:"payModeItem",on:{click:function(t){return e.alipay(1)}}},[a("img",{attrs:{src:s("bc27"),alt:""}}),a("div",[e._v("支付宝")])])]),a("div",{staticClass:"cancelBtn",on:{click:e.closePopup}},[e._v("取消")])]),a("van-popup",{staticClass:"vanPopup",attrs:{position:"bottom"},on:{close:e.onCancel},model:{value:e.isShowPhoneSelect,callback:function(t){e.isShowPhoneSelect=t},expression:"isShowPhoneSelect"}},[a("div",{staticClass:"phoneSelectBox"},[e.selectOrderItem?a("div",{staticClass:"phoneSelect",on:{click:function(t){return e.callPhone(e.selectOrderItem.shop.shopPhone)}}},[a("div",[e._v("商家电话：")]),a("div",{staticClass:"phoneNum"},[e._v(e._s(e.selectOrderItem.shop.shopPhone))])]):e._e(),e.selectOrderItem?a("div",{staticClass:"phoneSelect",on:{click:function(t){return e.callPhone(e.selectOrderItem.serviceTel)}}},[a("div",[e._v("平台客服：")]),a("div",{staticClass:"phoneNum"},[e._v(e._s(e.selectOrderItem.serviceTel))])]):e._e()]),a("div",{staticClass:"cancelPhoneBtn",on:{click:e.onCancel}},[e._v("取消")])]),a("van-action-sheet",{attrs:{title:0==e.isShowTitle?"商家配送说明":"物流跟踪"},model:{value:e.isShowAction,callback:function(t){e.isShowAction=t},expression:"isShowAction"}},[1==e.isShowTitle?a("div",{staticClass:"actionContent"},[a("div",[e._v("物流单号："+e._s(e.expressInfo.expressTrackNo)+"\n                "),a("img",{staticStyle:{width:"13px",height:"13px","margin-left":"5px"},attrs:{src:s("54cf"),alt:""},on:{click:function(t){return t.stopPropagation(),e.copyBtn(e.expressInfo.expressTrackNo)}}})]),a("div",[e._v("物流公司："+e._s(e.expressInfo.expressCompany))]),a("div",{on:{click:function(t){return t.stopPropagation(),e.callProperty(e.expressInfo.shopPhone)}}},[e._v("商家电话："),a("span",{staticStyle:{color:"#4A90E2"}},[e._v(e._s(e.expressInfo.shopPhone))])])]):e._e(),0==e.isShowTitle?a("div",{staticClass:"actionContent"},[a("div",[e._v(e._s(e.expressInfo.accountFor))])]):e._e()])],1)},i=[],o=(s("8e6e"),s("ac6a"),s("456d"),s("4917"),s("bd86")),n=s("2f62"),r=s("0aa6"),c=s("474e"),l=s("dcbb"),A=s("02db"),p=s("d399"),d=s("2241"),h=s("5d2d");function u(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function g(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?u(s,!0).forEach((function(t){Object(o["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):u(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var f={name:"orderSearch",components:{NavigationBar:r["a"],orderItem:c["a"],NetworkError:l["a"]},data:function(){return{billCate:null,searchTxt:"",isShowAction:!1,isShowTitle:-1,selectOrderItem:null,isShowPhoneSelect:!1,immediateBol:!1,swipeable:!0,lists:[],goodsCount:0,pageFlag:0,loading:!0,finished:!0,active:0,isLoading:!1,bindThemeL:0!=this.$curTheme,titleThemeL:0==this.$curTheme?"14px":"17px",rows:10,payWindowShow:!1,isAlipay:!1,isWechart:!1,isAcppay:!1,isAcpPayTag:!1,orderListScrollTop:0,returnFlag:!1,expressInfo:null,isNoNetwork:!1,isShowWrapperBg:!0}},mounted:function(){},activated:function(){var e=this;console.log(this.$route.params),null!=this.$route.params.billCate?(this.loading=!0,this.searchTxt="",this.lists=[],this.billCate=0,this.$nextTick((function(){e.$refs.searchInput.focus()}))):(this.$refs.scrollContent.scrollTop=this.orderListScrollTop,this.updateData())},deactivated:function(){},watch:{orderSearchEventBackButtonFlag:function(e){e&&(1==this.payWindowShow?this.payWindowShow=!1:this.isShowPhoneSelect?this.isShowPhoneSelect=!1:this.isShowAction?this.isShowAction=!1:this.goBack(),this.$store.dispatch("setOrderSearchEventBackButtonFlag",!1))}},computed:Object(n["c"])({pageNumber:function(e){return e.productPage.orderSearchListPage},orderSearchEventBackButtonFlag:function(e){return e.goBack.orderSearchEventBackButtonFlag}}),methods:g({},Object(n["b"])(["getOrderSearchListGoods","getEvaluatedGoods"]),{copyBtn:function(e){var t=e;"ios"==this.$devicePlatform?window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.JSCtrl?window.webkit.messageHandlers.JSCtrl.postMessage(["request_clipboard",666,t]):window.webkit.messageHandlers.naviApp.request_clipboard({pid:666,paramsData:t}):"android"==this.$devicePlatform&&window.store.request_clipboard(666,t)},emptyBtn:function(){this.searchTxt="",this.loading=!0,this.isShowWrapperBg=!0,this.lists=[],this.$refs.searchInput.focus()},searchBtn:function(){if(0==this.searchTxt.length)return Object(p["a"])("请输入内容"),void this.$refs.searchInput.focus();this.$refs.searchInput.blur(),this.init()},init:function(){this.$refs.scrollContent.scrollTop=0,this.lists=[],this.page=1,this.rows=10,this.loading=!0,2==this.billCate?this.unevaluatedOrders(1):this.getAllOrders(1)},updateData:function(){this.page=this.pageNumber,this.rows=this.lists.length,2==this.billCate?this.unevaluatedOrders(1):this.getAllOrders(1)},unevaluatedOrders:function(e){var t=this,s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i={page:e,row:this.rows,ownerCode:this.$userInfo.OWNER_CODE,ownerPhone:this.$userInfo.PHONE,spuName:this.searchTxt};this.getEvaluatedGoods(i).then((function(e){0==e.resultCode&&(s?(t.lists=e.data,a?t.$store.commit("orderSearchListPageChange",{custPageNum:!0,pageNumber:2}):t.$store.commit("orderSearchListPageChange",{custPageNum:!0,pageNumber:t.page})):t.lists=t.lists.concat(e.data),t.lists.map((function(e){e.billCate2=2,t.goodsCount=0,e.shop.skuList.map((function(e){t.goodsCount+=e.skuCount,e.picUrl=e.spuPicUrl})),e.goodCount=t.goodsCount})),t.loading=!1,t.isLoading=!1,t.isNoNetwork=!1,t.finished=t.lists.length>=e.total)})).catch((function(e){t.lists=[],t.loading=!0,t.isLoading=!1,t.isNoNetwork=!0}))},getAllOrders:function(e){var t=this,s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i={page:e,row:this.rows,ownerCode:this.$userInfo.OWNER_CODE,billCate:this.billCate,ownerPhone:this.$userInfo.PHONE,spuName:this.searchTxt};this.getOrderSearchListGoods(i).then((function(e){console.log(e),0==e.resultCode&&(s?(t.lists=e.data,a?t.$store.commit("orderSearchListPageChange",{custPageNum:!0,pageNumber:2}):t.$store.commit("orderSearchListPageChange",{custPageNum:!0,pageNumber:t.page})):t.lists=t.lists.concat(e.data),t.lists.map((function(e){t.goodsCount=0,e.shop.skuList.map((function(e){t.goodsCount+=e.skuCount,e.picUrl=e.spuPicUrl})),e.goodCount=t.goodsCount;for(var s=0;s<e.shop.skuList.length;s++){var a=e.shop.skuList[s];if(null!=a.expressCompany&&(-1!=a.expressCompany.indexOf("达达")||-1!=a.expressCompany.indexOf("顺丰")))return e.hasExpressStatus=!0,void(e.expressCompany=a.expressCompany)}})),t.loading=!1,t.isLoading=!1,t.isNoNetwork=!1,t.isShowWrapperBg=!1,t.finished=t.lists.length>=e.total)})).catch((function(e){t.isShowWrapperBg=!1,t.lists=[],t.loading=!0,t.isLoading=!1,t.isNoNetwork=!0}))},onRefresh:function(){var e=this;setTimeout((function(){e.page=1,e.list=[],e.loading=!0,e.finished=!1,e.init()}),500)},setExpressInfo:function(e){console.log(e),this.expressInfo=e,this.isShowAction=!0,"other"==e.expressCode?this.isShowTitle=1:this.isShowTitle=0},onCancel:function(){this.isShowPhoneSelect=!1},setSelectOrderItem:function(e){this.selectOrderItem=e,this.isShowPhoneSelect=!0},callPhone:function(e){this.onCancel(),"phone"==this.$deciceType&&(window.location.href="tel:"+e)},callProperty:function(e){var t=this,s=navigator.userAgent,a=!!s.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);a?window.location.href="tel:"+e:d["a"].confirm({title:"拨打电话",message:e}).then((function(){"phone"==t.$deciceType&&(window.location.href="tel:"+e)})).catch((function(){d["a"].close}))},closePopup:function(){this.payWindowShow=!1},alipay:function(e){var t=this,s=e;0==e?s=1:1==e&&(s=0);var a={merOrderId:this.payParam.merOrderId,billNo:this.payParam.billNo,payType:s,channelId:void 0!=h["a"].getStorage("channelId",!1)?h["a"].getStorage("channelId",!1):null};Object(A["k"])(a).then((function(s){if(t.closePopup(!0),"0"!==s.resultCode)return d["a"].alert({message:s.msg}).then((function(){})),!1;if(2===e){t.closePopup(!0);var a=666,i={};i.tn=s.data.appPayRequest.tn,i.payMode=t.payParam.acpGatewayType;var o={data:{payData:JSON.stringify(i),schemesUrl:""},encoder:"base64",payType:"UnionPay"};"ios"==t.$devicePlatform?window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.JSCtrl?window.webkit.messageHandlers.JSCtrl.postMessage(["request_pay_online",a,o]):window.webkit.messageHandlers.unifypay.request_pay_online({pid:666,paramsData:o}):"android"==t.$devicePlatform&&window.store.request_pay_online(a,JSON.stringify(o))}else{t.payParam.payWay=e,t.closePopup(!0);var n=666;console.log(JSON.stringify(s.data.appPayRequest));var r={data:{payData:JSON.stringify(s.data.appPayRequest),schemesUrl:""},encoder:"base64"};console.log(r),1==e?r.payType="Alipay":0==e&&(r.payType="WeChatPay"),"ios"==t.$devicePlatform?window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.JSCtrl?window.webkit.messageHandlers.JSCtrl.postMessage(["request_pay_online",n,r]):window.webkit.messageHandlers.unifypay.request_pay_online({pid:666,paramsData:r}):"android"==t.$devicePlatform&&window.store.request_pay_online(n,JSON.stringify(r))}})).catch((function(e){t.closePopup(!0),d["a"].alert({message:"网络异常，请稍后重试！"}).then((function(){})),console.log(e)}))},payCallBack:function(){this.getOrderDetail()},getOrderDetail:function(){var e=this,t={billNo:this.payParam.billNo,ownerCode:this.$userInfo.OWNER_CODE};console.log("getOrderPayDetail"),Object(A["f"])(t).then((function(t){"0"==t.resultCode?"02"==t.data.billStatus?("pc"!=e.$devicePlatform&&window.broadcaster.removeEventListener("orderListPayBack",e.payCallBack),e.$router.push({name:"paySuccess",params:{orderData:t.data}}),console.log("支付成功")):console.log("支付失败"):console.log("查询订单状态失败")})).catch((function(e){}))},goToPay:function(e){this.payParam=e,1==this.payParam.IS_ALI_PAY?this.isAlipay=!0:this.isAlipay=!1,1==this.payParam.IS_WX_PAY?this.isWechart=!0:this.isWechart=!1,1==this.payParam.IS_ACP_PAY?this.isAcppay=!0:this.isAcppay=!1,""!=this.payParam.acpPayTag&&void 0!=this.payParam.acpPayTag&&null!=this.payParam.acpPayTag&&(this.acpPayTag=this.payParam.acpPayTag,this.isAcpPayTag=!0),this.payWindowShow=!0},goBack:function(){this.$router.go(-1)},onLoad:function(){this.rows=10,2==this.billCate?this.unevaluatedOrders(this.pageNumber,!1):this.getAllOrders(this.pageNumber,!1)},formSubmit:function(){return!1}}),beforeRouteLeave:function(e,t,s){this.orderListScrollTop=this.$refs.scrollContent.scrollTop,s()}},w=f,m=(s("6cbd"),s("2877")),v=Object(m["a"])(w,a,i,!1,null,"f1d05f4c",null);t["default"]=v.exports},ec64:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAiCAYAAAA6RwvCAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAZiS0dEAP8A/wD/oL2nkwAAAt5JREFUWMPVmEFP4lAQx+cNWDY2D9SmGBIM2cMmyxfw4Ml4aXrg+D5lT4aD4eKJ8CVWdE0PZDVV2OaptDBvD1KCCPQ1FZL9Jw1pM0x/nXbezDwGGSSEKDw+PnIi4ohYAoAiEe0BACBiDAATIhojYmjbduh53lTXN9MxarVa+6PR6FgpxZVSWv9hjCnGWFipVP602+2XXCBCCCMIgloURQdZIrcswzCGlmUNPM+LMoO4rluWUjaICPNAJEJEMk3z/urq6q82yNnZWRURa18BsCwiGvR6vYfl64VdQgAAMMZ4vV5Xvu/LDxFbPHFdt7xNiPlNEWuu65ZXggghDCllY9sQiaSUDSGE8QkkCILaV32YOiIiDIJgHn0EeF8nNFI0nB26SrWPouig1Wrtz0FGo9FxmtNut3vb7XZvTdP00whM0/QT+zSY5N4ohCgopbjuY3Y6nadNMKZp+p1O50nXn1KKCyEKhWq1WiGigxT7UrPZjPv9/isAQL/ff202m3Ecx5VNEI7jHMVxbKf4Zm9vb69IRFrRkFKeOI5ztC4yqyCklCc6vmdFFEu6YVwHkwcCAAARS+z8/PznZDLRhln19IvKCgEAUCwWx5j0E1m0HJk8EAAARLS3swUsTTjrrDJp3atJS+0NEDECwCQPhOM4R5uySVMTJKJxHggp5Ulaaqdp1ueiVv1IS9E8MIgYom3bIWNMpdiGOuvEKhhIqTWMMWXbdoie500ZY9pVNS1F16X2BpDQ87wpA3hvA56fn3+kRWX2q1sgtewPDw9/tdvtl3nzfHFx0cg7NmSVYRjD6+vre4CFDs2yrAEi0q4gEJEsyxok5x/GCdd1y2EYft8FCOf8bnHG+TTXbHucAFg923yaa3zfl/V6XTHGtLu2vBAAS3NNol6v98A5v/vKbwYRiXN+twpiZUQS3dzcjE9PT4dRFO1Np9NveSAMwxjatv378vJy7a7A/7EtsaxtbtT8A87nxsHXwaSnAAAARGVYSWZNTQAqAAAACAABh2kABAAAAAEAAAAaAAAAAAADoAEAAwAAAAEAAQAAoAIABAAAAAEAAAAioAMABAAAAAEAAAAiAAAAAAJ6oVQAAAAASUVORK5CYII="},f717:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAbCAYAAABvCO8sAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAZiS0dEAP8A/wD/oL2nkwAAA61JREFUSMetll1om1UYx///NyYNpCjExg/86FIUhzAnvnmTpuKai9FZSZUqQTa82kpvKoggTkGxCIJfFdGLIk5hXoijExErxapYpZamec/FGDrwIq0WVqdrhrUrtsl7Hi963hJn22Rt/lfn/J/D83uec96PQ9RQMpmMe56XBXAIQBvJW0UkQLIE4LyI/GBZ1reRSOSbiYmJSq183Aa0X2v9sog8XCuJ0RzJN2Ox2ImxsbHVuoGZTOaa5eXl10Tk6ar4HyS/JOmSXNBar4pIK8k4gIyIOFUpzgaDwcenp6fP1QSm0+louVz+VEQyxjpH8sVsNvvZ4OCg3qpqx3Hu1VoPADhmcq6QPOK67udbAnO5XGh2dvZrETlgrKG2trbjIyMjXp1bimQyecjzvI8A3ABgleSDrutObApMJBIfiMhRALAsq79QKLxfL6hatm3fTPJHEYmTXBKRfUqp3/y4ZSp7wIeRfGWnMABQSi1YltULYEVErgXwdnXcAgCt9ZCB/RSPx1/aKczXzMzMGQBPmWmv4zj+McGybfs+/ykTkas6sxo6CWDBNHR0A0jyUdPdhZ6enrEGwaCUKgMYNtPHuru7mwDAEpFOY45u9+jvRCRHzbB5cXFxL7B+hrcb85dGwgBARIpV47t84E3GW2g0UCn1F4BLAKC1jvrAJVNBc6OBuVwuAKAZAEhe9oEXjXFLo4Hz8/O3AQiahko+UBnjwM5Tb65KpXKPGQqAPLD+WnxlzPtTqdSNjQSKSL/ZvZ+VUhcBwAqHw6Mk/wZgeZ73XKNg6XT6DgAPmekJ37cmJycvAXjHVDSQSqXu3i0sl8sFyuXy8HpzLEWj0Y1vswUA4XB4CMB5AEHP876wbbtlN8BisfiqiBw002fHx8cv+7GN31MqlWqvVCrfAwgBONPU1PTI1NTUr1fb2dzc3KDW+gWst/eJ67qHq9dY/iCfz0+T7CNZAbB/bW1N2bZ9RERYD6yjo6O1WCx+58OMYo7jdFav+18yx3EOaq1PA7jOWGdJvhcKhUav7LirqytSKpU6AfQDyIpIwHR2SkSyACIkKySfKBQKpzYFAkB7e/uecrn8OoDcFaE/AfxO8h8R2QMg9p/qyQsAnnRd93QikXjLXMRA0hORY0qpk9tul23bKQB9JHtF5PotlmmSiuRwS0vLx/4VUUToOM67IjJg1gnJvrrOx1wd95G8U0RaAVQArAAoBgKBfD6fX9qm6DcAPGM6LdUF3K0cx3lea32c5If/AvS3kL0Dg8K5AAAARGVYSWZNTQAqAAAACAABh2kABAAAAAEAAAAaAAAAAAADoAEAAwAAAAEAAQAAoAIABAAAAAEAAAAcoAMABAAAAAEAAAAbAAAAANadKLIAAAAASUVORK5CYII="}}]);
//# sourceMappingURL=chunk-9aff8f5a.2020111117.js.map