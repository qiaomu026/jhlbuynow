(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-737a78c6"],{"15a3":function(e,t,s){},"68db":function(e,t,s){"use strict";var i=s("15a3"),n=s.n(i);n.a},c8d1:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"find-box",staticStyle:{height:"100%",display:"flex","flex-direction":"column",overflow:"hidden"}},[i("navigation-bar",{attrs:{pageName:"我的动态"},on:{onLeftClick:e.goBack}}),i("div",{ref:"refreshWrapper",attrs:{id:"refreshWrapper"},on:{click:function(t){e.replyInputShow=!1}}},[i("van-pull-refresh",{on:{refresh:function(t){return e.loadNotes(1)}},model:{value:e.isLoading,callback:function(t){e.isLoading=t},expression:"isLoading"}},[e.networkError||"0"!=e.themeCurrent?e._e():i("div",{staticClass:"wrapper"},[i("van-list",{attrs:{finished:e.finished,"finished-text":e.noteData.legnth>0?"无更多数据...":"","immediate-check":!1},on:{load:e.loadMoreNote},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[i("div",{staticClass:"banner",style:e.background},[i("div",{staticClass:"user-msg"},[i("p",[e._v(e._s(e.userInfo.OWNER_NICK_NAME))]),e.userInfo.PIC_URL?i("img",{staticClass:"user-avatar",attrs:{src:e.userInfo.PIC_URL,alt:""}}):i("img",{staticClass:"user-avatar",attrs:{src:s("51f7"),alt:""}})])]),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.noteData.length&&!e.loading,expression:"!noteData.length && !loading"}],staticClass:"no-list"},[i("img",{attrs:{src:s("1233"),alt:""}}),i("div",[e._v("暂时没有内容哦")])]),e._l(e.noteData,(function(t,n){return i("section",{key:n,ref:"noteId"+n,refInFor:!0,staticClass:"friend-message"},[t?i("div",{staticClass:"friend-msg"},[i("div",[t.headPic?i("img",{staticClass:"head",attrs:{src:t.headPic,alt:""}}):i("img",{staticClass:"head",attrs:{src:s("51f7"),alt:""}}),i("p",[e._v(e._s(t.nickName))])]),i("div",{staticClass:"func-handle"},[1==t.noteType?i("img",{staticClass:"property",attrs:{src:s("8841")}}):e._e()])]):e._e(),t?i("div",{staticClass:"message-container"},[i("p",[e._v(e._s(t.content))]),t.notePic?i("van-row",{staticClass:"message-img",class:{"big-image":1==t.notePic.length}},e._l(t.notePic,(function(s,n){return i("van-col",{directives:[{name:"show",rawName:"v-show",value:n<4,expression:"index < 4"}],key:n,attrs:{span:"6"}},[i("img",{key:s,attrs:{alt:"",src:s},on:{click:function(s){return e.preview(t.notePic,n)}}})])})),1):e._e()],1):e._e(),t?i("div",{staticClass:"handler-container"},[i("van-row",{attrs:{span:"8",type:"flex",justify:"space-between"}},[i("van-col",{staticClass:"desc"},[i("span",[e._v(e._s(t.createdTime))]),i("span",{on:{click:function(s){return e.deleteNote(t.noteCode)}}},[e._v("删除")])]),i("van-col",{staticClass:"handle-type",attrs:{span:"8"},on:{click:function(e){e.stopPropagation()}}},[i("span",{staticStyle:{"padding-left":"15px"},on:{click:function(s){e.isFirst&&e.setLike(t.noteCode,n,t.likerList)}}},[e.checkLike(t.likerList)?i("img",{attrs:{src:s("2a2a"),alt:""}}):i("img",{attrs:{src:s("43c7"),alt:""}}),t.likerList?i("span",[e._v(e._s(t.likerList.length))]):e._e()]),i("span",{on:{click:function(s){e.isFirst&&e.udClick(null,t.noteCode,n)}}},[i("img",{attrs:{src:s("5737"),alt:""}}),e._v("\n                    "+e._s(t.commentList?t.commentList.length:0)+"\n                  ")])])],1)],1):e._e(),t&&(t.likerList.length>0||t.commentList.length>0)?i("div",{staticClass:"reply-container"},[t.likerList.length>0?i("div",{staticClass:"goods-group"},[i("img",{attrs:{src:s("35b3"),alt:""}}),e._l(t.likerList,(function(s,n){return i("span",{key:n},[e._v("\n                  "+e._s(s.nickName)+"\n                  "),n!=t.likerList.length-1?i("i",[e._v(",")]):e._e()])}))],2):e._e(),t.commentList.length>0?i("div",{staticClass:"reply-group-box"},e._l(t.commentList,(function(a,o){return i("div",{key:o,staticClass:"reply-group",attrs:{type:"flex"}},[i("div",{staticClass:"reply-item",on:{click:function(e){e.stopPropagation()}}},[i("div",{staticClass:"reply-desc",on:{click:function(s){e.isFirst&&e.udClick(a,t.noteCode,n,!1)}}},[i("span",{staticClass:"reply-name"},[e._v("\n                        "+e._s(a.nickName)+"\n                        "),1==a.isProperty?i("img",{attrs:{src:s("8841")}}):e._e()]),a.returner?i("span",{staticClass:"result"},[e._v("回复")]):e._e(),i("span",{staticClass:"reply-name"},[e._v(e._s(a.returner))]),1==a.returnerType?i("img",{attrs:{src:s("8841")}}):e._e(),e._v(":\n                      "),i("span",[e._v(e._s(a.content))])]),i("div",{directives:[{name:"show",rawName:"v-show",value:a.evalPic&&a.evalPic.length>0,expression:"eva.evalPic && eva.evalPic.length > 0"}],staticClass:"eval-pic-box"},e._l(a.evalPic,(function(t,s){return i("div",{key:s},[i("img",{key:t,staticClass:"small-reply-img",attrs:{src:t,alt:""},on:{click:function(t){return e.preview(a.evalPic,s)}}})])})),0)])])})),0):e._e(),i("van-row")],1):e._e()])})),i("div",{directives:[{name:"show",rawName:"v-show",value:e.replyInputShow,expression:"replyInputShow"}],staticStyle:{height:"600px",width:"100%",background:"#ffffff"}})],2)],1),e.networkError||"1"!=e.themeCurrent?e._e():i("div",{staticClass:"wrapper-l"},[i("van-list",{attrs:{finished:e.finished,"finished-text":e.noteData.legnth>0?"无更多数据...":"","immediate-check":!1},on:{load:e.loadMoreNote},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[i("div",{staticClass:"banner-l",style:e.background},[i("div",{staticClass:"user-msg-l"},[i("p",[e._v(e._s(e.userInfo.OWNER_NICK_NAME))]),e.userInfo.PIC_URL?i("img",{staticClass:"user-avatar-l",attrs:{src:e.userInfo.PIC_URL,alt:""}}):i("img",{staticClass:"user-avatar-l",attrs:{src:s("51f7"),alt:""}})])]),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.noteData.length&&!e.loading,expression:"!noteData.length && !loading"}],staticClass:"no-list-l"},[i("img",{attrs:{src:s("1233"),alt:""}}),i("div",[e._v("暂时没有内容哦")])]),e._l(e.noteData,(function(t,n){return i("section",{key:n,ref:"noteId"+n,refInFor:!0,staticClass:"friend-message-l"},[t?i("div",{staticClass:"friend-msg-l"},[i("div",[t.headPic?i("img",{staticClass:"head-l",attrs:{src:t.headPic,alt:""}}):i("img",{staticClass:"head-l",attrs:{src:s("51f7"),alt:""}}),i("p",[e._v(e._s(t.nickName))])]),i("div",{staticClass:"func-handle-l"},[1==t.noteType?i("img",{staticClass:"property-l",attrs:{src:s("8841")}}):e._e()])]):e._e(),t?i("div",{staticClass:"message-container-l"},[i("p",[e._v(e._s(t.content))]),t.notePic?i("van-row",{staticClass:"message-img-l",class:{"big-image":1==t.notePic.length}},e._l(t.notePic,(function(s,n){return i("van-col",{directives:[{name:"show",rawName:"v-show",value:n<4,expression:"index < 4"}],key:n,attrs:{span:"6"}},[i("img",{key:s,attrs:{alt:"",src:s},on:{click:function(s){return e.preview(t.notePic,n)}}})])})),1):e._e()],1):e._e(),t?i("div",{staticClass:"handler-container-l"},[i("van-row",{attrs:{span:"8",type:"flex",justify:"space-between"}},[i("van-col",{staticClass:"desc-l"},[i("span",[e._v(e._s(t.createdTime))]),i("span",{on:{click:function(s){return e.deleteNote(t.noteCode)}}},[e._v("删除")])]),i("van-col",{staticClass:"handle-type-l",attrs:{span:"8"},on:{click:function(e){e.stopPropagation()}}},[i("span",{staticStyle:{"padding-left":"15px"},on:{click:function(s){e.isFirst&&e.setLike(t.noteCode,n,t.likerList)}}},[e.checkLike(t.likerList)?i("img",{attrs:{src:s("2a2a"),alt:""}}):i("img",{attrs:{src:s("43c7"),alt:""}}),t.likerList?i("span",[e._v(e._s(t.likerList.length))]):e._e()]),i("span",{on:{click:function(s){e.isFirst&&e.udClick(null,t.noteCode,n)}}},[i("img",{attrs:{src:s("5737"),alt:""}}),e._v("\n                    "+e._s(t.commentList?t.commentList.length:0)+"\n                  ")])])],1)],1):e._e(),t&&(t.likerList.length>0||t.commentList.length>0)?i("div",{staticClass:"reply-container-l"},[t.likerList.length>0?i("div",{staticClass:"goods-group-l"},[i("img",{attrs:{src:s("35b3"),alt:""}}),e._l(t.likerList,(function(s,n){return i("span",{key:n},[e._v("\n                  "+e._s(s.nickName)+"\n                  "),n!=t.likerList.length-1?i("i",[e._v(",")]):e._e()])}))],2):e._e(),t.commentList.length>0?i("div",{staticClass:"reply-group-box-l"},e._l(t.commentList,(function(a,o){return i("div",{key:o,staticClass:"reply-group-l",attrs:{type:"flex"}},[i("div",{staticClass:"reply-item-l",on:{click:function(e){e.stopPropagation()}}},[i("div",{staticClass:"reply-desc-l",on:{click:function(s){e.isFirst&&e.udClick(a,t.noteCode,n,!1)}}},[i("span",{staticClass:"reply-name-l"},[e._v("\n                        "+e._s(a.nickName)+"\n                        "),1==a.isProperty?i("img",{attrs:{src:s("8841")}}):e._e()]),a.returner?i("span",{staticClass:"result-l"},[e._v("回复")]):e._e(),i("span",{staticClass:"reply-name-l"},[e._v(e._s(a.returner))]),1==a.returnerType?i("img",{attrs:{src:s("8841")}}):e._e(),e._v(":\n                      "),i("span",[e._v(e._s(a.content))])]),i("div",{directives:[{name:"show",rawName:"v-show",value:a.evalPic&&a.evalPic.length>0,expression:"eva.evalPic && eva.evalPic.length > 0"}],staticClass:"eval-pic-box-l"},e._l(a.evalPic,(function(t,s){return i("div",{key:s},[i("img",{key:t,staticClass:"small-reply-img-l",attrs:{src:t,alt:""},on:{click:function(t){return e.preview(a.evalPic,s)}}})])})),0)])])})),0):e._e(),i("van-row")],1):e._e()])})),i("div",{directives:[{name:"show",rawName:"v-show",value:e.replyInputShow,expression:"replyInputShow"}],staticStyle:{height:"600px",width:"100%",background:"#ffffff"}})],2)],1),e.networkError?i("div",{staticStyle:{height:"300px","padding-top":"50px"}},[i("NetworkError")],1):e._e()]),i("van-action-sheet",{style:{color:"#FB5768"},attrs:{actions:e.deleteActions,"cancel-text":"取消",round:"","close-on-click-action":"","safe-area-inset-bottom":""},on:{select:e.delCommentAction},model:{value:e.deleteShow,callback:function(t){e.deleteShow=t},expression:"deleteShow"}})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:e.replyInputShow,expression:"replyInputShow"}],ref:"myReply",staticClass:"reply-wrapper"},[i("div",{staticClass:"reply-box"},[i("div",{staticClass:"box"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.replyValue,expression:"replyValue"}],ref:"myInput",attrs:{type:"text",placeholder:"reply"==e.commitType&&e.replys?"回复 "+e.replys.nickName+":":"写下你此刻的想法",autofocus:"",maxlength:"200"},domProps:{value:e.replyValue},on:{input:function(t){t.target.composing||(e.replyValue=t.target.value)}}}),i("van-button",{attrs:{slot:"button",size:"small",type:"primary",color:"#fb5768"},on:{click:e.submitInput},slot:"button"},[e._v("发送")])],1)])]),i("Preview",{ref:"myPreview",attrs:{images:e.images},on:{indexChange:e.indexChange}})],1)},n=[],a=(s("8e6e"),s("456d"),s("ac6a"),s("7514"),s("bd86")),o=(s("da6f"),s("2f62")),r=s("2241"),c=s("e036"),l=(s("387e"),s("dcbb")),u=s("0aa6");function d(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function h(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?d(s,!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):d(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var p={name:"Findpage",created:function(){},mounted:function(){this.themeCurrent=this.$curTheme,this.userInfo=this.$userInfo,this.isFirst=!0,this.clickNum=1,this.loadNotes(1),window.addEventListener("native.keyboardshow",this.keyboardshow),window.addEventListener("native.keyboardhide",this.keyboardhide),this.watcherScroll()},destroyed:function(){window.removeEventListener("native.keyboardshow",this.keyboardshow),window.removeEventListener("native.keyboardhide",this.keyboardhide)},data:function(){var e;return e={selections:[],deleteActions:[{name:"删除"}],reportActions:[{name:"举报"}],isFirst:!0,commitType:"",replys:null,replyValue:"",replyInputShow:!1,deleteShow:!1,userInfo:"",loading:!1,finished:!1,commentNoteCode:"",isLoading:!1,noteData:[],background:{backgroundImage:"url("+s("62ea")+") ",backgroundPosition:"center center",backgroundRepeat:"no-repeat",backgroundSize:"cover"},images:[],networkError:!1},Object(a["a"])(e,"isFirst",!0),Object(a["a"])(e,"clickNum",1),Object(a["a"])(e,"themeCurrent",0),e},watch:{replyInputShow:function(e,t){1==e?this.$nextTick((function(){this.$refs.myInput.focus()})):this.$nextTick((function(){this.$refs.myInput.blur()}))}},computed:h({},Object(o["c"])({pageNumber:function(e){return e.find.pageNumber}})),components:{Preview:c["a"],NetworkError:l["a"],NavigationBar:u["a"]},methods:h({},Object(o["b"])(["getNotesAction","saveLikeAction","delNoteDataAction","delCommentInforAction","addCommentAction","saveReplyAction","getOwnerNotesAction","getNoteDetailAction","getCountAction"]),{keyboardshow:function(e){var t=this;this.$refs.myReply.style.bottom=e.keyboardHeight+"px",this.$nextTick((function(){console.log("scrollTop");var e=t.$refs["noteId"+t.noteIndex][0].offsetTop;t.$refs.refreshWrapper.scrollTop=e})),this.replyInputShow=!0},keyboardhide:function(e){this.replyInputShow=!1,this.$refs.myReply.style.bottom="0"},watcherScroll:function(){var e=this;document.querySelector(".find-box").addEventListener("touchmove",(function(t){e.replyInputShow=!1}),{passive:!1})},goBack:function(){this.$store.state.preview.previewId&&this.$store.dispatch("setPreviewId",""),this.$router.go(-1)},loadNotes:function(e){var t=this,s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.loading=!0,this.getOwnerNotesAction({page:e,rows:10,areaCode:this.userInfo.AREA_CODE,ownerCode:this.userInfo.OWNER_CODE}).then((function(e){t.networkError=!1,s&&(t.noteData=[],t.$store.commit("pageNumChange",{custPageNum:!0,pageNumber:1})),(0==e.data.list.length||e.data.isLastPage)&&(t.finished=!0),t.loading=!1,t.isLoading=!1,e.data.list.forEach((function(e){t.noteData.push(e)}))})).catch((function(s){t.finished=!0,t.loading=!1,t.isLoading=!1,1==e&&(t.networkError=!0)}))},udClick:function(e,t,s){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];console.log(e),this.comitNoteCode=t,i?(this.commitType="comment",this.replyInputShow=!0,this.noteIndex=s):(this.commitType="reply",this.$userInfo.OWNER_CODE===e.userCode?(this.noteIndex=s,this.deleteShow=!0,this.replyNoteIndex=s,this.delActionObj={noteCode:t,evalCode:e.evalCode}):(this.replyInputShow=!0,this.replys={nickName:e.nickName,evalCode:e.evalCode,type:e.isProperty},this.noteIndex=s))},replyAction:function(){var e=this;this.isFirst=!1;var t={content:this.replyValue,evalCode:this.replys.evalCode,isProperty:0,userCode:this.$userInfo.OWNER_CODE};this.saveReplyAction(t).then((function(){e.isFirst=!0,e.clickNum=1,e.replyValue="",e.updateAssignNote(e.comitNoteCode)})).catch((function(t){e.isFirst||1!=e.clickNum?(e.noteData[e.noteIndex].commentList.splice(e.noteData[e.noteIndex].commentList.length-1,1),e.isFirst=!0,e.clickNum=1,e.$toast(t)):(e.clickNum=e.clickNum+1,e.replyAction())}))},delCommentAction:function(){var e=this;r["a"].confirm({title:"提示",message:"确定删除此条评论？"}).then((function(){var t=e.delActionObj,s=t.noteCode,i=t.evalCode;e.delCommentInforAction({noteCode:s,evalCode:i}).then((function(){var t=0;e.noteData[e.noteIndex].commentList.forEach((function(e,s){e.evalCode==i&&(t=s)})),console.log(t),e.noteData[e.noteIndex].commentList.splice(t,1)})).catch((function(t){e.$toast(t)}))})).catch((function(){}))},submitInput:function(){if(0!=this.replyValue.length){if("reply"==this.commitType){var e={userCode:this.$userInfo.OWNER_CODE,nickName:this.$userInfo.OWNER_NICK_NAME,content:this.replyValue,isProperty:0,returner:this.replys.nickName,returnerType:this.replys.type};this.noteData[this.noteIndex].commentList.push(e),this.replyAction()}else{e={userCode:this.$userInfo.OWNER_CODE,nickName:this.$userInfo.OWNER_NICK_NAME,content:this.replyValue,isProperty:0,returner:null,returnerType:null};this.noteData[this.noteIndex].commentList.push(e),this.addComments()}this.replyInputShow=!1}},addComments:function(){var e=this;this.isFirst=!1,this.addCommentAction({content:this.replyValue,isProperty:0,noteCode:this.comitNoteCode,userCode:this.$userInfo.OWNER_CODE}).then((function(){e.isFirst=!0,e.clickNum=1,e.replyValue="",e.updateAssignNote(e.comitNoteCode)})).catch((function(t){e.isFirst||1!=e.clickNum?(e.noteData[e.noteIndex].commentList.splice(e.noteData[e.noteIndex].commentList.length-1,1),e.isFirst=!0,e.clickNum=1,e.$toast(t)):(e.clickNum=e.clickNum+1,e.addComments())}))},updateAssignNote:function(e){var t=this;this.getNoteDetailAction({noteCode:e}).then((function(s){var i=0;t.noteData.forEach((function(t,s){t.noteCode==e&&(i=s)})),t.noteData[i].likerList=s.data.likerList,t.noteData[i].commentList=s.data.commentList})).catch((function(e){t.$toast(e)}))},onChange:function(e){this.activeIndex=e},preview:function(e,t){this.images=e,this.indexChange(t),this.$refs.myPreview.setIndex(t),this.$refs.myPreview.setIsShowPreview(!0),this.$store.dispatch("setPreviewId",this.$refs.myPreview)},indexChange:function(e){var t=this,s=this.images[e];if(-1!=s.lastIndexOf("@")){var i=s.lastIndexOf("."),n=s.lastIndexOf("@"),a=s.substring(0,n)+s.substring(i,s.length),o=new Image;o.onload=function(){t.$set(t.images,e,a)},o.src=a}},setLike:function(e,t,s){var i=this;this.isFirst=!1;var n={concemflag:1,isProperty:0,noteCode:e,userCode:this.$userInfo.OWNER_CODE};if(n.concemflag=s&&s.some((function(e){return e.userCode==n.userCode}))?0:1,n.concemflag)this.noteData[t].likerList.push({userCode:this.$userInfo.OWNER_CODE,nickName:this.$userInfo.OWNER_NICK_NAME});else{var a=0;this.noteData[t].likerList.forEach((function(e,t){e.userCode==i.$userInfo.OWNER_CODE&&(a=t)})),a>=0&&this.noteData[t].likerList.splice(a,1)}this.saveLike(n,t)},saveLike:function(e,t){var s=this;this.isFirst=!1,this.saveLikeAction(e).then((function(e){s.isFirst=!0,s.clickNum=1})).catch((function(i){if(s.isFirst||1!=s.clickNum){if(s.isFirst=!0,s.clickNum=1,e.concemflag){var n=-1;s.noteData[t].likerList.forEach((function(e,t){e.userCode==s.$userInfo.OWNER_CODE&&(n=t)})),n>=0&&s.noteData[t].likerList.splice(n,1)}else s.noteData[t].likerList.push({userCode:s.$userInfo.OWNER_CODE,nickName:s.$userInfo.OWNER_NICK_NAME});s.$toast(i)}else s.clickNum=s.clickNum+1,s.saveLike(e,t)}))},deleteNote:function(e){var t=this;r["a"].confirm({title:"提示",message:"确定删除此贴？"}).then((function(){t.delNoteDataAction(e).then((function(e){t.loadNotes(1)})).catch((function(e){console.log(e),t.$toast(e)}))}))},loadMoreNote:function(){this.loadNotes(this.pageNumber,!1)},checkLike:function(e){var t=this;return!!e&&e.some((function(e){return e.userCode==t.userInfo.OWNER_CODE}))}})},m=p,v=(s("68db"),s("2877")),f=Object(v["a"])(m,i,n,!1,null,"d10a2eb8",null);t["default"]=f.exports}}]);
//# sourceMappingURL=chunk-737a78c6.a1f88ab2.js.map