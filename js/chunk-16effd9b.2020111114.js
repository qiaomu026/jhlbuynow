(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-16effd9b"],{"12e3":function(t,e,i){t.exports=i.p+"img/bg_coupon_used.2de2ae70.png"},2736:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAMCAYAAABm+U3GAAAAAXNSR0IArs4c6QAAAQ5JREFUOBGdkdtOwkAURVvBAOUS/QN+iw8zMeGBxERRDMgTUIw0ioGY+Dc+8jCuTeYkttJS2Mnqmc7ZZ/cyQVBCzrk2rGAD1yVGjlsIasEnmL5ZXB2fLHAQ0IS1T3yg3vj1F7VTMJrfYlCh7z7okVqBEG793pbazk840GEgggSkJ6iYjbXC+yDpF7WsV1gxNuANpBFUswPsKXwA0gc0s57UPQaFvoL0DP9CbYDeBdyBlEBkvVSlUYcYpDHkhtogHoXfg6SvbFhvX9mowQKkCVymDAU3eHWoOlxpCfW/obP9tnMv1NKh9jxmqqBfJ82hFnDRG0pTODk0E25ZE51uTPMHemEY7sx4TvUvNmS2+wvUoFm5yP6K7gAAAABJRU5ErkJggg=="},"5f3a":function(t,e,i){},"83c4":function(t,e,i){t.exports=i.p+"img/bg_coupon_expired.9b8dcd64.png"},"8c6a":function(t,e,i){t.exports=i.p+"img/no_coupon_img.a94be2ee.png"},"8c7b":function(t,e,i){"use strict";var s=i("9a1d"),o=i.n(s);o.a},"8ef4":function(t,e,i){"use strict";var s=i("5f3a"),o=i.n(s);o.a},"9a1d":function(t,e,i){},"9fe5":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"myOrderList"},[i("navigation-bar",{staticClass:"title",style:t.setTopHeight,attrs:{pageName:"我的优惠券"},on:{onLeftClick:function(e){return t.goToBack()}}}),i("div",{staticClass:"tabTitle",class:{themeL:t.bindThemeL}},[i("van-tabs",{attrs:{color:"#17B7BD","line-width":"0.67rem","line-height":"0.08rem"},on:{click:t.controlTab},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},t._l(t.tabTitle,(function(t,e){return i("van-tab",{key:e,attrs:{title:t}})})),1)],1),i("van-swipe",{ref:"swipe",staticClass:"orderSwipe",attrs:{"show-indicators":!1,"initial-swipe":0,loop:!1},on:{change:t.controlSwipe}},[i("van-swipe-item",{key:0},[i("couponCard",{ref:"mychild0",attrs:{mgChildKey:"01",isActKey:"0"+(t.active+1)}})],1),i("van-swipe-item",{key:1},[i("couponCard",{ref:"mychild1",attrs:{mgChildKey:"02",isActKey:"0"+(t.active+1)}})],1),i("van-swipe-item",{key:2},[i("couponCard",{ref:"mychild2",attrs:{mgChildKey:"03",isActKey:"0"+(t.active+1)}})],1)],1)],1)},o=[],a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"couponcard"},[i("van-pull-refresh",{on:{refresh:function(e){return t.onRefresh(t.mgChildKey)}},model:{value:t.isRefresh,callback:function(e){t.isRefresh=e},expression:"isRefresh"}},[i("van-list",{style:{"min-height":t.listMinHeight+"px"},attrs:{finished:t.finished,"error-text":"请求失败，刷新重新加载","loading-text":"","immediate-check":!1},on:{load:function(e){return t.onLoad(t.mgChildKey)}},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[t._l(t.lists,(function(e,s){return 0==t.isLists?i("div",{staticClass:"commonCard"},[i("div",{staticClass:"backPic",style:{backgroundImage:"url("+("01"==t.mgChildKey?t.img.waitUsed:"02"==t.mgChildKey?t.img.alreadyUsed:t.img.outDate)+")"}},[i("div",{staticClass:"leftPoint"},[i("div",{staticClass:"couponDetail"},[i("div",[t._v("￥")]),i("div",{staticClass:"couponTotal"},[t._v(t._s(e.couponTotal))])]),i("div",{staticClass:"scopeType",on:{click:function(e){return t.showScope(s)}}},[i("span",[t._v("适用范围")]),i("img",{attrs:{src:0==e.ifShowScope?t.img.filterDown:t.img.filterUp}})])]),i("div",{staticClass:"rightPoint"},[i("div",{staticClass:"shopName"},[t._v(t._s(e.shopName))]),i("div",{staticClass:"couponLimit"},[t._v(t._s(e.name))]),i("div",{staticClass:"toUse"},[i("div",{staticClass:"useDate"},[t._v(t._s(e.effBeginDay)+"-"+t._s(e.effEndDay))]),"01"==t.mgChildKey?i("div",{staticClass:"toUsebtn",on:{click:function(i){return t.useCoupon(e.shopCode)}}},[t._v("去使用")]):t._e()])])]),1==e.ifShowScope?i("div",{staticClass:"scopeInfo"},[t._v("全品类通用")]):t._e()]):t._e()})),1==t.isLists?i("div",{staticClass:"noList",class:{noListThemeL:t.bindThemeL}},[i("img",{attrs:{src:t.img.noList}}),i("div",[t._v("暂无优惠券")])]):t._e()],2)],1)],1)},n=[],c=i("6c90"),l=(i("2f62"),{name:"couponCard",props:["mgChildKey","isActKey"],data:function(){return{lists:[],page:1,totalPages:5,loading:!1,finished:!1,isLists:!1,scopeType:[],isRefresh:!1,img:{waitUsed:i("e1ad"),alreadyUsed:i("12e3"),outDate:i("83c4"),filterDown:i("cb1c"),filterUp:i("2736"),noList:i("8c6a")},listMinHeight:document.body.clientHeight-this.$stbHeight-118,bindThemeL:0!=this.$curTheme}},methods:{getCouponList:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this;console.log("当前页数"+i.page+"当前列表"+i.mgChildKey);var s={page:i.page,rows:10,ownerCode:i.$userInfo.OWNER_CODE,status:i.mgChildKey};Object(c["k"])(s).then((function(t){i.totalPages=t.pages,console.log("没有请求数据吗"),t.data.couponScopeList.map((function(t){t.ifShowScope=!1})),0==t.total?(i.isLists=!0,i.finished=!0,i.loading=!1,i.isRefresh=!1):(i.lists=e?t.data.couponScopeList:i.lists.concat(t.data.couponScopeList),i.loading=!1,i.isLists=!1,i.isRefresh=!1,console.log("是否结束"+i.finished))}))},showScope:function(t){var e=this;console.log(t);var i=e.lists[t].ifShowScope;e.lists[t].ifShowScope=!i},emptyData:function(){var t=[];t.push(this.lists[0]),this.lists=[]},onLoad:function(t){console.log("onLoad加载数据！");var e=this;e.mgChildKey==e.isActKey&&(e.page+=1,e.totalPages>=e.page?(e.getCouponList(t,!1),e.finished=e.page>e.totalPages):(e.totalPages<e.page||""!=e.lists)&&(console.log("总页数小于等于当前页数了"),e.loading=!1,e.isRefresh=!1))},onRefresh:function(t){this.page=1,this.getCouponList(t,!0)},useCoupon:function(t){this.$router.push({name:"shopPage",params:{shopCode:t}})}}}),r=l,d=(i("8c7b"),i("2877")),p=Object(d["a"])(r,a,n,!1,null,"1b672fcc",null),h=p.exports,g=i("0aa6"),u={data:function(){return{tabTitle:["待使用","已使用","已过期"],active:0,key:0,isPushLoading:!1,setTopHeight:{"padding-top":this.$stbHeight+"px"},bindThemeL:0!=this.$curTheme}},components:{couponCard:h,NavigationBar:g["a"]},methods:{controlTab:function(t){var e=this;e.key=t,e.$refs.swipe.swipeTo(t),window.scrollTo(0,0)},controlSwipe:function(t){var e=this;e.active=t,"0"==t?(this.$refs.mychild0.onRefresh("1"),this.$refs.mychild1.emptyData(),this.$refs.mychild2.emptyData()):"1"==t?(this.$refs.mychild1.onRefresh("2"),this.$refs.mychild0.emptyData(),this.$refs.mychild2.emptyData()):(this.$refs.mychild2.onRefresh("3"),this.$refs.mychild1.emptyData(),this.$refs.mychild0.emptyData())},goToBack:function(){var t=this.$setRouterIndex();t&&this.$router.go(-1)}},mounted:function(){this.controlSwipe("0")}},f=u,m=(i("8ef4"),Object(d["a"])(f,s,o,!1,null,"2c6ffdd8",null));e["default"]=m.exports},cb1c:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAMCAYAAABm+U3GAAAAAXNSR0IArs4c6QAAAQVJREFUOBGlkd1KAlEURuc0U47zQ/l4PZggdBEEalka3lgpJZUgwjyE7+HFaX1juwtRmcYPFvuc2Wev+XPe+yIIgjVcO+c21NrBdcFwD/KAzQgU1aiuldlzGIMykrgBL9qRR/i3nBlJn0GZQKN8QBYxTEG5h7Dqk3NWUnvrV9ZbqQm40IR3ULpwZr1DlTMRDEF5g3jvWRoJzEG5g4NyepI+gTKD/VK7EwdS+ALlFpz1rHJN0gEoesum9Y5WDmawAOUG/uSsQ3gAZQ7JUdluk4EclqB0wIGk+rnKJ6S7c5X2DF7CCpQ29MuV99/UelK7M4IrKH6FKvpEmfVPqohaoM/yAXkV2Q+jmVmqKd7MGwAAAABJRU5ErkJggg=="},e1ad:function(t,e,i){t.exports=i.p+"img/mall_bg_coupon_unaccalimed.23297250.png"}}]);
//# sourceMappingURL=chunk-16effd9b.2020111114.js.map