(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-005188cd"],{"1e96":function(t,s){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAgCAYAAAAffCjxAAAAAXNSR0IArs4c6QAAASVJREFUSA2l1bEOgjAQAFBbFgZ+gOBmwheQaOJCYlyd/Bp3E3/EycTB1YVE/QkHZYLJjcEEA94pkIIC17YJ0Gu4F0raKxtoNM/zpoyxYZZle0PVAWSV5/kWriXn/MFVoAJZi7lMDCj9JgJTO1qWtZCC2pAgCJ5kqAvBmZCgPoQEUZBeiIp0QjJIKySL/IVUkB9IFalBOkgF6SIfCJAp7OAzBtjKvYPL/jtCu3OsJ41XL7II5hu2bV8Bm0B/VIC+4zhpFEWnIiY9jDiOM9d1d2majgVsJot9KmQYhi9drCq1ulgF4Y/QwWqQDvYDqWJ/IRWsFZLFOiEZrBeiYiSIgpGOI4TK5vu+mSTJASrGvByDs39B/qIyqWXR3qQhBAUMZ3Q3TXPzBkjOOFGpZ2GSAAAAAElFTkSuQmCC"},2736:function(t,s){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAMCAYAAABm+U3GAAAAAXNSR0IArs4c6QAAAQ5JREFUOBGdkdtOwkAURVvBAOUS/QN+iw8zMeGBxERRDMgTUIw0ioGY+Dc+8jCuTeYkttJS2Mnqmc7ZZ/cyQVBCzrk2rGAD1yVGjlsIasEnmL5ZXB2fLHAQ0IS1T3yg3vj1F7VTMJrfYlCh7z7okVqBEG793pbazk840GEgggSkJ6iYjbXC+yDpF7WsV1gxNuANpBFUswPsKXwA0gc0s57UPQaFvoL0DP9CbYDeBdyBlEBkvVSlUYcYpDHkhtogHoXfg6SvbFhvX9mowQKkCVymDAU3eHWoOlxpCfW/obP9tnMv1NKh9jxmqqBfJ82hFnDRG0pTODk0E25ZE51uTPMHemEY7sx4TvUvNmS2+wvUoFm5yP6K7gAAAABJRU5ErkJggg=="},"39d9":function(t,s,o){"use strict";o.d(s,"a",(function(){return l}));o("4917"),o("a481");var e=o("5863"),i=o("5c36"),n=o("2241"),a=o("2f62"),r=o("e036"),c=o("5d2d"),l={name:"goodsDetail",data:function(){return{listLoadingBol:!1,lists:{spuPicUrlList:[]},shopInfo:{},isShowPlaceHolder:!1,skuList:[],skuNum:[],collectCode:[],cutOffTimeStr:[],getPickupList:[],unionPayActList:[],fullReductionList:[],packList:[],icon:{collection:o("6a9a"),afterCollectionBg:o("4e2e"),collectionBg:o("ebdc"),afterCollection:o("844d"),shoppingCartBg:o("fedd"),shoppingCart:o("1094"),arrowBg:o("f295"),arrow:o("8d7d"),share:o("f6a1"),topClick:o("f21d"),callShop:o("f707"),shop:o("9335"),evaluate:o("d3b8"),shareChart:o("9430"),shareFriends:o("016c"),like:o("b9b4"),noLike:o("4783"),defaultXWJPic:o("8eda")},show:{normalTitle:!0,activeTitle:!1,titShow:0,weChartShare:!1,couponList:!1,callShop:!1,afterCollect:!1,beforeCollect:!0,firstEvaluate:!1},evalInfo:{evalPicUrl:{}},num:1,detailDescribe:[],ownerPicUrl:o("cf9f"),cartNum:0,goodsNum:0,shareUrl:"",scroll:0,images:[],setTopHeight:{"padding-top":this.$stbHeight+"px"},bottomHeight:0,swipePic:0,ifNetworkError:!1,spuCode:"",isShowTopBtn:!1,bannerChangeBool:!1,productImgs:[],scrollTimerId:0,hasStoragePermission:!1,isShowPreview:!1,defaultImg:'this.src="'+o("8eda")+'"'}},components:{Preview:r["a"]},created:function(){var t=this;this.$nextTick((function(){t.bottomHeight=t.$footBarHeight+55}))},methods:{goToUnionPayActivity:function(t,s){this.$router.push({name:"activityTemplate",params:{templateId:s}})},goToreducedPackaging:function(t,s){this.$router.push({name:"reducedPackaging",params:{typeVal:t,activityId:s}})},productImgDownload:function(){var t=0,s=this;s.lists.spuPicUrlList.map((function(o,e){var i=new Image;i.onload=function(){t+=1,s.lists.spuPicUrlList.length==t&&(s.productImgs=s.lists.spuPicUrlList)},i.src=s.lists.spuPicUrlList[e]}))},bannerChange:function(){var t=this;this.bannerChangeBool=!0,setTimeout((function(){t.bannerChangeBool=!1}),500)},goTopBtn:function(){this.$refs.goodsPageScroll.scrollTop=0},bannerPreview:function(t,s){var o=this;this.bannerChangeBool||(this.images=t,this.isShowPreview=!0,this.$nextTick((function(){o.$refs.myPreview.setIndex(s),o.$refs.myPreview.setIsShowPreview(!0),o.$store.dispatch("setPreviewId",o.$refs.myPreview)})),console.log("-------------"))},preview:function(t,s){var o=this,e=[];t.map((function(t){e.push(t.picUrl)})),this.images=e,this.isShowPreview=!0,this.$nextTick((function(){o.$refs.myPreview.setIndex(s),o.$refs.myPreview.setIsShowPreview(!0),o.$store.dispatch("setPreviewId",o.$refs.myPreview)}))},init:function(){var t=this;t.listLoadingBol=!1;var s={spuCode:t.spuCode};Object(e["l"])(s).then((function(s){if("0"==s.resultCode){t.listLoadingBol=!0,t.lists=s.data,t.lists.cutOffTimeStr&&t.lists.cutOffTimeStr.indexOf("<br/>")&&(t.lists.cutOffTimeStr=t.lists.cutOffTimeStr.replace(/<br\/>/g,"\n")),t.productImgDownload(),t.queryPickupList(),t.ifNetworkError=!1,s.data.detailDescribe=s.data.detailDescribe.replace(/xwjfile.juhaolian.cn/g,"xwjfilea.juhaolian.cn"),t.skuList=s.data.skuList[0],t.evalInfo=s.data.evalInfo;var o=s.data.evalInfo;null==o?t.show.firstEvaluate=!1:(console.log("有第一条评价"),t.show.firstEvaluate=!0),t.getShopInfo(t.lists.shopCode)}else n["a"].alert({message:s.msg}).then((function(){t.$router.go(-1)}))})).catch((function(s){t.$toast("网络异常，请稍后重试"),t.ifNetworkError=!0,t.lists={priceLine:""},t.productImgs=[t.icon.defaultXWJPic],t.skuList={skuPrice:0},console.log(JSON.stringify(t.lists)+"异常数据")}))},queryPickupList:function(){var t=this,s={ownerCode:this.$userInfo.OWNER_CODE,areaCode:this.$userInfo.AREA_CODE,shopCode:this.lists.shopCode,skuNo:this.lists.skuList[0].skuNo,spuCode:this.lists.spuCode};Object(i["H"])(s).then((function(s){0==s.resultCode&&(t.getPickupList=s.data.couponList,s.data.act[1]?t.fullReductionList=s.data.act[1]:t.fullReductionList=[],s.data.act[2]?t.packList=s.data.act[2]:t.packList=[],s.data.act[3]?t.unionPayActList=s.data.act[3]:t.unionPayActList=[])})).catch((function(t){}))},getShopInfo:function(t){var s=this;console.log("店铺详情==========>");var o={shopCode:t,areaCode:this.$userInfo.AREA_CODE};Object(e["m"])(o).then((function(t){s.shopInfo=t.data}))},handleScroll:function(){var t=this,s=this;s.$nextTick((function(){var o=s.$refs.goodsPageScroll.scrollTop,e=s.$refs.titChange.offsetTop-55,i=s.$refs.detailChange.offsetTop-55;console.log("==========>>>>>>>>>>"+o,e,i),o>t.$stbHeight?(s.show.activeTitle=!0,s.show.normalTitle=!1,s.show.titShow=o>=i?2:o>=e?1:0,s.isShowTopBtn=!0):(s.show.activeTitle=!1,s.show.normalTitle=!0,s.isShowTopBtn=!1)}))},goodsChange:function(){this.$refs.goodsPageScroll.scrollTop=0},titChange:function(){var t=this,s=t.$refs.titChange.offsetTop-55;t.$refs.goodsPageScroll.scrollTop=s},detailChange:function(){var t=this,s=t.$refs.detailChange.offsetTop-55;t.$refs.goodsPageScroll.scrollTop=s,t.$refs.goodsPageScroll.scrollTop<s?t.$toast("详情已全部展示完"):(0!=this.scrollTimerId&&clearTimeout(this.scrollTimerId),"ios"==this.$devicePlatform&&(this.scrollTimerId=setTimeout((function(){t.$refs.goodsPageScroll.scrollTop+=.2}),4e3)))},addNumBtn:function(t){1==this.goodsNum&&0!=t?1==t?this.$toast("已经是极限了"):this.$toast("不能继续减少了哦"):1==this.goodsNum&&0==t?this.$toast("该商品正在努力补货中哦"):this.$toast("你所选中的商品已经到达最大数量了哦")},getCount:function(t){this.goodsNum>t&&this.$toast("你所选中的商品已经到达最大库存了哦")},addToChart:function(){var t=this;if(0!=this.skuList.storeNumber){var s={ownerCode:this.$userInfo.OWNER_CODE,spuCode:this.lists.spuCode,skuNo:this.lists.skuList[0].skuNo,shopCode:this.lists.shopCode,skuCount:this.goodsNum,mark:1};Object(e["b"])(s).then((function(s){"0"==s.resultCode?(t.$toast("添加购物车成功"),t.getCartNum()):"20100"==s.resultCode&&"0"==s.data.result&&t.$toast("您所添加商品超过最大购买量了哦")}))}else this.$toast("该商品正在努力补货中哦")},wechartShare:function(){this.show.weChartShare=!0,console.log("走进了分享")},couponList:function(){this.show.couponList=!0},shareAction:function(t){var s=this;this.hasStoragePermission?this.shareToFriend(t):n["a"].confirm({message:"请您打开存储权限，以正常使用分享功能"}).then((function(){s.requestStoragePermissions(t)})).catch((function(){}))},shareToFriend:function(t){var s=this,o={ownerCode:this.$userInfo.OWNER_CODE,shareTo:t,spuCode:this.lists.spuCode};Object(e["q"])(o).then((function(o){"0"==o.resultCode?(s.show.weChartShare=!1,s.shareUrl=o.data,Wechat.share({message:{title:s.lists.spuName,description:null==s.lists.spuSalePoint?"更多精彩，尽在信我家":s.lists.spuSalePoint,thumb:s.lists.skuList[0].skuPicUrl,media:{type:Wechat.Type.WEBPAGE,webpageUrl:s.shareUrl}},scene:1==t?Wechat.Scene.SESSION:Wechat.Scene.TIMELINE},(function(){}),(function(t){s.$toast(t)}))):s.$toast("分享失败，请稍后重试")}))},checkStoragePermissions:function(t){var s=navigator.userAgent,o=!!s.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),e=this;if(o)this.hasStoragePermission=!0,this.shareAction(t);else{var i="android.permission.WRITE_EXTERNAL_STORAGE",n=cordova.plugins.permissions;n.checkPermission(i,(function(s){s.hasPermission?(e.hasStoragePermission=!0,e.shareAction(t)):(e.hasStoragePermission=!1,e.shareAction(t))}),(function(){e.hasStoragePermission=!1,e.shareAction(t)}))}},requestStoragePermissions:function(t){var s=navigator.userAgent,o=!!s.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),e=this;if(o)this.hasStoragePermission=!0,this.shareAction(t);else{var i=["android.permission.WRITE_EXTERNAL_STORAGE"],n=cordova.plugins.permissions;n.requestPermissions(i,(function(s){s.hasPermission?(e.hasStoragePermission=!0,e.shareAction(t)):e.hasStoragePermission=!1}),(function(){e.hasStoragePermission=!1}))}},onCancel:function(){this.show.weChartShare=!1},hideCoverUp:function(){this.show.couponList=!1},callShop:function(){var t=this;if(this.ifNetworkError)this.$toast("网络异常，请稍后重试");else{var s=navigator.userAgent,o=!!s.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);o?window.location.href="tel:"+this.lists.shopTel:n["a"].confirm({title:"拨打电话",message:this.lists.shopTel}).then((function(){window.location.href="tel:"+t.lists.shopTel})).catch((function(){n["a"].close}))}},addCollection:function(){var t=this,s={collectType:"01",contentCode:t.lists.spuCode,userCode:t.$userInfo.OWNER_CODE},o={collectCodes:[t.collectCode]};""==t.collectCode?Object(e["c"])(s).then((function(s){t.collectCode=s.data.collectCode,t.$toast("添加收藏成功"),t.show.afterCollect=!0,t.show.beforeCollect=!1})).catch((function(s){t.$toast("网络异常，请稍后重试")})):""!=t.collectCode&&Object(e["e"])(o).then((function(s){t.collectCode="",t.$toast("取消收藏成功"),t.show.afterCollect=!1,t.show.beforeCollect=!0})).catch((function(s){t.$toast("网络异常，请稍后重试")}))},ifCollection:function(){var t=this,s={collectType:"01",userCode:t.$userInfo.OWNER_CODE,contentCode:this.spuCode};Object(e["o"])(s).then((function(s){var o=s.data.list;o.length>0?(t.show.afterCollect=!0,t.show.beforeCollect=!1,t.collectCode=o[0].collectCode):(t.show.afterCollect=!1,t.show.beforeCollect=!0,t.collectCode="")}))},showMoreEval:function(){this.$router.push({name:"evaluateList",params:{spuCode:this.lists.spuCode}})},toShop:function(){this.ifNetworkError?this.$toast("网络异常，请稍后重试"):this.$router.push({name:"shopPage",params:{shopCode:this.lists.shopCode}})},goToBuy:function(){if(0==this.skuList.storeNumber)this.$toast("该商品正在努力补货中哦");else{var t=[];t.push({shopName:this.lists.shopName,shopCode:this.lists.shopCode,shopTotal:this.goodsNum*this.lists.skuList[0].skuPrice,skuList:[{spuCode:this.lists.skuList.spuCode,spuName:this.lists.skuList.spuName,skuNo:this.lists.skuList[0].skuNo,attrValueContent:this.lists.skuList[0].attrValueContent,skuPrice:this.lists.skuList[0].skuPrice,skuCount:this.goodsNum,skuDelivery:0,skuTotal:this.goodsNum*this.lists.skuList[0].skuPrice,skuPicUrl:this.lists.skuList[0].skuPicUrl}]});var s={orderSource:"1",goodsList:t};console.log("跳转结算"+JSON.stringify(s)),this.$router.push({name:"orderPayNew",params:{goodsData:s}})}},turnToCart:function(){this.$router.push({path:"/shoppingCart"})},onClickLeft:function(){this.$router.go(-1),this.$refs.goodsPageScroll.scrollTop=this.scroll=0},receiveBtn:function(t){var s=this,o=this;if(this.$userInfo.ROOM_CODE){var e={id:t.id,ownerCode:this.$userInfo.OWNER_CODE,areaCode:this.$userInfo.AREA_CODE,roomCode:this.$userInfo.ROOM_CODE};Object(i["J"])(e).then((function(s){0==s.resultCode?(o.$toast("领取优惠券成功"),t.isPicked=1):o.$toast(s.msg)})).catch((function(t){o.$toast(t)}))}else n["a"].confirm({title:"您未绑定房间，是否前往绑定？",confirmButtonText:"前往"}).then((function(){s.$router.push("selectArea")})).catch((function(){}))},changeSeeRange:function(t){t.seeRange=!t.seeRange,this.$forceUpdate()},getCartNum:function(){var t=this,s={ownerCode:t.$userInfo.OWNER_CODE};Object(e["h"])(s).then((function(s){t.skuNum=s.data.skuTypeNum,c["a"].setStorage("skuTypeNum",t.skuNum)}))},moveInputIntoView:function(t){var s=this;this.isShowPlaceHolder=!0,this.$nextTick((function(){s.$refs.goodsPageScroll.scrollTop=s.$refs.changeTop.offsetTop-100}))},resetInputIntoView:function(t){this.isShowPlaceHolder=!1}},mounted:function(){},computed:Object(a["c"])({goodsDetailEventBackButtonFlag:function(t){return t.goBack.goodsDetailEventBackButtonFlag},setSpuCode:function(t){return t.productPage.setSpuCode}}),watch:{goodsDetailEventBackButtonFlag:function(t){t&&(1==this.show.weChartShare?this.show.weChartShare=!1:1==this.show.couponList?this.show.couponList=!1:this.onClickLeft(),this.$store.dispatch("setGoodsDetailEventBackButtonFlag",!1))},setSpuCode:{handler:function(t,s){t!=this.spuCode&&-1!=t&&(this.spuCode=t,this.init(),this.$store.commit("setSpuCodeChange",{spuCode:-1}))}}},activated:function(){this.isShowPreview=!1;var t=this.$route.params.goodsUrl;t&&void 0!=t&&(this.productImgs=[t]),window.addEventListener("scroll",this.handleScroll),window.addEventListener("native.keyboardshow",this.moveInputIntoView),window.addEventListener("native.keyboardhide",this.resetInputIntoView),document.querySelector(".goodsDetail").addEventListener("touchmove",(function(t){document.activeElement&&document.activeElement.blur()}),{passive:!1}),this.$route.params.spuCode?(this.lists={},this.$refs.goodsPageScroll.scrollTop=this.scroll=0,this.spuCode=this.$route.params.spuCode,this.init(),this.ifCollection(),this.getCartNum()):(console.log(this.lists.detailDescribe),0!=this.scroll&&(this.$refs.goodsPageScroll.scrollTop=this.scroll,console.log("返回页面的位置"+this.scroll+"-----》"+this.$refs.goodsPageScroll.scrollTop)),this.init(),this.ifCollection(),this.getCartNum())},deactivated:function(){this.skuList={},this.goodsNum=1,this.productImgs=[],this.shopInfo={},this.titShow=0,this.show.activeTitle=!1,this.show.normalTitle=!0,this.show.beforeCollect=!0,this.show.afterCollect=!1,this.isShowTopBtn=!1,0!=this.scrollTimerId&&clearTimeout(this.scrollTimerId)},beforeRouteLeave:function(t,s,o){window.removeEventListener("native.keyboardshow",this.moveInputIntoView),window.removeEventListener("native.keyboardhide",this.resetInputIntoView),window.removeEventListener("scroll",this.handleScroll,!0),this.scroll=this.$refs.goodsPageScroll.scrollTop,console.log("离开页面的位置"+this.scroll),o()}}},"8c6a":function(t,s,o){t.exports=o.p+"img/no_coupon_img.a94be2ee.png"},cb1c:function(t,s){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAMCAYAAABm+U3GAAAAAXNSR0IArs4c6QAAAQVJREFUOBGlkd1KAlEURuc0U47zQ/l4PZggdBEEalka3lgpJZUgwjyE7+HFaX1juwtRmcYPFvuc2Wev+XPe+yIIgjVcO+c21NrBdcFwD/KAzQgU1aiuldlzGIMykrgBL9qRR/i3nBlJn0GZQKN8QBYxTEG5h7Dqk3NWUnvrV9ZbqQm40IR3ULpwZr1DlTMRDEF5g3jvWRoJzEG5g4NyepI+gTKD/VK7EwdS+ALlFpz1rHJN0gEoesum9Y5WDmawAOUG/uSsQ3gAZQ7JUdluk4EclqB0wIGk+rnKJ6S7c5X2DF7CCpQ29MuV99/UelK7M4IrKH6FKvpEmfVPqohaoM/yAXkV2Q+jmVmqKd7MGwAAAABJRU5ErkJggg=="}}]);
//# sourceMappingURL=chunk-005188cd.c134baa6.js.map