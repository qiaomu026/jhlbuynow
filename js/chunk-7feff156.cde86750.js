(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7feff156"],{"1f1a4":function(t,i){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAYAAACohjseAAAAAXNSR0IArs4c6QAAAwFJREFUaAXtms9rE0EUx2eKMQasR4/ePHioiCDYkwoxIEoO/hHtIe3FVg/iTbz4C6TtQf8JQcRAkkMpSA9WPAi9eBA9epKWkuAh4/eFzJJ05011sjs7xhkIu/Nm5r33efNmd3azQsQSIxAjECMQI5COgFps3MHverplXCLHq+O1er0+2+v1VpRS8/jNjrfmU5NSbrfb7RWbdrXQuNsX6jGc76F/Xb7caHP9j3ENBNftdj8C7CzXJyf5T5teDUd9lBAnhFJvMJMs5AynDHCrBcBx7gzko3C6I0HCT4I0pis7g1Awr5UgDX7gfEfXcz4a7ZjgtB8EiXSdQz2VqjbAZM0hQh86nc4trdD30QZHvswIeQ/r8LnJLzZFTZ2LkP0R3KuNJ5xvQQNOCkfQwQJmARcsYFZwQQJmCRccYNZwBGi7TVA7W6rV6jm20dxwgFvNd3MTdiXD7RfXPrgVWK6W3DhnQCjc5ZQy8g7kxt1GXnDkxySADMffiV3hkEEPYekCWcNO6zM26PdNlgsFdIUbglzGsUrn2GmdHMpSB2dARO12SptdQPvZpEwIl+g56sQZECnx+ijlXLsvOLLvfSfjE847oG84r4BFwHkDLArOC6BaXj6FJ+4GGTMV1x2KSZdJ5nwVxY0WfvMFt5EtXGmvyLW1PbW0dE38EptKqDOjI/KGI1terqJyff2rPC6vSiGTvagPOG+AZGgE8psvOLLrnKIY+4AUWEoyW7oPQWJNnqe01bK8j86AePR55OKcTzjyz8sadAlEVmMiYFaRLErP1M+g80WmVqvd8DkrrVar6WLPGbDf779zMTjBGOt/mZzeqU/RqQd0TtFSqXSRS4uQ5M6AzWbzU0ggnC9Tn6IRkJv6f0VuW4P7GgJP55fwBP9W1wM5Dl7bky/wL/H1sG82wG10HvxZglfjp3F+8/DgUOoAJF+NhV2DlUrlKQZ+MY4KS7hbLpdfcC5Ztz/Dr51WMZi+mUk+K+GUeZbTW4H3mIRn2KceeLYdzcUIxAjECPwnEfgNPFUpXJdxQ/kAAAAASUVORK5CYII="},3782:function(t,i,s){"use strict";var e=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"submit"},[s("div",{class:{submitBtn:!0,submitDown:t.isDown,forbidBtn:t.isForbid,submitBtnThemeL:t.bindThemeL},attrs:{id:"submit"},on:{click:t.submit,touchstart:t.touchStart,touchend:t.touchEnd}},[t._v(t._s(t.submitName))])])},n=[],o={props:{submitName:{type:String,default:"提交"},isForbid:{type:Boolean,default:!1}},data:function(){return{isDown:!1,bindThemeL:0!=this.$curTheme}},methods:{submit:function(){this.$emit("save","33")},touchStart:function(){0==this.isForbid&&(this.isDown=!0)},touchEnd:function(){0==this.isForbid&&(this.isDown=!1)}}},a=o,r=(s("e751"),s("2877")),c=Object(r["a"])(a,e,n,!1,null,"78b6a678",null);i["a"]=c.exports},"4acd":function(t,i,s){},"55a5":function(t,i,s){"use strict";var e=s("96db"),n=s.n(e);n.a},"96db":function(t,i,s){},be10:function(t,i,s){"use strict";s.r(i);var e=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"questionnaireNotFinish"},[s("navigation-bar",{attrs:{pageName:t.title},on:{onLeftClick:t.onLeftClick}}),s("section",{staticClass:"list"},[s("form",{attrs:{id:"question"}},[0==t.isDisplayed?s("div",{staticClass:"item"},[s("div",{staticClass:"questionnaireTitle"},[s("div",{staticClass:"leftImg"},[s("img",{staticClass:"iconImg",attrs:{src:t.iconImg}})]),s("div",{staticClass:"rightCon"},[t._v(t._s(t.titleName))])]),s("div",{staticClass:"questionHeader"},[t._v("Q"+t._s(t.titleNo)+" : "+t._s(t.questName)+" ("+t._s(t.questionType)+") ")]),0==t.list.QUEST_TYPE_FLAG?s("div",{staticClass:"questionCon questionInput"},[s("van-cell-group",[s("van-field",{attrs:{rows:"1",autosize:"",maxlength:"100",type:"textarea",placeholder:"请输入"},model:{value:t.message,callback:function(i){t.message=i},expression:"message"}}),s("div",{staticClass:"txtLimit"},[t._v(t._s(t.message.length)+"/100")])],1)],1):t._e(),1==t.list.QUEST_TYPE_FLAG&&1==t.list.SELECT_TYPE_FLAG?s("div",[s("van-radio-group",{model:{value:t.radio,callback:function(i){t.radio=i},expression:"radio"}},t._l(t.list.optionList,(function(i,e){return s("van-radio",{key:e,attrs:{"checked-color":"#FB5768",name:i.ITEM_CODE}},[t._v(t._s(i.ITEM_NAME))])})),1)],1):t._e(),1==t.list.QUEST_TYPE_FLAG&&0==t.list.SELECT_TYPE_FLAG?s("div",[s("div",[s("van-checkbox-group",{model:{value:t.result,callback:function(i){t.result=i},expression:"result"}},t._l(t.list.optionList,(function(i,e){return s("van-checkbox",{key:e,attrs:{"checked-color":"#FB5768",name:i.ITEM_CODE}},[t._v(t._s(i.ITEM_NAME))])})),1)],1)]):t._e()]):t._e(),1==t.isDisplayed?s("div",{staticClass:"item"},[s("div",{staticClass:"questionnaireTitle"},[s("div",{staticClass:"leftImg"},[s("img",{staticClass:"iconImg",attrs:{src:t.iconImg}})]),s("div",{staticClass:"rightCon"},[t._v(t._s(t.titleName))])]),s("div",{staticClass:"questionHeader"},[t._v("Q"+t._s(t.titleNo)+" : "+t._s(t.questName)+" ("+t._s(t.questionType)+") ")]),0==t.list.QUEST_TYPE_FLAG?s("div",{staticClass:"questionCon questionInput"},[s("van-cell-group",[s("van-field",{attrs:{rows:"1",autosize:"",disabled:"",type:"textarea",placeholder:"请输入"},model:{value:t.message,callback:function(i){t.message=i},expression:"message"}})],1)],1):t._e(),1==t.list.QUEST_TYPE_FLAG&&1==t.list.SELECT_TYPE_FLAG?s("div",[s("van-radio-group",{model:{value:t.radio,callback:function(i){t.radio=i},expression:"radio"}},t._l(t.list.optionList,(function(i,e){return s("van-radio",{key:e,attrs:{"checked-color":"#FB5768",name:i.ITEM_CODE}},[t._v(t._s(i.ITEM_NAME))])})),1)],1):t._e(),1==t.list.QUEST_TYPE_FLAG&&0==t.list.SELECT_TYPE_FLAG?s("div",[s("div",[s("van-checkbox-group",{model:{value:t.result,callback:function(i){t.result=i},expression:"result"}},t._l(t.list.optionList,(function(i,e){return s("van-checkbox",{key:e,attrs:{"checked-color":"#FB5768",name:i.ITEM_CODE}},[t._v(t._s(i.ITEM_NAME))])})),1)],1)]):t._e()]):t._e()])]),0==t.btnFlag?s("section",{staticClass:"bottomBtn"},[s("submit-btn",{attrs:{submitName:t.btnName},on:{save:t.next}})],1):t._e(),1==t.btnFlag?s("section",{staticClass:"bottomBtn"},[s("submit-btn",{on:{save:t.submit}})],1):t._e()],1)},n=[],o=(s("ac6a"),s("bd86")),a=s("0aa6"),r=s("3782"),c=s("be53"),u=s("d399"),E={name:"questionnaireNotFinish",components:{NavigationBar:a["a"],SubmitBtn:r["a"]},data:function(){var t;return t={title:"问卷详情",btnName:"下一题",btnFlag:0,isDisplayed:0,isNowForbid:!0,questionType:"单选",message:"",radio:"",nowNum:1,isShow:!0,list:{},result:[],item:{},con:{},questData:[],titleName:"",titleNo:"",questName:""},Object(o["a"])(t,"btnFlag",0),Object(o["a"])(t,"isSaveing",!1),Object(o["a"])(t,"iconImg",s("1f1a4")),t},mounted:function(){this.item=this.$route.query,this.initData(),this.isRead()},methods:{onLeftClick:function(){this.$store.dispatch("changeActiveFlag",0),this.$router.go(-1)},isRead:function(){var t={PUBLISH_CODE:this.item.PUBLISH_CODE,PAPER_CODE:this.item.PAPER_CODE,USER_CODE:this.$userInfo.OWNER_CODE||"",USER_NAME:this.$userInfo.OWNER_NAME||"",USER_NICK_NAME:this.$userInfo.OWNER_NAME||"",ROOM_CODE:this.$userInfo.ROOM_CODE||""};t={data:JSON.stringify(t)},Object(c["g"])(t).then((function(t){}),(function(t){}))},next:function(){var t,i=this,s=0;if(console.log(this.con),"单选"==this.questionType){if(this.radio<=0)return void Object(u["a"])("请做出您的选择...");var e={};this.con.optionList.forEach((function(e){e.ITEM_CODE==i.radio&&(s=e.LINK_QUEST_FLAG,t=e.LINK_QUEST_CODE)})),e.QUEST_CODE=this.con.subjectMap.QUEST_CODE,e.ITEM_CODE=this.radio||"",e.CONTENT="",e.POINT=0,this.questData.push(e)}else if("多选"==this.questionType){if(this.result<=0)return void Object(u["a"])("请做出您的选择...");if(this.result.length>this.con.subjectMap.MUTI_CNT)return void Object(u["a"])("最多选择"+this.con.subjectMap.MUTI_CNT+"个选项");this.con.optionList.forEach((function(e){e.ITEM_CODE==i.result[0]&&(s=e.LINK_QUEST_FLAG,t=e.LINK_QUEST_CODE)}));for(var n=0;n<this.result.length;n++){var o={};o.QUEST_CODE=this.con.subjectMap.QUEST_CODE,o.ITEM_CODE=this.result[n],o.CONTENT="",o.POINT=0,this.questData.push(o)}}else{if(this.message.length<=0)return void Object(u["a"])("请输入您的意见...");this.con.optionList.length>0&&(s=this.con.optionList[0].LINK_QUEST_FLAG,t=this.con.optionList[0].LINK_QUEST_CODE);var a={};a.QUEST_CODE=this.con.subjectMap.QUEST_CODE,a.CONTENT=this.message,this.questData.push(a)}console.log(this.questData);var r={};0==s?(r.PAPER_CODE=this.item.PAPER_CODE,r.SORT_NO=this.nowNum):r.QUEST_CODE=t,this.isShow=!1,r={data:JSON.stringify(r)},Object(c["f"])(r).then((function(t){if(0==t.optionList.length&&!t.subjectMap)return Object(u["a"])("请提交您的问卷，感谢您的参与，祝您生活愉快!"),i.btnFlag=1,void(i.isDisplayed=1);i.radio="",i.result=[],i.message="",i.con=t,i.nowNum=i.con.subjectMap.SORT_NO+1,i.isShow=!1,i.isShow=!0,i.titleName=i.con.subjectMap.PAPER_NAME,i.titleNo=i.con.subjectMap.SORT_NO,i.questName=i.con.subjectMap.QUEST_NAME,i.list.optionList=t.optionList,i.list.QUEST_TYPE_FLAG=t.subjectMap.QUEST_TYPE_FLAG,i.list.SELECT_TYPE_FLAG=t.subjectMap.SELECT_TYPE_FLAG,i.$forceUpdate(),i.isTypeQus()}),(function(t){}))},initData:function(){var t=this,i={PUBLISH_CODE:this.item.PUBLISH_CODE,QUEST_CODE:this.item.QUEST_CODE,PAPER_CODE:this.item.PAPER_CODE,PUBLISH_TYPE:this.item.PUBLISH_TYPE,SORT_NO:this.nowNum,TYPE_FLAG:1,ENROL_CODE:""};this.isShow=!1,i={data:JSON.stringify(i)},Object(c["f"])(i).then((function(i){t.con=i,t.isShow=!0,t.nowNum=t.con.subjectMap.SORT_NO+1,t.titleName=t.con.subjectMap.PAPER_NAME,t.titleNo=t.con.subjectMap.SORT_NO,t.questName=t.con.subjectMap.QUEST_NAME,t.list.optionList=i.optionList,t.list.QUEST_TYPE_FLAG=i.subjectMap.QUEST_TYPE_FLAG,t.list.SELECT_TYPE_FLAG=i.subjectMap.SELECT_TYPE_FLAG,t.isTypeQus()}),(function(t){}))},submit:function(){var t=this;if(!this.isSaveing){var i={PUBLISH_CODE:this.item.PUBLISH_CODE,PAPER_CODE:this.item.PAPER_CODE,USER_CODE:this.$userInfo.OWNER_CODE||"",USER_NICK_NAME:this.$userInfo.OWNER_NICK_NAME||"",USER_NAME:this.$userInfo.OWNER_NAME||"",ROOM_CODE:this.$userInfo.ROOM_CODE||"",AREA_CODE:this.$userInfo.AREA_CODE||"",ENROL_CODE:""},s={PAPER_CODE:this.item.PAPER_CODE,SORT_NO:this.nowNum,moreQuestion:1};s={data:JSON.stringify(s)},Object(c["f"])(s).then((function(t){}),(function(t){})),this.isSaveing=!0;var e={data:JSON.stringify(i),questData:JSON.stringify(this.questData)};Object(c["h"])(e).then((function(i){t.isSaveing=!1,t.$store.dispatch("changeActiveFlag",0),i.success&&i.data&&""!=i.data&&t.$toast("恭喜问卷调查获取"+i.data+"积分"),t.$router.go(-1)}),(function(i){t.isSaveing=!1}))}},isTypeQus:function(){1==this.list.QUEST_TYPE_FLAG&&1==this.list.SELECT_TYPE_FLAG?this.questionType="单选":1==this.list.QUEST_TYPE_FLAG&&0==this.list.SELECT_TYPE_FLAG?this.questionType="多选":0==this.list.QUEST_TYPE_FLAG&&(this.questionType="问答")}}},l=E,h=(s("55a5"),s("2877")),_=Object(h["a"])(l,e,n,!1,null,null,null);i["default"]=_.exports},be53:function(t,i,s){"use strict";s.d(i,"e",(function(){return n})),s.d(i,"f",(function(){return o})),s.d(i,"c",(function(){return a})),s.d(i,"h",(function(){return r})),s.d(i,"b",(function(){return c})),s.d(i,"a",(function(){return E})),s.d(i,"d",(function(){return u})),s.d(i,"g",(function(){return l}));var e=s("ba6a"),n=function(t){return new Promise((function(i,s){e["a"].post("/hisense-systemServer/app/owner/questionMgr/getQuestionList.do",t,!0,"homeUrl").then((function(t){i(t)})).catch((function(t){s(t)}))}))},o=function(t){return new Promise((function(i,s){e["a"].post("hisense-systemServer/app/owner/questionMgr/getQuestSubjectOption.do",t,!0,"homeUrl").then((function(t){i(t)})).catch((function(t){s(t)}))}))},a=function(t){return new Promise((function(i,s){e["a"].post("hisense-systemServer/app/owner/questionMgr/getFinishQuestList.do",t,!0,"homeUrl").then((function(t){i(t)})).catch((function(t){s(t)}))}))},r=function(t){return new Promise((function(i,s){e["a"].post("hisense-systemServer/app/owner/questionMgr/savePaperAnswer.do",t,!0,"homeUrl").then((function(t){i(t)})).catch((function(t){s(t)}))}))},c=function(t){return new Promise((function(i,s){e["a"].post("hisense-systemServer/app/owner/questionMgr/getFinishQuestData.do",t,!0,"homeUrl").then((function(t){i(t)})).catch((function(t){s(t)}))}))},u=function(t){return new Promise((function(i,s){e["a"].post("hisense-systemServer/app/owner/questionMgr/getFinishQuestVoteData.do",t,!0,"homeUrl").then((function(t){i(t)})).catch((function(t){s(t)}))}))},E=function(t){return new Promise((function(i,s){e["a"].post("hisense-systemServer/app/owner/questionMgr/deletePaperData.do",t,!0,"homeUrl").then((function(t){i(t)})).catch((function(t){s(t)}))}))},l=function(t){return new Promise((function(i,s){e["a"].post("hisense-systemServer/app/owner/questionMgr/savePaperReader.do",t,!0,"homeUrl").then((function(t){i(t)})).catch((function(t){s(t)}))}))}},e751:function(t,i,s){"use strict";var e=s("4acd"),n=s.n(e);n.a}}]);
//# sourceMappingURL=chunk-7feff156.cde86750.js.map