(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-39efb5be"],{"016c":function(t,e,s){t.exports=s.p+"img/nav_icon_share_moments.abffdc2b.png"},"0212":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAA9VJREFUeAHtWs1rE0EUbz6sH4lQxZNf1AhaED0YG1AEQ70YUFH/gtKDJy9ePHj05MWDXiwKggc9WO1FUTwosYcEmhQRP1qqlILoIReFJH4hib8nmfBIN+m8TdMJ5A0M83bmzXvv99s3uzu729enRRlQBpQBZUAZUAaUAWVAGVAGepGBQDug4/H4hkAgcL5arZ6DnSHIm9Ba28S8CuZMRaPRM+l0utQsFvg5irF70N3WTAe2ihi7PDMzc7OZjld/2KvTpm94ePhIpVJ5AMf1oCDbTOU6Icw5XiwWT6PzPh/gMoBfgt7OZewPQO8q5okICHJHtnIikTgM8C+hXwdvO7dRD0H/Rd/bxn5+DOCv+XEzGXobm40167dOV2MgmUyuK5VK83C2w/ShnQWQJ+hbQGudBtCtYE42n8+/Y7aWiNAJgPSTaLfSINoImouo2+mYlSqWgOikipdAuVweQwAc/O1YLHZhYmLiDwtkRcUaqY/JKK4HW9C8QG0ET8PiImKLrAP8WeblY6fBM18c/AHW/5XJYlFMADzsZV6edfLMMz+e4JEZ70Oh0DWuJ5X9EDBgnCCARSN3smVpXz/zBL6/v38EGUm3P99FTAAcii+cvqPDxFbgM5lMoR3bNFdMQLsOJfMtwc8zm3NMthK7lgBL8H25XO4VkI6i3sCy4BdoKwLEt0Erq20q2YI3bnDvvwuZqrh0XQZIwYsRN0zoKgJWGzxx0TUEuADfNQS4At8VBLgE75wA1+CJAGe3wZUCDztrgOMWahzPAVewtX5IwGyLk4tgLejnCHLJs7308Rag6W3SKOp+1HFUUXFCQDgcJuAHTaRmYyMFT/Mxd7Oxg31KXTZ9y7VOCAgGgx8QmHluf0O7Oj/glwNnM+6EgGw2+xPBxUFEAi9UEq7AE0HOLoJ4fv8B/9jL5CgOZ8VJBjhD6+FYCfAgpae6NAN66nR7gNUM8CClp7o0A6SnG8/e1h8/pbZ96rf1nUKcAdhwfGOBxpjsRMRn+l3GMU4Oj810t2zFBMCa2cTQh9IUfS5v6aGDg7StBuhTzMUsk61EMQFwOMks78bfHeMuSKi9U7iOk7CPxfOIyVaieP2kUqm1hUKBsmCQefgE+Sl2dwtIyY5eI+AjANCDqCfgc4jF8AXyntomi3W3FsUEkDn8rXEIQKcQxPrW5ldt9DeIGcHOMiP1KF4C5GB6ejqPpXAM4iIduyyI4zPeMCX9gKe4fWWAAVxbDmMI4v9vcsgI0W9yxo6wpSX2HT7nUCcjkcgd/GL3S2hD1ZUBZUAZUAaUAWVAGVAGlAFloMcZ+Af6R1LkTa70yQAAAABJRU5ErkJggg=="},"1f1a4":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAYAAACohjseAAAAAXNSR0IArs4c6QAAAwFJREFUaAXtms9rE0EUx2eKMQasR4/ePHioiCDYkwoxIEoO/hHtIe3FVg/iTbz4C6TtQf8JQcRAkkMpSA9WPAi9eBA9epKWkuAh4/eFzJJ05011sjs7xhkIu/Nm5r33efNmd3azQsQSIxAjECMQI5COgFps3MHverplXCLHq+O1er0+2+v1VpRS8/jNjrfmU5NSbrfb7RWbdrXQuNsX6jGc76F/Xb7caHP9j3ENBNftdj8C7CzXJyf5T5teDUd9lBAnhFJvMJMs5AynDHCrBcBx7gzko3C6I0HCT4I0pis7g1Awr5UgDX7gfEfXcz4a7ZjgtB8EiXSdQz2VqjbAZM0hQh86nc4trdD30QZHvswIeQ/r8LnJLzZFTZ2LkP0R3KuNJ5xvQQNOCkfQwQJmARcsYFZwQQJmCRccYNZwBGi7TVA7W6rV6jm20dxwgFvNd3MTdiXD7RfXPrgVWK6W3DhnQCjc5ZQy8g7kxt1GXnDkxySADMffiV3hkEEPYekCWcNO6zM26PdNlgsFdIUbglzGsUrn2GmdHMpSB2dARO12SptdQPvZpEwIl+g56sQZECnx+ijlXLsvOLLvfSfjE847oG84r4BFwHkDLArOC6BaXj6FJ+4GGTMV1x2KSZdJ5nwVxY0WfvMFt5EtXGmvyLW1PbW0dE38EptKqDOjI/KGI1terqJyff2rPC6vSiGTvagPOG+AZGgE8psvOLLrnKIY+4AUWEoyW7oPQWJNnqe01bK8j86AePR55OKcTzjyz8sadAlEVmMiYFaRLErP1M+g80WmVqvd8DkrrVar6WLPGbDf779zMTjBGOt/mZzeqU/RqQd0TtFSqXSRS4uQ5M6AzWbzU0ggnC9Tn6IRkJv6f0VuW4P7GgJP55fwBP9W1wM5Dl7bky/wL/H1sG82wG10HvxZglfjp3F+8/DgUOoAJF+NhV2DlUrlKQZ+MY4KS7hbLpdfcC5Ztz/Dr51WMZi+mUk+K+GUeZbTW4H3mIRn2KceeLYdzcUIxAjECPwnEfgNPFUpXJdxQ/kAAAAASUVORK5CYII="},3782:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"submit"},[s("div",{class:{submitBtn:!0,submitDown:t.isDown,forbidBtn:t.isForbid,submitBtnThemeL:t.bindThemeL},attrs:{id:"submit"},on:{click:t.submit,touchstart:t.touchStart,touchend:t.touchEnd}},[t._v(t._s(t.submitName))])])},n=[],o={props:{submitName:{type:String,default:"提交"},isForbid:{type:Boolean,default:!1}},data:function(){return{isDown:!1,bindThemeL:0!=this.$curTheme}},methods:{submit:function(){this.$emit("save","33")},touchStart:function(){0==this.isForbid&&(this.isDown=!0)},touchEnd:function(){0==this.isForbid&&(this.isDown=!1)}}},a=o,r=(s("e751"),s("2877")),c=Object(r["a"])(a,i,n,!1,null,"78b6a678",null);e["a"]=c.exports},"4acd":function(t,e,s){},6278:function(t,e,s){},9430:function(t,e,s){t.exports=s.p+"img/nav_icon_share_wechat.5c7534fb.png"},be10:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"questionnaireNotFinish",class:{themeL:t.bindThemeL}},[i("navigation-bar",{attrs:{pageName:t.title},on:{onLeftClick:t.onLeftClick},scopedSlots:t._u([{key:"nav-right",fn:function(){return[i("div",{on:{click:t.wechartShare}},[i("img",{staticClass:"nav-bar-custom-icon",attrs:{src:s("0212"),alt:""}})])]},proxy:!0}])}),i("section",{staticClass:"list"},[i("form",{attrs:{id:"question"}},[0==t.isDisplayed?i("div",{staticClass:"item"},[i("div",{staticClass:"questionnaireTitle"},[i("div",{staticClass:"leftImg"},[i("img",{staticClass:"iconImg",attrs:{src:t.iconImg}})]),i("div",{staticClass:"rightCon"},[t._v(t._s(t.titleName))])]),i("div",{staticClass:"questionHeader"},[t._v("Q"+t._s(t.titleNo)+" : "+t._s(t.questName)+" ("+t._s(t.questionType)+")")]),0==t.list.QUEST_TYPE_FLAG?i("div",{staticClass:"questionCon questionInput"},[i("van-cell-group",[i("van-field",{attrs:{rows:"1",autosize:"",maxlength:"100",type:"textarea",placeholder:"请输入"},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}}),i("div",{staticClass:"txtLimit"},[t._v(t._s(t.message.length)+"/100")])],1)],1):t._e(),1==t.list.QUEST_TYPE_FLAG&&1==t.list.SELECT_TYPE_FLAG?i("div",[i("van-radio-group",{model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},t._l(t.list.optionList,(function(e,s){return i("van-radio",{key:s,attrs:{"checked-color":"#FB5768",name:e.itemCode}},[t._v(t._s(e.itemName)+"\n            ")])})),1)],1):t._e(),1==t.list.QUEST_TYPE_FLAG&&0==t.list.SELECT_TYPE_FLAG?i("div",[i("div",[i("van-checkbox-group",{model:{value:t.result,callback:function(e){t.result=e},expression:"result"}},t._l(t.list.optionList,(function(e,s){return i("van-checkbox",{key:s,attrs:{"checked-color":"#FB5768",name:e.itemCode}},[t._v(t._s(e.itemName)+"\n              ")])})),1)],1)]):t._e()]):t._e(),1==t.isDisplayed?i("div",{staticClass:"item"},[i("div",{staticClass:"questionnaireTitle"},[i("div",{staticClass:"leftImg"},[i("img",{staticClass:"iconImg",attrs:{src:t.iconImg}})]),i("div",{staticClass:"rightCon"},[t._v(t._s(t.titleName))])]),i("div",{staticClass:"questionHeader"},[t._v("Q"+t._s(t.titleNo)+" : "+t._s(t.questName)+" ("+t._s(t.questionType)+")")]),0==t.list.QUEST_TYPE_FLAG?i("div",{staticClass:"questionCon questionInput"},[i("van-cell-group",[i("van-field",{attrs:{rows:"1",autosize:"",disabled:"",type:"textarea",placeholder:"请输入"},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}})],1)],1):t._e(),1==t.list.QUEST_TYPE_FLAG&&1==t.list.SELECT_TYPE_FLAG?i("div",[i("van-radio-group",{model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},t._l(t.list.optionList,(function(e,s){return i("van-radio",{key:s,attrs:{"checked-color":"#FB5768",name:e.itemCode}},[t._v(t._s(e.itemName)+"\n            ")])})),1)],1):t._e(),1==t.list.QUEST_TYPE_FLAG&&0==t.list.SELECT_TYPE_FLAG?i("div",[i("div",[i("van-checkbox-group",{model:{value:t.result,callback:function(e){t.result=e},expression:"result"}},t._l(t.list.optionList,(function(e,s){return i("van-checkbox",{key:s,attrs:{"checked-color":"#FB5768",name:e.itemCode}},[t._v(t._s(e.itemName)+"\n              ")])})),1)],1)]):t._e()]):t._e()])]),i("section",{staticClass:"pageIndicator"},[t._v("\n    "+t._s(t.titleNo)+"/"+t._s(t.totalNo)+"\n  ")]),0==t.btnFlag?i("section",{staticClass:"bottomBtn"},[i("submit-btn",{attrs:{submitName:t.btnName},on:{save:t.next}})],1):t._e(),1==t.btnFlag?i("section",{staticClass:"bottomBtn"},[i("submit-btn",{on:{save:t.submit}})],1):t._e(),i("van-action-sheet",{attrs:{"cancel-text":"取消",round:"","safe-area-inset-bottom":""},on:{cancel:t.onCancel},model:{value:t.show.weChartShare,callback:function(e){t.$set(t.show,"weChartShare",e)},expression:"show.weChartShare"}},[i("p",{staticClass:"shareTit"},[t._v("分享至")]),i("div",{staticClass:"share-box",style:{display:"flex","justify-content":"center"}},[i("div",{staticClass:"shareChart",on:{click:function(e){return t.shareTo(1)}}},[i("img",{attrs:{src:t.icon.shareChart}}),i("p",[t._v("微信好友")])]),i("div",{staticClass:"shareFriends"},[i("img",{attrs:{src:t.icon.shareFriends},on:{click:function(e){return t.shareTo(2)}}}),i("p",[t._v("朋友圈")])])])])],1)},n=[],o=(s("4917"),s("a481"),s("ac6a"),s("0aa6")),a=s("3782"),r=s("be53"),c=s("d399"),u=s("cf45"),l={name:"questionnaireNotFinish",components:{NavigationBar:o["a"],SubmitBtn:a["a"]},data:function(){return{bindThemeL:0!=this.$curTheme,title:"问卷详情",btnName:"下一题",btnFlag:0,isDisplayed:0,isNowForbid:!0,questionType:"单选",message:"",radio:"",nowNum:1,isShow:!0,list:{},result:[],item:{},con:{},questData:[],titleName:"",titleNo:"",totalNo:"",questName:"",isSaveing:!1,iconImg:s("1f1a4"),show:{weChartShare:!1},icon:{shareChart:s("9430"),shareFriends:s("016c")},nextLinkFlag:0,nextQuestCode:""}},mounted:function(){this.item=this.$route.query,this.bindThemeL=0!=this.$curTheme,console.log("【问卷】 mounted： item = "+JSON.stringify(this.item)),this.initData(),this.isRead()},methods:{onLeftClick:function(){this.$store.dispatch("changeActiveFlag",0),this.$router.go(-1)},initData:function(){this.getQuestInfo(this.item.paperCode,"",this.nowNum)},isRead:function(){var t={publishCode:this.item.publishCode,paperCode:this.item.paperCode,userCode:this.$userInfo.OWNER_CODE,roomCode:this.$userInfo.ROOM_CODE};console.log("【问卷】 isRead: param = "+JSON.stringify(t)),Object(r["j"])(t).then((function(t){"0"===t.resultCode?console.log("【问卷】isRead：success."):console.log("【问卷】isRead：fail msg = "+t.msg)})).catch((function(t){console.log("【问卷】isRead：error = "+t)}))},next:function(){this.saveAnswerLocal()&&(0==this.nextLinkFlag?this.getQuestInfo(this.item.paperCode,"",this.nowNum,!0):this.getQuestInfo(this.item.paperCode,this.nextQuestCode,-1,!0))},saveAnswerLocal:function(){var t=this;this.nextLinkFlag=0,this.nextQuestCode="";if("单选"==this.questionType){if(this.radio<=0)return Object(c["a"])("请做出您的选择..."),!1;var e={};this.list.optionList.forEach((function(e){e.itemCode==t.radio&&(t.nextLinkFlag=e.linkQuestFlag,t.nextQuestCode=e.linkQuestCode)})),e.questCode=this.con.questCode,e.itemCode=this.radio||"",e.content="",e.point=0,this.questData.push(e)}else if("多选"==this.questionType){if(this.result<=0)return Object(c["a"])("请做出您的选择..."),!1;if(this.result.length>this.con.mutiCnt)return Object(c["a"])("最多选择"+this.con.mutiCnt+"个选项"),!1;this.list.optionList.forEach((function(e){e.itemCode==t.result[0]&&(t.nextLinkFlag=e.linkQuestFlag,t.nextQuestCode=e.linkQuestCode)}));for(var s=0;s<this.result.length;s++){var i={};i.questCode=this.con.questCode,i.itemCode=this.result[s],i.content="",i.point=0,this.questData.push(i)}}else{if(this.message.length<=0)return Object(c["a"])("请输入您的意见..."),!1;this.list.optionList.length>0&&(this.nextLinkFlag=this.con.optionList[0].linkQuestFlag,this.nextQuestCode=this.con.optionList[0].linkQuestCode);var n={};n.questCode=this.con.questCode,n.content=this.message,this.questData.push(n)}return console.log("【问卷】saveAnswerLocal: 答案="+JSON.stringify(this.questData)),!0},getQuestInfo:function(t,e,s){var i=this,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];console.log("【问卷】 getQuestInfo： paperCode = "+t+",questCode="+e+",sortNo="+s);var o={paperCode:t};null!=e&&""!=e&&(o.questCode=e),s>0&&(o.sortNo=s),this.isShow=!1,Object(r["f"])(o).then((function(t){"0"===t.resultCode?(t.data.lastFlag&&(i.btnFlag=1),i.radio="",i.result=[],i.message="",i.con=t.data,i.isShow=!0,i.nowNum=i.con.sortNo+1,i.titleName=i.con.paperName,i.titleNo=i.con.sortNo,i.totalNo=i.con.maxSortNo,i.questName=i.con.questName,i.list.optionList=i.con.questItemList,i.list.QUEST_TYPE_FLAG=i.con.questTypeFlag,i.list.SELECT_TYPE_FLAG=i.con.selectTypeFlag,console.log("【问卷】 getQuestInfo: 问题列表="+JSON.stringify(i.list.optionList)),n&&i.$forceUpdate(),i.isTypeQus()):console.log("getQuestInfo: error = "+t.msg)}))},savePaperAnswer:function(){var t=this;console.log("【问卷】 savePaperAnswer: "+JSON.stringify(this.questData));var e={paperCode:this.item.paperCode,publishCode:this.item.publishCode,questAnswerList:this.questData,roomCode:this.$userInfo.ROOM_CODE,userCode:this.$userInfo.OWNER_CODE};console.log("【问卷】 savePaperAnswer: param = "+JSON.stringify(e)),this.isSaveing=!0,Object(r["i"])(e).then((function(e){"0"===e.resultCode?(console.log("【问卷】 savePaperAnswer: response = "+JSON.stringify(e)),t.isSaveing=!1,t.$store.dispatch("changeActiveFlag",0),t.$toast(e.msg),null!=e.data&&"{}"!=JSON.stringify(e.data)?0==e.data.forwardType?(t.$router.go(-1),null!=e.data.forwardUrl&&e.data.forwardUrl.length>0&&t.openWebUrl(e.data.forwardUrl)):1==e.data.forwardType?null!=e.data.forwardUrl&&e.data.forwardUrl.length>0&&t.$router.replace({name:"pointActivity",query:{promotionId:e.data.forwardUrl}}):t.$router.go(-1):t.$router.go(-1)):(t.isSaveing=!1,t.$toast(e.msg))})).catch((function(e){console.log("【Exception】savePaperAnswer："+e),t.isSaveing=!1}))},openWebUrl:function(t){if("pc"!=this.$devicePlatform){var e=navigator.userAgent,s=!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);s?cordova.InAppBrowser.open(t,"_blank","location=no,toolbar=yes,toolbarposition=top,toolbarcolor=#ffffff,title=yes,titletext=问卷跳转,titlecolor=#000000"):cordova.InAppBrowser.open(t,"_blank","location=yes,toolbar=yes,toolbarcolor=#ffffff,hideurlbar=yes,title=yes,titletext=问卷跳转,titlecolor=#000000")}else window.open(t)},submit:function(){this.isSaveing||this.saveAnswerLocal()&&this.savePaperAnswer()},isTypeQus:function(){1==this.list.QUEST_TYPE_FLAG&&1==this.list.SELECT_TYPE_FLAG?this.questionType="单选":1==this.list.QUEST_TYPE_FLAG&&0==this.list.SELECT_TYPE_FLAG?this.questionType="多选":0==this.list.QUEST_TYPE_FLAG&&(this.questionType="问答")},wechartShare:function(){this.show.weChartShare=!0},onCancel:function(){this.show.weChartShare=!1},shareTo:function(t){var e=this,s={ownerCode:this.$userInfo.OWNER_CODE,areaCode:this.$userInfo.AREA_CODE,shareTo:"1",paperCode:this.item.paperCode};console.log("shareTo:: param = "+JSON.stringify(s)),Object(r["e"])(s).then((function(s){if(console.log("shareTo: response = "+JSON.stringify(s)),"0"==s.resultCode){e.show.weChartShare=!1;var i=s.data;console.log("shareTo: shareUrl = "+i+",type="+t),u["a"].share(t,{shareUrl:i,title:"问卷分享",description:"更多精彩，尽在信我家",thumb:""},(function(){e.$toast("分享成功")}),(function(){e.$toast("分享失败")}))}else console.log("shareTo: get share url fail = "+error)})).catch((function(t){console.log("shareTo: get share url error = "+t)}))}}},h=l,d=(s("c80d"),s("2877")),f=Object(d["a"])(h,i,n,!1,null,"86266e8a",null);e["default"]=f.exports},be53:function(t,e,s){"use strict";s.d(e,"b",(function(){return o})),s.d(e,"d",(function(){return a})),s.d(e,"f",(function(){return r})),s.d(e,"j",(function(){return c})),s.d(e,"i",(function(){return u})),s.d(e,"c",(function(){return l})),s.d(e,"h",(function(){return h})),s.d(e,"a",(function(){return d})),s.d(e,"e",(function(){return f})),s.d(e,"g",(function(){return p}));var i=s("ba6a"),n=s("d399"),o=function(t){return new Promise((function(e,s){i["a"].post("hisense-systemServer/app/owner/questionMgr/deletePaperData.do",t,!0,"homeUrl").then((function(t){e(t)})).catch((function(t){s(t)}))}))},a=function(t){return new Promise((function(e,s){i["a"].get("xwj-property-question/paper/getPaperList",t).then((function(t){e(t)})).catch((function(t){Object(n["a"])("网络异常，请稍后重试！"),s(t)}))}))},r=function(t){return new Promise((function(e,s){i["a"].get("xwj-property-question/quest/getQuestInfo",t).then((function(t){e(t)})).catch((function(t){Object(n["a"])("网络异常，请稍后重试！"),s(t)}))}))},c=function(t){return new Promise((function(e,s){i["a"].post("xwj-property-question/reader/savePaperReader",t,!0).then((function(t){e(t)})).catch((function(t){s(t)}))}))},u=function(t){return new Promise((function(e,s){i["a"].post("xwj-property-question/answer/savePaperAnswer",t,!1).then((function(t){e(t)})).catch((function(t){s(t)}))}))},l=function(t){return new Promise((function(e,s){i["a"].get("xwj-property-question/paper/getAnswerPaperDetail",t).then((function(t){e(t)})).catch((function(t){Object(n["a"])("网络异常，请稍后重试！"),s(t)}))}))},h=function(t){return new Promise((function(e,s){i["a"].post("xwj-property-question/answer/removeAnswer",t,!0).then((function(t){e(t)})).catch((function(t){s(t)}))}))},d=function(t){return new Promise((function(e,s){i["a"].get("xwj-property-question/paper/checkUserAnswer",t).then((function(t){e(t)})).catch((function(t){Object(n["a"])("网络异常，请稍后重试！"),s(t)}))}))},f=function(t){return new Promise((function(e,s){i["a"].post("xwj-sys-user/share/sharePaper",t,!1).then((function(t){e(t)})).catch((function(t){s(t)}))}))},p=function(t){return new Promise((function(e,s){i["a"].get("xwj-property-question/paper/getVoteDetail",t).then((function(t){e(t)})).catch((function(t){Object(n["a"])("网络异常，请稍后重试！"),s(t)}))}))}},c80d:function(t,e,s){"use strict";var i=s("6278"),n=s.n(i);n.a},e751:function(t,e,s){"use strict";var i=s("4acd"),n=s.n(i);n.a}}]);
//# sourceMappingURL=chunk-39efb5be.65959318.js.map