(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-permissionBundle-permissionBundleDetailWithSearch"],{"0823":function(t,e,i){var n=i("1be3");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("32b8a95d",n,!0,{sourceMap:!1,shadowMode:!1})},"1b18":function(t,e,i){var n=i("b0ef");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("9f944dca",n,!0,{sourceMap:!1,shadowMode:!1})},"1be3":function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\n\n\n/* 行为相关颜色 */.ktc-template-page[data-v-33c2af9c]{position:relative}.ktc-template-page .search-section[data-v-33c2af9c]{height:%?104?%;background:#fff;padding:%?24?%;position:-webkit-sticky;position:sticky;top:0;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-column-gap:16px;column-gap:16px}.ktc-template-page .search-section .search-button[data-v-33c2af9c]{height:%?64?%;border-radius:24px;background:#f6f7f9;padding:%?0?% %?24?%;-webkit-box-flex:1;-webkit-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.ktc-template-page .search-section .search-button uni-image[data-v-33c2af9c]{height:%?28?%;width:%?28?%;margin-right:%?16?%}.ktc-template-page .search-section .search-button .search-button-title[data-v-33c2af9c]{color:rgba(0,0,0,.45098039215686275);font-family:PingFang SC;font-size:%?24?%;font-style:normal;font-weight:400;line-height:%?42?%}.ktc-template-page .search-section .cancel-btn[data-v-33c2af9c]{font-size:%?32?%}.ktc-template-page .page-content[data-v-33c2af9c]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;row-gap:%?32?%;padding:%?40?% %?40?% 0}.ktc-template-page .page-content .total-text[data-v-33c2af9c]{font-size:%?28?%;color:rgba(0,0,0,.85)}.ktc-template-page .page-content .permission-item[data-v-33c2af9c]{padding:%?24?%;width:100%}.ktc-template-page .page-content .permission-item .permission-item-title[data-v-33c2af9c]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center;font-size:%?28?%}.ktc-template-page .page-content .permission-item .permission-item-title uni-button[data-v-33c2af9c]{border-radius:4px;font-size:%?24?%;height:%?40?%;line-height:%?40?%;margin-right:0;padding-left:%?8?%;padding-right:%?8?%}.ktc-template-page .empty-text[data-v-33c2af9c]{font-size:%?28?%;color:rgba(0,0,0,.85);text-align:center;margin-top:%?80?%}.ktc-template-page .fixed-footer[data-v-33c2af9c]{position:fixed;width:100vw;padding:%?24?%;bottom:0;left:0;background:#fff}.ktc-template-page .fixed-footer uni-button[data-v-33c2af9c]{border-radius:24px;background-color:#f8b500;color:#fff}',""]),t.exports=e},"61fd":function(t,e,i){"use strict";i.r(e);var n={o2Icon:i("51db").default},a=(i("a9e3"),{name:"UniStatusBar"}),o=i("f0c5"),r=Object(o["a"])(a,(function(){var t=this.$createElement,e=this._self._c||t;return e("v-uni-view",{staticClass:"uni-status-bar",style:{height:this.statusBarHeight+"px"}},[this._t("default")],2)}),[],!1,null,"4d4bc7a2",null,!1,void 0,void 0),s=r.exports,c=i("fa7d"),l=function(t){return"number"===typeof t?t+"px":t},d={name:"UniNavBar",components:{statusBar:s},emits:["clickLeft","clickRight","clickTitle"],props:{dark:{type:Boolean,default:!1},title:{type:String,default:""},leftText:{type:String,default:""},rightText:{type:String,default:""},leftIcon:{type:String,default:"icon-LeftOutlined"},leftIconFlag:{type:Boolean,default:!0},rightIcon:{type:String,default:""},dbNavBar:{type:[Boolean,String],default:!1},fixed:{type:[Boolean,String],default:!1},color:{type:String,default:""},fontSize:{type:String,default:""},rightTextColor:{type:String,default:""},leftTextColor:{type:String,default:""},backgroundColor:{type:String,default:""},backgroundImage:{type:String,default:""},statusBar:{type:[Boolean,String],default:!1},shadow:{type:[Boolean,String],default:!1},border:{type:[Boolean,String],default:!1},height:{type:[Number,String]},rightWidth:{type:[Number,String],default:60},stat:{type:[Boolean,String],default:""},onlyLeft:{type:Boolean,default:!1},clickBackFlag:{type:Boolean,default:!1},inverted:{type:Boolean,default:!1},justifyContent:{type:String,default:"left"},invertedBackgroundColor:String,showContent:{type:Boolean,default:!0},isTransparent:{type:Boolean,default:!1}},data:function(){return{scrollTop:0,defaultBackgroundColor:this.backgroundColor,click:!1,showThemeBgColor:"",titleC:""}},computed:{themeBgColor:function(){return this.dark?this.defaultBackgroundColor?this.defaultBackgroundColor:this.dark?"#333":"#FFF":this.inverted||this.isTransparent?this.invertedBackgroundColor||"transparent":this.backgroundColor||"#FFF"},themeColor:function(){return this.dark?this.color?this.color:this.dark?"#fff":"#000000E5":this.color||"#000000E5"},navbarHeight:function(){return l(this.height||this.navBarHeight)},rightIconWidth:function(){return l(this.rightWidth)},titleStyle:function(){return Object(c["c"])({justifyContent:this.justifyContent})}},watch:{themeBgColor:{immediate:!0,handler:function(t,e){e&&e!==t&&(this.showThemeBgColor=t)}},title:{deep:!0,immediate:!0,handler:function(t,e){t!=e&&(this.titleC=t)}}},mounted:function(){uni.report&&this.stat&&""!==this.title&&(uni.report("title",this.title),this.titleC=this.title),this.showThemeBgColor=this.themeBgColor},destroyed:function(){},methods:{onClickLeft:function(){var t=this;t.click||(t.click=!0,t.clickBackFlag?(t.$emit("clickLeft"),t.click=!1):(uni.navigateBack({delta:1,fail:function(e){t.$switchTab("home")}}),t.$emit("clickLeft"),t.click=!1))},onClickRight:function(){this.$emit("clickRight")},onClickTitle:function(){this.$emit("clickTitle")}}},u=d,f=(i("e2cf"),Object(o["a"])(u,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"uni-navbar",class:{"uni-dark":t.dark,"uni-nvue-fixed":t.fixed}},[i("v-uni-view",{staticClass:"uni-navbar__content",class:{"uni-navbar--fixed":t.fixed,"uni-navbar--shadow":t.shadow,"uni-navbar--border":t.border,"uni-navbar__bgImage":t.backgroundImage},style:{background:t.themeBgColor}},[t._t("statusBar"),t.statusBar?i("status-bar"):t._e(),t.showContent?i("v-uni-view",{staticClass:"uni-navbar__header",style:{color:t.themeColor,height:t.navbarHeight}},[i("v-uni-view",{staticClass:"uni-navbar-btn-text",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onClickLeft.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"uni-nav-bar-right-text",style:{color:t.leftTextColor,fontSize:t.fontSize}},[t._v(t._s(t.leftText))])],1),"center"===t.justifyContent?i("v-uni-view",{staticClass:"uni-navbar__header-btns uni-navbar__header-btns-left",style:{width:t.leftText?"68rpx":"120rpx"}}):t._e(),t.leftIconFlag?i("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onClickLeft.apply(void 0,arguments)}}},[t._t("left",[i("v-uni-view",{staticClass:"uni-navbar__content_view"},[i("o2-icon",{attrs:{icon:t.leftIcon,color:"themeColor",size:"40rpx"}})],1)])],2):t._e(),i("v-uni-view",{staticClass:"uni-navbar__header-container",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onClickTitle.apply(void 0,arguments)}}},[t._t("default",[""!==t.titleC&&t.titleC&&"true"!==t.titleC?i("v-uni-view",{staticClass:"uni-navbar__header-container-inner",style:t.titleStyle},[i("v-uni-text",{staticClass:"uni-ellipsis-1",style:{color:t.themeColor}},[t._v(t._s(t.titleC))])],1):t._e(),i("v-uni-view",{staticClass:"no-title"})])],2),i("v-uni-view",{staticClass:"uni-navbar__header-btns uni-navbar__header-btns-right",style:{width:t.rightIconWidth},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onClickRight.apply(void 0,arguments)}}},[t._t("right",[t.rightIcon.length?i("v-uni-view",[i("o2-icon",{attrs:{color:"themeColor",icon:"icon-LeftOutlined",size:"48rpx"}})],1):t._e(),t.rightText.length&&!t.rightIcon.length?i("v-uni-view",{staticClass:"uni-navbar-btn-text"},[i("v-uni-text",{staticClass:"uni-nav-bar-right-text",style:{color:t.rightTextColor,fontSize:t.fontSize}},[t._v(t._s(t.rightText))])],1):t._e()])],2)],1):t._e(),t._t("content")],2),t.fixed&&!t.inverted?i("v-uni-view",{staticClass:"uni-navbar__placeholder"},[t.statusBar?i("status-bar"):t._e(),t.showContent?i("v-uni-view",{staticClass:"uni-navbar__placeholder-view",style:{height:t.navbarHeight}}):t._e()],1):t._e()],1)}),[],!1,null,"7873cfdb",null,!1,n,void 0));e["default"]=f.exports},7310:function(t,e,i){"use strict";i.r(e);var n={o2NavBar:i("61fd").default},a=i("f07e"),o=i("c964"),r=i("f3f3"),s=(i("4de4"),i("d3b7"),i("498a"),i("71ea")),c=i.n(s),l=(i("e143"),i("26cb")),d=i("81b0"),u=(c.a.OSS_URL,{name:"permission-bundle-detail-with-search",components:{},data:function(){return{title:"角色详情",searchValue:void 0,permissionList:[]}},mixins:[],watch:{},computed:Object(r["a"])({tenantId:function(){var t;return null===(t=this.user)||void 0===t||null===(t=t.userInfo)||void 0===t||null===(t=t.merchantInfo)||void 0===t?void 0:t.groupCode}},Object(l["mapState"])(["hpcRoles","user"])),onLoad:function(){var t,e=null===(t=this.hpcRoles.currentRole)||void 0===t?void 0:t.roleName;e&&(this.title=e)},onShow:function(){},mounted:function(){},methods:{getPermissionPage:function(t){var e=this;return Object(o["a"])(Object(a["a"])().mark((function i(){var n,o,r,s,l,d;return Object(a["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(n=e.tenantId,!n){i.next=18;break}return o=e.hpcRoles.currentRole.roleId,r=c.a.HPC_BASE_URL+e.$requestUrl.hpcPermission.permissionPages,s={systemCode:c.a.HPC_CT_CODE,roleId:o,page:{pageNo:1,pageSize:99999},tenantIds:[n],userNo:null===t||void 0===t?void 0:t.trim()},uni.showLoading({title:"加载中"}),i.prev=6,i.next=9,e.$http.post(r,s);case 9:l=i.sent,d=l.data,"200"===d.code&&(e.permissionList=d.data||[]),i.next=17;break;case 14:i.prev=14,i.t0=i["catch"](6),console.warn(i.t0);case 17:uni.hideLoading();case 18:case"end":return i.stop()}}),i,null,[[6,14]])})))()},handleClickDelete:function(t){var e=this;return Object(o["a"])(Object(a["a"])().mark((function i(){var n,r;return Object(a["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:n=e,r="ios"===uni.getStorageSync("platform"),uni.showModal({title:"提示",content:"是否确认移除？",cancelText:r?"取消":"确认",confirmText:r?"确认":"取消",success:function(){var e=Object(o["a"])(Object(a["a"])().mark((function e(i){var o,s,l,d,u,f,b,p;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o=r?i.confirm:i.cancel,!o){e.next=29;break}return s=t.dataPermissionIds,l=t.funcPermissionIds,d=c.a.HPC_BASE_URL+n.$requestUrl.hpcPermission.permissionDelete,u={systemCode:c.a.HPC_CT_CODE,dataPermissionIds:s,funcPermissionIds:l,byTime:!1},uni.showLoading({title:"加载中"}),e.prev=6,e.next=9,n.$http.post(d,u);case 9:if(f=e.sent,b=f.data,"200"!==b.code){e.next=22;break}return e.next=14,n.checkUserRoleIsEmpty(t.userNo);case 14:if(p=e.sent,!p){e.next=19;break}return e.next=18,n.unBindUserRole([t.userNo]);case 18:e.sent;case 19:uni.showToast({title:"移除成功",icon:"none",duration:1e3,complete:function(){n.getPermissionPage(n.searchValue).then()}}),e.next=23;break;case 22:uni.showToast({title:b.message||"移除失败"});case 23:e.next=28;break;case 25:e.prev=25,e.t0=e["catch"](6),uni.showToast({title:"移除失败"});case 28:uni.hideLoading();case 29:case"end":return e.stop()}}),e,null,[[6,25]])})));return function(t){return e.apply(this,arguments)}}()});case 3:case"end":return i.stop()}}),i)})))()},onSearch:Object(d["debounce"])((function(t){this.getPermissionPage(t.target.value)}),400),handleCancel:function(){this.$Router.back(1)},checkUserRoleIsEmpty:function(t){var e=this;return Object(o["a"])(Object(a["a"])().mark((function i(){var n,o,r,s,l,d,u,f,b;return Object(a["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return n=c.a.HPC_BASE_URL+e.$requestUrl.hpcPermission.permissionDetail,o=c.a.HPC_CT_CODE,r=e.tenantId,s={systemCode:o,userNo:t,apiCaller:"PERMISSION_MANAGE_VIEW"},i.prev=4,i.next=7,e.$http.post(n,s);case 7:if(l=i.sent,d=l.data,u=d.code,f=d.data,"200"!==u){i.next=14;break}return b=f.rolePermissions.filter((function(t){return t.tenantId===r})),i.abrupt("return",0===b.length);case 14:i.next=19;break;case 16:i.prev=16,i.t0=i["catch"](4),console.error("=== checkUserRoleIsEmpty ===",i.t0);case 19:return i.abrupt("return",!1);case 20:case"end":return i.stop()}}),i,null,[[4,16]])})))()},unBindUserRole:function(t){var e=this;return Object(o["a"])(Object(a["a"])().mark((function i(){var n,o,r,s;return Object(a["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return n=e.$newRequesturl.login.unBindUserRole,o={userId:t},i.prev=2,i.next=5,e.$http.post(n,o);case 5:if(r=i.sent,s=r.data,0!==s.code){i.next=9;break}return i.abrupt("return",Boolean(s.data));case 9:i.next=14;break;case 11:i.prev=11,i.t0=i["catch"](2),console.error("=== unBindUserRole ===",i.t0);case 14:return i.abrupt("return",!1);case 15:case"end":return i.stop()}}),i,null,[[2,11]])})))()}}}),f=u,b=(i("b111"),i("f0c5")),p=Object(b["a"])(f,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"ktc-template-page",style:{paddingBottom:"calc(50rpx + "+t.safeArea+"px)"}},[i("o2-nav-bar",{staticClass:"nav-bar",attrs:{fixed:!0,"status-bar":!0,showContent:!1}}),i("v-uni-view",{staticClass:"search-section"},[i("v-uni-view",{staticClass:"search-button"},[i("v-uni-image",{attrs:{src:"https://cimg-cdn.haier.net/obs-car/2024/08/09/hEKUwoGa/ic_index_search.png",mode:""}}),i("v-uni-input",{staticClass:"search-button-title",attrs:{focus:!0,placeholder:"搜索工号"},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.onSearch.apply(void 0,arguments)}},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}})],1),i("v-uni-view",{staticClass:"cancel-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleCancel.apply(void 0,arguments)}}},[t._v("取消")])],1),void 0!==t.searchValue?[t.permissionList.length>0?i("v-uni-view",{staticClass:"page-content"},[i("v-uni-view",{staticClass:"total-text"},[t._v("共 "+t._s(t.permissionList.length)+" 位使用此权限的员工")]),t._l(t.permissionList,(function(e,n){return i("v-uni-view",{key:n,staticClass:"permission-item"},[i("v-uni-view",{staticClass:"permission-item-title"},[i("v-uni-text",[t._v(t._s(e.userName))]),i("v-uni-button",{on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.handleClickDelete(e)}}},[t._v("移除权限")])],1)],1)}))],2):i("v-uni-view",{staticClass:"empty-text"},[t._v("- 暂无相关员工数据 -")])]:t._e()],2)}),[],!1,null,"33c2af9c",null,!1,n,void 0);e["default"]=p.exports},b0ef:function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\n\n\n/* 行为相关颜色 */.uni-navbar[data-v-7873cfdb]{z-index:999}.uni-nav-bar-text[data-v-7873cfdb]{font-size:14px}.uni-nav-bar-right-text[data-v-7873cfdb]{font-size:12px}.uni-navbar__content[data-v-7873cfdb]{position:relative;background-color:initial}.uni-navbar__bgImage[data-v-7873cfdb]{position:relative;background-size:cover;background-repeat:no-repeat;width:100%}.uni-navbar__bgImage[data-v-7873cfdb]:after{content:"";position:absolute;inset:0;background-color:rgba(0,0,0,.4);z-index:-1}.uni-navbar__content_view[data-v-7873cfdb]{padding-right:%?16?%}.uni-navbar-btn-text[data-v-7873cfdb]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;align-items:center;line-height:12px}.uni-navbar__header[data-v-7873cfdb]{display:-webkit-box;display:-webkit-flex;display:flex;padding:0 16px;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;height:44px;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.uni-navbar__header-btns[data-v-7873cfdb]{overflow:hidden;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;cursor:pointer}.uni-navbar__header-btns-left[data-v-7873cfdb]{display:-webkit-box;display:-webkit-flex;display:flex;width:%?120?%;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.uni-navbar__header-btns-right[data-v-7873cfdb]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.uni-navbar__header-container[data-v-7873cfdb]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-flex:1;-webkit-flex:1;flex:1;overflow:hidden}.uni-navbar__header-container-inner[data-v-7873cfdb]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-flex:1;-webkit-flex:1;flex:1;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;align-items:center;overflow:hidden;font-family:PingFang SC;font-size:%?32?%;font-weight:400}.uni-navbar__placeholder-view[data-v-7873cfdb]{height:44px}.uni-navbar--fixed[data-v-7873cfdb]{position:fixed;z-index:500;left:var(--window-left);right:var(--window-right)}.uni-navbar--shadow[data-v-7873cfdb]{box-shadow:0 1px 6px #ccc}.uni-navbar--border[data-v-7873cfdb]{border-bottom-width:%?1?%;border-bottom-style:solid;border-bottom-color:#eee}.uni-ellipsis-1[data-v-7873cfdb]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}',""]),t.exports=e},b111:function(t,e,i){"use strict";var n=i("0823"),a=i.n(n);a.a},e2cf:function(t,e,i){"use strict";var n=i("1b18"),a=i.n(n);a.a}}]);