(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-ucenter-index-storesetup-setdoortxt-index"],{"00ac":function(e,t,i){"use strict";var n=i("f07e"),a=i("c964"),s=(i("99af"),i("4de4"),i("c740"),i("14d9"),i("f4b3"),i("e9c4"),i("a9e3"),i("b64b"),i("d3b7"),i("ac1f"),i("00b4"),{data:function(){return{value:[],addressList:[],provinceList:[],cityList:[],areaList:[],indicatorStyle:"height: 50px;",provinceIndex:0,cityIndex:0,areaIndex:0,animationData:{}}},props:{column:{type:Number,default:3},defaultValue:{default:function(){return""}},visible:{type:Boolean,default:function(){return!1}},maskCloseAble:{type:Boolean,default:function(){return!0}}},watch:{visible:function(e){this.changeActive()},defaultValue:function(){this.init()}},created:function(){this.getTheProvince()},mounted:function(){},methods:{getTheProvince:function(){var e=this;return Object(a["a"])(Object(n["a"])().mark((function t(){return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get(e.$requestUrl.crm.getTheLocationNew).then((function(t){0==t.data.code&&(e.addressList=t.data.data,e.init())}));case 2:case"end":return t.stop()}}),t)})))()},init:function(){var e=this,t=[];if(this.addressList.filter((function(e){t.push({value:e.value,label:e.label})})),this.provinceList=[].concat(t),this.defaultValue){if(Array.isArray(this.defaultValue)&&this.defaultValue.length>=2){var i=this.defaultValue[0],n=this.defaultValue[1];this.provinceIndex=0,this.cityIndex=0,this.areaIndex=0,this.provinceIndex=this.addressList.findIndex((function(e){return e.label==i})),this.provinceIndex=this.provinceIndex>=0?this.provinceIndex:0,this.cityList=this.addressList[this.provinceIndex].children,this.cityIndex=this.cityList.findIndex((function(e){return e.label==n})),this.cityIndex=this.cityIndex>=0?this.cityIndex:0,this.areaList=this.cityList[this.cityIndex].children,this.defaultValue.length>2&&(this.areaIndex=this.areaList.findIndex((function(t){return t.label==e.defaultValue[2]}))),this.areaIndex=this.areaIndex>=0?this.areaIndex:0,this.$nextTick((function(){3==e.column?e.value=JSON.parse(JSON.stringify([e.provinceIndex,e.cityIndex,e.areaIndex])):2==e.column&&(e.value=JSON.parse(JSON.stringify([e.provinceIndex,e.cityIndex])))}))}else if(/^\d{6}$/.test(this.defaultValue)){var a=this.defaultValue.substr(0,2),s=this.defaultValue.substr(0,4);this.provinceIndex=0,this.cityIndex=0,this.areaIndex=0,this.provinceIndex=this.addressList.findIndex((function(e){return e.value==a})),this.provinceIndex=this.provinceIndex>=0?this.provinceIndex:0,this.cityList=this.addressList[this.provinceIndex].children,this.cityIndex=this.cityList.findIndex((function(e){return e.value==s})),this.cityIndex=this.cityIndex>=0?this.cityIndex:0,this.areaList=this.cityList[this.cityIndex].children,this.areaIndex=this.areaList.findIndex((function(t){return t.value==e.defaultValue})),this.areaIndex=this.areaIndex>=0?this.areaIndex:0,this.$nextTick((function(){3==e.column?e.value=JSON.parse(JSON.stringify([e.provinceIndex,e.cityIndex,e.areaIndex])):2==e.column&&(e.value=JSON.parse(JSON.stringify([e.provinceIndex,e.cityIndex])))}))}else{var o,r;this.cityList=null===(o=this.addressList[0])||void 0===o?void 0:o.children,this.areaList=null===(r=this.addressList[0])||void 0===r||null===(r=r.children[0])||void 0===r?void 0:r.children}}else{var l,c;this.cityList=null===(l=this.addressList[0])||void 0===l?void 0:l.children,this.areaList=null===(c=this.addressList[0])||void 0===c||null===(c=c.children[0])||void 0===c?void 0:c.children}this.changeActive()},confirm:function(){var e=this.addressList[this.provinceIndex].children;3==this.column?this.$emit("confirm",{code:e?e[this.cityIndex].children[this.areaIndex].value:this.addressList[this.provinceIndex].value,name:e?this.addressList[this.provinceIndex].label+this.addressList[this.provinceIndex].children[this.cityIndex].label+this.addressList[this.provinceIndex].children[this.cityIndex].children[this.areaIndex].label:this.addressList[this.provinceIndex].label,provinceName:this.addressList[this.provinceIndex].label,provinceCode:this.addressList[this.provinceIndex].value,cityName:e?e[this.cityIndex].label:"",cityCode:e?e[this.cityIndex].value:"",areaName:e?e[this.cityIndex].children[this.areaIndex].label:"",areaCode:e?e[this.cityIndex].children[this.areaIndex].value:""}):2==this.column?this.$emit("confirm",{code:this.addressList[this.provinceIndex].children[this.cityIndex].children[this.areaIndex].value.substring(0,4)+"00",name:this.addressList[this.provinceIndex].label+this.addressList[this.provinceIndex].children[this.cityIndex].label,provinceName:this.addressList[this.provinceIndex].label,provinceCode:this.addressList[this.provinceIndex].value,cityName:this.addressList[this.provinceIndex].children[this.cityIndex].label}):uni.showToast({title:"目前column只能传2和3",icon:"none"})},cancel:function(){this.$emit("cancel")},changeActive:function(){var e="-315px";this.visible&&(e=0);var t=uni.createAnimation({duration:400,timingFunction:"linear"});t.bottom(e).step(),this.animationData=t.export()},bindChange:function(e){e.detail.value[0]=e.detail.value[0]||0,e.detail.value[1]=e.detail.value[1]||0,e.detail.value[2]=e.detail.value[2]||0,e.detail.value[0]!=this.provinceIndex?this.provinceChange(e.detail.value[0]):e.detail.value[1]!=this.cityIndex?this.cityChange(e.detail.value[1]):e.detail.value[2]!=this.areaIndex&&this.areaChange(e.detail.value[2])},provinceChange:function(e){this.provinceIndex=e,this.cityIndex=0,this.areaIndex=0,this.value=[e,0,0].concat(),this.cityList=this.addressList[e].children?this.addressList[e].children:[],this.areaList=this.addressList[e].children?this.addressList[e].children[0].children:[]},cityChange:function(e){this.cityIndex=e,this.areaIndex=0,this.value=[this.provinceIndex,e,0].concat(),this.cityList=this.addressList[this.provinceIndex].children?this.addressList[this.provinceIndex].children:[],this.areaList=this.addressList[this.provinceIndex].children?this.addressList[this.provinceIndex].children[e].children:[]},areaChange:function(e){this.areaIndex=e},close:function(){this.maskCloseAble&&this.cancel()}}}),o=s,r=(i("2511"),i("f0c5")),l=Object(r["a"])(o,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"pupop"},[i("v-uni-view",{staticClass:"popup-box",attrs:{animation:e.animationData}},[i("v-uni-view",{staticClass:"pupop-btn"},[i("v-uni-view",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.cancel.apply(void 0,arguments)}}},[e._v("取消")]),i("v-uni-view",{staticStyle:{color:"#fac740"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.confirm.apply(void 0,arguments)}}},[e._v("确定")])],1),i("v-uni-picker-view",{staticClass:"picker-view",attrs:{value:e.value,"indicator-style":e.indicatorStyle},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.bindChange.apply(void 0,arguments)}}},[i("v-uni-picker-view-column",e._l(e.provinceList,(function(t,n){return i("v-uni-view",{key:n,staticClass:"item"},[e._v(e._s(t.label))])})),1),i("v-uni-picker-view-column",e._l(e.cityList,(function(t,n){return i("v-uni-view",{key:n,staticClass:"item"},[e._v(e._s(t.label))])})),1),3==e.column?i("v-uni-picker-view-column",e._l(e.areaList,(function(t,n){return i("v-uni-view",{key:n,staticClass:"item"},[e._v(e._s(t.label))])})),1):e._e()],1)],1),i("v-uni-view",{class:e.visible?"pupop-model":"pupop-models",on:{touchmove:function(t){t.stopPropagation(),t.preventDefault(),arguments[0]=t=e.$handleEvent(t)},click:function(t){arguments[0]=t=e.$handleEvent(t),e.close.apply(void 0,arguments)}}})],1)}),[],!1,null,"a320ee10",null,!1,void 0,void 0);t["a"]=l.exports},"0a4b":function(e,t,i){"use strict";var n=i("4f30"),a=i.n(n);a.a},"0df0":function(e,t,i){"use strict";i.r(t);var n=i("18cc"),a=n["a"],s=(i("a55f"),i("f0c5")),o=Object(s["a"])(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"uni-file-picker",class:{"file-picker-mini":"mini"===e.styleType}},[e.title?i("v-uni-view",{staticClass:"uni-file-picker__header"},[i("v-uni-text",{staticClass:"file-title"},[e._v(e._s(e.title))]),i("v-uni-text",{staticClass:"file-count"},[e._v(e._s(e.filesList.length)+"/"+e._s(e.limitLength))])],1):e._e(),"image"===e.fileMediatype&&"grid"===e.showType?i("upload-image",{attrs:{readonly:e.readonly,"image-styles":e.innerImageStyles,"files-list":e.filesList,limit:e.limitLength,disablePreview:e.disablePreview,delIcon:e.delIcon},on:{uploadFiles:function(t){arguments[0]=t=e.$handleEvent(t),e.uploadFiles.apply(void 0,arguments)},choose:function(t){arguments[0]=t=e.$handleEvent(t),e.choose.apply(void 0,arguments)},delFile:function(t){arguments[0]=t=e.$handleEvent(t),e.delFile.apply(void 0,arguments)}}},[e._t("default",[i("v-uni-view",{staticClass:"is-add"},[i("v-uni-view",{staticClass:"icon-add"}),i("v-uni-view",{staticClass:"icon-add icon-add-rotate"})],1)])],2):e._e(),"image"!==e.fileMediatype||"grid"!==e.showType?i("upload-file",{attrs:{readonly:e.readonly,"list-styles":e.listStyles,"files-list":e.filesList,showType:e.showType,delIcon:e.delIcon},on:{uploadFiles:function(t){arguments[0]=t=e.$handleEvent(t),e.uploadFiles.apply(void 0,arguments)},choose:function(t){arguments[0]=t=e.$handleEvent(t),e.choose.apply(void 0,arguments)},delFile:function(t){arguments[0]=t=e.$handleEvent(t),e.delFile.apply(void 0,arguments)}}},[e._t("default",[i("v-uni-button",{attrs:{type:"primary",size:"mini"}},[e._v("选择文件")])])],2):e._e()],1)}),[],!1,null,"7a9b8e6a",null,!1,void 0,void 0);t["default"]=o.exports},"11f2":function(e,t,i){"use strict";i.r(t);var n={o2NavBar:i("61fd").default,uniFilePicker:i("0df0").default},a=i("54f8"),s=i("f07e"),o=i("c964"),r=(i("a15b"),i("d81d"),i("14d9"),i("fb6a"),i("f4b3"),i("e9c4"),i("d3b7"),i("acd8"),i("ac1f"),i("00b4"),i("466d"),i("5319"),i("2c1b"),i("58cc")),l=i("00ac"),c=i("4514"),d={name:"storeDetail",components:{LineInfo:r["a"],cityPicker:l["a"]},mounted:function(){},onLoad:function(e){e.id&&(this.merchantCode=e.id),e.returnPath&&(this.returnPath=e.returnPath)},onReady:function(){this.getUserDataList()},data:function(){return{longLat:"",latitude:30.606256,longitude:114.21065,defaultIcon:"static/mapicon/mapicon.png",customIcons:[{type:"门店",icon:"/static/mapicon/mapicon.png"},{type:"总部",icon:"/static/mapicon/mapicon.png"}],wordCity:"",genderList:"",rangeStores:[],merchantLogoList:[],merchantPhoto:[],indexRage:0,myselfGps:"点击获取当前位置",fileList:[],returnPath:"",merchantCode:"",setDoor:{merchantId:"",merchantFullName:"",storeIntroduction:"",phone:"",owner:"",address:"",provinceName:"",cityName:"",districtName:"",city:"",merchantPhoto:"",merchantLogoPic:""},visible:!1,maskCloseAble:!0,str:"",defaultValue:"",regionalData:"",cityColumn:3,queryparams:{},error:{},addressList:[],imagAddOpen:!0}},created:function(){},methods:{validateInput:function(e){var t=e.target.value,i=t.match(/[\u4e00-\u9fa5]/g),n=i?i.length:0,a=t.replace(/[\u4e00-\u9fa5]/g,"").length,s=2*n+a;s>60&&(this.setDoor.owner=t.slice(0,-1))},seturl:function(){uni.redirectTo({url:"/pages/ucenter/index/storesetup/index"})},MapIp:function(){UniMap({provider:"amap ",key:"d2a859804bed3e650d70f18a9c25e4c2",needOriginalResult:!0})},routeMap:function(){},getMerchantList:function(){var e=this;return this.$http.get("/cartech-store-user/v1/store/listStoreByRoles?roleCodes=cartech_store_admin").then((function(t){var i;if(0===t.data.code){var n=(null===(i=t.data)||void 0===i?void 0:i.data)||[];n.map((function(e){return e.xwName}));e.rangeStores=n,e.setDoor.merchantId=n[0].xwCode,e.storeDetails(n[0].xwCode),e.$hideLoading()}})).catch((function(t){e.$hideLoading()}))},bindOutletsChange:function(e){this.setDoor.merchantId=this.rangeStores[e.detail.value].xwCode,this.indexRage=e.detail.value,this.storeDetails(this.rangeStores[e.detail.value].xwCode)},open:function(){this.visible=!0},confirm:function(e){this.regionalData=e,this.setDoor.provinceName=this.regionalData.provinceName,this.setDoor.cityName=this.regionalData.cityName,this.setDoor.districtName=this.regionalData.areaName,this.setDoor.province=this.regionalData.provinceCode,this.setDoor.city=this.regionalData.cityCode,this.setDoor.district=this.regionalData.areaCode,this.wordCity=this.regionalData.name,this.str=JSON.stringify(e),this.visible=!1},cancel:function(){this.visible=!1},validatePhoneNumber:function(e){return/^1[3-9]\d{9}$/.test(e)},goBrand:function(){this.$Router.push({name:"evaluateBrand",params:{showPage:"evaluateCar"}})},extractFileNameAndExtension:function(e){if(e){var t=e.split("/").pop(),i=t.split(".").slice(0,-1).join("."),n=t.split(".").pop(),a={name:decodeURIComponent(i)+"."+n,extname:n,url:e};return a}return null},storeDetails:function(e){var t=this,i=this.$requestUrl.ktcStore.queryMerchantDetail;uni.showLoading({title:"加载中"}),this.$http.get(i,{merchantCode:e}).then((function(e){if(uni.hideLoading(),0===e.data.code){var i;t.setDoor=null===(i=e.data)||void 0===i?void 0:i.data;var n=[e.data.data.province,e.data.data.city,e.data.data.district],a=n.map((function(e){return t.findLabelByCode(t.addressList,e)}));t.defaultValue=a,t.wordCity=a.join("");var s=t.extractFileNameAndExtension(e.data.data.merchantLogoPic),o=t.extractFileNameAndExtension(e.data.data.merchantPhoto),r=s,l=o;r&&t.merchantLogoList.push(r),l&&t.merchantPhoto.push(l);e.data.data;t.longLat=e.data.data.longitude+","+e.data.data.latitude,t.latitude=parseFloat(e.data.data.longitude),t.longitude=parseFloat(e.data.data.latitude)}else uni.showLoading({title:"加载中"}),uni.hideLoading(),uni.showToast({title:e.data.message,icon:"none",duration:2e3})})).catch((function(e){uni.hideLoading()})),uni.hideLoading()},submit:function(e){var t=this;if(this.imagAddOpen)if(this.validatePhoneNumber(this.setDoor.phone)){this.setDoor.merchantMarketing={thirdShopCode:this.setDoor.merchantCode},this.setDoor.landlineNumber=" ";var i=this.$requestUrl.ktcStore.updateMerchantDetail;uni.showLoading({title:"加载中"}),this.$http.post(i,this.setDoor).then((function(e){uni.hideLoading(),0===e.data.code?(uni.showToast({title:"编辑成功！",icon:"none",duration:2e3}),setTimeout((function(){uni.navigateBack({delta:1})}),700),t.$nextTick((function(){t.$EventBus.$emit("refresh-customer-list")}))):uni.showToast({title:e.data.message,icon:"none",duration:2e3})})).catch((function(e){uni.hideLoading()})),uni.hideLoading()}else uni.showToast({title:"您的手机号有误！",icon:"none",duration:2e3});else uni.showToast({title:"请等待图片上传完毕",icon:"none",duration:2e3})},handleFileSelect:function(e,t){var i=this;return Object(o["a"])(Object(s["a"])().mark((function n(){var a,o,r;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=e.tempFilePaths,e.tempFiles,i.imagAddOpen=!1,null!==a&&void 0!==a&&a.length){n.next=4;break}return n.abrupt("return");case 4:return n.prev=4,n.next=7,Object(c["a"])({name:"file",url:i.$requestUrl.crm.upload.slice(1),filePath:a[a.length-1]});case 7:if(o=n.sent,0===o.code){n.next=11;break}return errorHandle(data.message||"上传失败"),n.abrupt("return");case 11:uni.showToast({title:"上传成功",icon:"success",duration:500}),i.imagAddOpen=!0,r=i.extractFileNameAndExtension(o.data.url),"2"==t?(i.setDoor.merchantPhoto=r.url,i.merchantPhoto[0]=r):(i.setDoor.merchantLogoPic=r.url,i.merchantLogoList[0]=r),i.detail.customerPictures=i.fileList.map((function(e){var t=e.url,i=e.name,n=e.extname;return{url:t,name:i,extname:n}})),n.next=21;break;case 18:n.prev=18,n.t0=n["catch"](4),console.warn(n.t0);case 21:case"end":return n.stop()}}),n,null,[[4,18]])})))()},deleteImageUpload:function(e){"merchantLogoList"===e?(this.merchantLogoList=[],this.setDoor.merchantLogoPic=null):"merchantPhoto"===e&&(this.merchantPhoto=[],this.setDoor.merchantPhoto=null)},failImageUpload:function(e){},findLabelByCode:function(e,t){var i,n=Object(a["a"])(e);try{for(n.s();!(i=n.n()).done;){var s=i.value;if(s.value===t)return s.label;if(s.children){var o=this.findLabelByCode(s.children,t);if(o)return o}}}catch(r){n.e(r)}finally{n.f()}return null},getUserDataList:function(){var e=this;uni.showLoading({title:"加载中"}),this.$http.get(this.$requestUrl.crm.getTheLocationNew).then((function(t){0==t.data.code&&(e.addressList=t.data.data,e.storeDetails(e.merchantCode))})).finally((function(){uni.hideLoading()}))}},computed:{},watch:{datetimesingle:function(e){},range:function(e){},datetimerange:function(e){}}},u=d,p=(i("0a4b"),i("f0c5")),f=Object(p["a"])(u,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"userDetail"},[i("o2-nav-bar",{attrs:{fixed:!0,"status-bar":!0,title:"门店信息"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.seturl.apply(void 0,arguments)}}}),i("hr",{staticStyle:{margin:"0 auto",border:"none","border-top":"1px solid #e8e8e8"}}),i("line-info",{attrs:{label:"门店名称","show-select":!1}},[i("v-uni-view",{staticClass:"df aic jcsb f1"},[i("v-uni-input",{staticClass:"line-input",staticStyle:{"font-size":"28rpx"},attrs:{disabled:!0,placeholder:"请输入","placeholder-class":"fs15",maxlength:20},model:{value:e.setDoor.merchantFullName,callback:function(t){e.$set(e.setDoor,"merchantFullName",t)},expression:"setDoor.merchantFullName"}})],1)],1),i("hr",{staticStyle:{margin:"0 auto",border:"none","border-top":"1px solid #e8e8e8"}}),i("line-info",{attrs:{label:"对外简称","show-select":!1}},[i("v-uni-view",{staticClass:"df aic jcsb f1"},[i("v-uni-input",{staticClass:"line-input",staticStyle:{"font-size":"28rpx"},attrs:{placeholder:"请输入对外简称","placeholder-class":"fs15",maxlength:20},model:{value:e.setDoor.storeIntroduction,callback:function(t){e.$set(e.setDoor,"storeIntroduction",t)},expression:"setDoor.storeIntroduction"}})],1)],1),i("hr",{staticStyle:{margin:"0 auto",border:"none","border-top":"1px solid #e8e8e8"}}),i("line-info",{attrs:{label:"联系人","show-select":!1}},[i("v-uni-view",{staticClass:"df aic jcsb f1"},[i("v-uni-input",{staticClass:"line-input",staticStyle:{"font-size":"28rpx"},attrs:{placeholder:"请输入联系人姓名","placeholder-class":"fs15",maxlength:12},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.validateInput.apply(void 0,arguments)}},model:{value:e.setDoor.owner,callback:function(t){e.$set(e.setDoor,"owner",t)},expression:"setDoor.owner"}})],1)],1),i("hr",{staticStyle:{margin:"0 auto",border:"none","border-top":"1px solid #e8e8e8"}}),i("line-info",{attrs:{label:"手机号码","show-select":!1}},[i("v-uni-view",{staticClass:"df aic jcsb f1"},[i("v-uni-input",{staticClass:"line-input",staticStyle:{"font-size":"28rpx"},attrs:{placeholder:"请输入手机号码","placeholder-class":"fs15",maxlength:13,type:"number"},model:{value:e.setDoor.phone,callback:function(t){e.$set(e.setDoor,"phone",t)},expression:"setDoor.phone"}})],1)],1),i("hr",{staticStyle:{margin:"0 auto",border:"none","border-top":"1px solid #e8e8e8"}}),i("hr",{staticStyle:{margin:"0 auto",border:"none","border-top":"1px solid #e8e8e8"}}),i("v-uni-view",[i("line-info",{attrs:{label:"所属地","show-select":!0,content:e.wordCity},on:{select:function(t){arguments[0]=t=e.$handleEvent(t),e.open.apply(void 0,arguments)}}}),i("cityPicker",{attrs:{column:e.cityColumn,"default-value":e.defaultValue,"mask-close-able":e.maskCloseAble,visible:e.visible},on:{confirm:function(t){arguments[0]=t=e.$handleEvent(t),e.confirm.apply(void 0,arguments)},cancel:function(t){arguments[0]=t=e.$handleEvent(t),e.cancel.apply(void 0,arguments)}}})],1),i("hr",{staticStyle:{margin:"0 auto",border:"none","border-top":"1px solid #e8e8e8"}}),i("line-info",{attrs:{label:"详细地址","show-select":!1}},[i("v-uni-view",{staticClass:"df aic jcsb f1"},[i("v-uni-input",{staticClass:"line-input",staticStyle:{"font-size":"28rpx",width:"480rpx"},attrs:{clearable:!0,placeholder:"请输入详细地址","placeholder-class":"fs15"},model:{value:e.setDoor.address,callback:function(t){e.$set(e.setDoor,"address",t)},expression:"setDoor.address"}})],1)],1),i("hr",{staticStyle:{margin:"0 auto",border:"none","border-top":"1px solid #e8e8e8"}}),i("br"),i("line-info",{staticClass:"file-upload",attrs:{label:"店铺LOGO","show-select":!1}},[i("br")]),i("div",[i("uni-file-picker",{staticStyle:{"margin-left":"25%"},attrs:{fileMediatype:"image",limit:"1"},on:{select:function(t){arguments[0]=t=e.$handleEvent(t),function(t){return e.handleFileSelect(t,"1")}.apply(void 0,arguments)},delete:function(t){arguments[0]=t=e.$handleEvent(t),e.deleteImageUpload("merchantLogoList")}},model:{value:e.merchantLogoList,callback:function(t){e.merchantLogoList=t},expression:"merchantLogoList"}})],1),i("hr",{staticStyle:{margin:"0 auto","margin-top":"10px",border:"none","border-top":"1px solid #e8e8e8"}}),i("line-info",{staticClass:"file-upload",staticStyle:{lineHeight:"10px"},attrs:{label:"门店图片",content:"只能传输一张","show-select":!1}}),i("uni-file-picker",{staticStyle:{"margin-left":"25%"},attrs:{fileMediatype:"image",limit:"1"},on:{select:function(t){arguments[0]=t=e.$handleEvent(t),function(t){return e.handleFileSelect(t,2)}.apply(void 0,arguments)},delete:function(t){arguments[0]=t=e.$handleEvent(t),e.deleteImageUpload("merchantPhoto")}},model:{value:e.merchantPhoto,callback:function(t){e.merchantPhoto=t},expression:"merchantPhoto"}}),i("v-uni-view",[i("v-uni-view")],1),i("br"),i("hr",{staticStyle:{margin:"0 auto",border:"none","border-top":"1px solid #e8e8e8"}}),i("v-uni-view",{staticClass:"setdoor-button-bottom"},[i("v-uni-button",{staticClass:"buttonBtn",attrs:{type:"primary"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.submit()}}},[e._v("保存")])],1)],1)}),[],!1,null,"ce1e10bc",null,!1,n,void 0);t["default"]=f.exports},"13fa":function(e,t,i){var n=i("24fb");t=n(!1),t.push([e.i,'@charset "UTF-8";\n\n\n/* 行为相关颜色 */.uni-file-picker__container[data-v-de958866]{display:-webkit-box;display:-webkit-flex;display:flex;box-sizing:border-box;-webkit-flex-wrap:wrap;flex-wrap:wrap;margin:-5px}.file-picker__box[data-v-de958866]{position:relative;width:33.3%;height:0;padding-top:33.33%;box-sizing:border-box}.file-picker__box-content[data-v-de958866]{position:absolute;top:0;right:0;bottom:0;left:0;margin:5px;border:1px #eee solid;border-radius:5px;overflow:hidden}.file-picker__progress[data-v-de958866]{position:absolute;bottom:0;left:0;right:0;\n  /* border: 1px red solid; */z-index:2}.file-picker__progress-item[data-v-de958866]{width:100%}.file-picker__mask[data-v-de958866]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;position:absolute;right:0;top:0;bottom:0;left:0;color:#fff;font-size:12px;background-color:rgba(0,0,0,.4)}.file-image[data-v-de958866]{width:100%;height:100%}.is-add[data-v-de958866]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.icon-add[data-v-de958866]{width:50px;height:5px;background-color:#f1f1f1;border-radius:2px}.upload-image-rotate[data-v-de958866]{position:absolute;-webkit-transform:rotate(90deg);transform:rotate(90deg)}.icon-del-box[data-v-de958866]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;position:absolute;top:3px;right:3px;height:26px;width:26px;border-radius:50%;background-color:rgba(0,0,0,.5);z-index:2;-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}.icon-del[data-v-de958866]{width:15px;height:2px;background-color:#fff;border-radius:2px}',""]),e.exports=t},"15cf":function(e,t,i){var n=i("24fb");t=n(!1),t.push([e.i,'@charset "UTF-8";\n\n\n/* 行为相关颜色 */.pupop .popup-box[data-v-a320ee10]{position:fixed;left:0;bottom:-315px;z-index:99999;background:#fff;padding-bottom:50px}.pupop .popup-box .pupop-btn[data-v-a320ee10]{height:40px;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding:0 %?30?%;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;font-size:%?32?%}.pupop .pupop-model[data-v-a320ee10]{position:fixed;left:0;top:0;width:100%;height:100%;z-index:9999;background:rgba(0,0,0,.5)}.pupop .pupop-models[data-v-a320ee10]{display:none}.pupop .picker-view[data-v-a320ee10]{width:100vw;height:225px;margin-top:%?20?%}.pupop .item[data-v-a320ee10]{height:50px;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;text-align:center;line-height:50px}',""]),e.exports=t},"18cc":function(e,t,i){"use strict";(function(e){var n=i("d0ff"),a=i("f3f3"),s=i("f07e"),o=i("c964"),r=(i("99af"),i("c740"),i("4160"),i("a15b"),i("baa5"),i("14d9"),i("a434"),i("a9e3"),i("b64b"),i("d3b7"),i("e25e"),i("ac1f"),i("00b4"),i("3ca3"),i("5319"),i("159b"),i("ddb0"),i("720e")),l=i("6654"),c=i("50b1"),d=i("606d");t["a"]={name:"uniFilePicker",components:{uploadImage:c["a"],uploadFile:d["a"]},options:{virtualHost:!0},emits:["select","success","fail","progress","delete","update:modelValue","input"],props:{modelValue:{type:[Array,Object],default:function(){return[]}},value:{type:[Array,Object],default:function(){return[]}},disabled:{type:Boolean,default:!1},disablePreview:{type:Boolean,default:!1},delIcon:{type:Boolean,default:!0},autoUpload:{type:Boolean,default:!0},limit:{type:[Number,String],default:9},mode:{type:String,default:"grid"},fileMediatype:{type:String,default:"image"},fileExtname:{type:[Array,String],default:function(){return[]}},title:{type:String,default:""},listStyles:{type:Object,default:function(){return{border:!0,dividline:!0,borderStyle:{}}}},imageStyles:{type:Object,default:function(){return{width:"auto",height:"auto"}}},readonly:{type:Boolean,default:!1},returnType:{type:String,default:"array"},sizeType:{type:Array,default:function(){return["original","compressed"]}},sourceType:{type:Array,default:function(){return["album","camera"]}},provider:{type:String,default:""},addIconRotate:{type:Boolean,default:!0},styleType:{type:String,default:"default"}},data:function(){return{files:[],localValue:[]}},watch:{value:{handler:function(e,t){this.setValue(e,t)},immediate:!0},modelValue:{handler:function(e,t){this.setValue(e,t)},immediate:!0}},computed:{filesList:function(){var e=[];return this.files.forEach((function(t){e.push(t)})),e},showType:function(){return"image"===this.fileMediatype?this.mode:"list"},limitLength:function(){return"object"===this.returnType?1:this.limit?this.limit>=9?9:this.limit:1},innerImageStyles:function(){return"mini"===this.styleType?{width:"112rpx",height:"112rpx",paddingTop:"16.3%",borderRadius:"12rpx",border:{width:"0",radius:"12rpx"}}:this.imageStyles}},created:function(){e.config&&e.config.provider||(this.noSpace=!0,e.chooseAndUploadFile=r["a"]),this.form=this.getForm("uniForms"),this.formItem=this.getForm("uniFormsItem"),this.form&&this.formItem&&this.formItem.name&&(this.rename=this.formItem.name,this.form.inputChildrens.push(this))},methods:{clearFiles:function(e){var t=this;0===e||e?this.files.splice(e,1):(this.files=[],this.$nextTick((function(){t.setEmit()}))),this.$nextTick((function(){t.setEmit()}))},upload:function(){var e=[];return this.files.forEach((function(t,i){"ready"!==t.status&&"error"!==t.status||e.push(Object.assign({},t))})),this.uploadFiles(e)},setValue:function(e,t){var i=this;return Object(o["a"])(Object(s["a"])().mark((function t(){var n,a,r,l;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=function(){var e=Object(o["a"])(Object(s["a"])().mark((function e(t){var n,a;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=/cloud:\/\/([\w.]+\/?)\S*/,a="",a=t.fileID?t.fileID:t.url,!n.test(a)){e.next=8;break}return t.fileID=a,e.next=7,i.getTempFileURL(a);case 7:t.url=e.sent;case 8:return t.url&&(t.path=t.url),e.abrupt("return",t);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),"object"!==i.returnType){t.next=10;break}if(!e){t.next=7;break}return t.next=5,n(e);case 5:t.next=8;break;case 7:e={};case 8:t.next=19;break;case 10:e||(e=[]),a=0;case 12:if(!(a<e.length)){t.next=19;break}return r=e[a],t.next=16,n(r);case 16:a++,t.next=12;break;case 19:i.localValue=e,i.form&&i.formItem&&!i.is_reset&&(i.is_reset=!1,i.formItem.setValue(i.localValue)),l=Object.keys(e).length>0?e:[],i.files=[].concat(l);case 23:case"end":return t.stop()}}),t)})))()},choose:function(){this.disabled||(this.files.length>=Number(this.limitLength)&&"grid"!==this.showType&&"array"===this.returnType?uni.showToast({title:"您最多选择 ".concat(this.limitLength," 个文件"),icon:"none"}):this.chooseFiles())},chooseFiles:function(){var t=this,i=Object(l["a"])(this.fileExtname);e.chooseAndUploadFile({type:this.fileMediatype,compressed:!1,sizeType:this.sizeType,sourceType:this.sourceType,extension:i.length>0?i:void 0,count:this.limitLength-this.files.length,onChooseFile:this.chooseFileCallback,onUploadProgress:function(e){t.setProgress(e,e.index)}}).then((function(e){t.setSuccessAndError(e.tempFiles)})).catch((function(e){console.warn("uni-file-picker 选择失败",e)}))},chooseFileCallback:function(e){var t=this;return Object(o["a"])(Object(s["a"])().mark((function i(){var n,o,r,c,d,u,p,f;return Object(s["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:n=Object(l["a"])(t.fileExtname),o=1===Number(t.limitLength)&&t.disablePreview&&!t.disabled||"object"===t.returnType,o&&(t.files=[]),r=Object(l["c"])(e,n),c=r.filePaths,d=r.files,n&&n.length>0||(c=e.tempFilePaths,d=e.tempFiles),u=[],p=0;case 7:if(!(p<d.length)){i.next=21;break}if(!(t.limitLength-t.files.length<=0)){i.next=10;break}return i.abrupt("break",21);case 10:return d[p].uuid=Date.now(),i.next=13,Object(l["b"])(d[p],t.fileMediatype);case 13:f=i.sent,f.progress=0,f.status="ready",t.files.push(f),u.push(Object(a["a"])(Object(a["a"])({},f),{},{file:d[p]}));case 18:p++,i.next=7;break;case 21:t.$emit("select",{tempFiles:u,tempFilePaths:c}),e.tempFiles=d,t.autoUpload&&!t.noSpace||(e.tempFiles=[]),e.tempFiles.forEach((function(e,i){t.provider&&(e.provider=t.provider);var n=e.name.split("."),a=n.pop(),s=n.join(".").replace(/[\s/?<>\\:*|":]/g,"_");e.cloudPath=s+"_"+Date.now()+"_"+i+"."+a}));case 25:case"end":return i.stop()}}),i)})))()},uploadFiles:function(e){var t=this;return e=[].concat(e),r["b"].call(this,e,5,(function(e){t.setProgress(e,e.index,!0)})).then((function(e){return t.setSuccessAndError(e),e})).catch((function(e){console.warn("uni-file-picker uploadFiles error",e)}))},setSuccessAndError:function(e,t){var i=this;return Object(o["a"])(Object(s["a"])().mark((function t(){var n,a,o,r,l,c;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=[],a=[],o=[],r=[],l=Object(s["a"])().mark((function t(){var l,d,u;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(l=e[c],d=l.uuid?i.files.findIndex((function(e){return e.uuid===l.uuid})):l.index,-1!==d&&i.files){t.next=4;break}return t.abrupt("return",1);case 4:if("request:fail"!==l.errMsg){t.next=12;break}i.files[d].url=l.path,i.files[d].status="error",i.files[d].errMsg=l.errMsg,a.push(i.files[d]),r.push(i.files[d].url),t.next=26;break;case 12:if(i.files[d].errMsg="",i.files[d].fileID=l.url,u=/cloud:\/\/([\w.]+\/?)\S*/,!u.test(l.url)){t.next=21;break}return t.next=18,i.getTempFileURL(l.url);case 18:i.files[d].url=t.sent,t.next=22;break;case 21:i.files[d].url=l.url;case 22:i.files[d].status="success",i.files[d].progress+=1,n.push(i.files[d]),o.push(i.files[d].fileID);case 26:case"end":return t.stop()}}),t)})),c=0;case 6:if(!(c<e.length)){t.next=13;break}return t.delegateYield(l(),"t0",8);case 8:if(!t.t0){t.next=10;break}return t.abrupt("break",13);case 10:c++,t.next=6;break;case 13:n.length>0&&(i.setEmit(),i.$emit("success",{tempFiles:i.backObject(n),tempFilePaths:o})),a.length>0&&i.$emit("fail",{tempFiles:i.backObject(a),tempFilePaths:r});case 15:case"end":return t.stop()}}),t)})))()},setProgress:function(e,t,i){this.files.length;var n=Math.round(100*e.loaded/e.total),a=t;i||(a=this.files.findIndex((function(t){return t.uuid===e.tempFile.uuid}))),-1!==a&&this.files[a]&&(this.files[a].progress=n-1,this.$emit("progress",{index:a,progress:parseInt(n),tempFile:this.files[a]}))},delFile:function(e){var t=this;this.$emit("delete",{index:e,tempFile:this.files[e],tempFilePath:this.files[e].url}),this.files.splice(e,1),this.$nextTick((function(){t.setEmit()}))},getFileExt:function(e){var t=e.lastIndexOf("."),i=e.length;return{name:e.substring(0,t),ext:e.substring(t+1,i)}},setEmit:function(){var e=[];"object"===this.returnType?(e=this.backObject(this.files)[0],this.localValue=e||null):(e=this.backObject(this.files),this.localValue||(this.localValue=[]),this.localValue=Object(n["a"])(e)),this.$emit("input",this.localValue)},backObject:function(e){var t=[];return e.forEach((function(e){t.push({extname:e.extname,fileType:e.fileType,image:e.image,name:e.name,path:e.path,size:e.size,fileID:e.fileID,url:e.url,uuid:e.uuid,status:e.status,cloudPath:e.cloudPath})})),t},getTempFileURL:function(t){return Object(o["a"])(Object(s["a"])().mark((function i(){var n;return Object(s["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return t={fileList:[].concat(t)},i.next=3,e.getTempFileURL(t);case 3:return n=i.sent,i.abrupt("return",n.fileList[0].tempFileURL||"");case 5:case"end":return i.stop()}}),i)})))()},getForm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"uniForms",t=this.$parent,i=t.$options.name;while(i!==e){if(t=t.$parent,!t)return!1;i=t.$options.name}return t}}}}).call(this,i("a9ff")["default"])},2511:function(e,t,i){"use strict";var n=i("49f2"),a=i.n(n);a.a},"333b":function(e,t,i){var n=i("24fb");t=n(!1),t.push([e.i,'@charset "UTF-8";\n\n\n/* 行为相关颜色 */.userDetail[data-v-ce1e10bc]{padding-bottom:%?100?%;overflow:hidden}.userDetail .example-body[data-v-ce1e10bc]{background-color:#fff;width:270px}.userDetail .lineinput[data-v-ce1e10bc]{color:#7d7d7d;font-family:PingFang SC;font-style:normal;font-weight:400}.userDetail .content[data-v-ce1e10bc]{-webkit-box-flex:1;-webkit-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.userDetail .file-upload-picker[data-v-ce1e10bc]{margin-left:20%;-webkit-animation:none;animation:none}.userDetail .merchimg[data-v-ce1e10bc]{margin-left:20%}.userDetail .icon-del rotate[data-v-ce1e10bc]{display:none}.userDetail .setdoor-button-bottom[data-v-ce1e10bc]{position:fixed;left:0;right:0;bottom:0;display:-webkit-box;display:-webkit-flex;display:flex;gap:20px;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;padding:10px;min-height:64px;background-color:#fff;z-index:99}.userDetail .setdoor-button-bottom .buttonBtn[data-v-ce1e10bc]{background-color:#f8b500;color:#fff;border-radius:23px;padding:0 %?30?%;height:46px;width:90%}.userDetail .line-input[data-v-ce1e10bc]{width:%?500?%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}',""]),e.exports=t},"3bdf":function(e,t,i){var n=i("a90f");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i("4f06").default;a("fe82ef34",n,!0,{sourceMap:!1,shadowMode:!1})},"40ca":function(e,t,i){var n=i("24fb");t=n(!1),t.push([e.i,'@charset "UTF-8";\n\n\n/* 行为相关颜色 */.uni-file-picker__files[data-v-2c3e0133]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start}.uni-file-picker__lists[data-v-2c3e0133]{position:relative;margin-top:5px;overflow:hidden}.file-picker__mask[data-v-2c3e0133]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;position:absolute;right:0;top:0;bottom:0;left:0;color:#fff;font-size:14px;background-color:rgba(0,0,0,.4)}.uni-file-picker__lists-box[data-v-2c3e0133]{position:relative}.uni-file-picker__item[data-v-2c3e0133]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding:8px 10px;padding-right:5px;padding-left:10px}.files-border[data-v-2c3e0133]{border-top:1px #eee solid}.files__name[data-v-2c3e0133]{-webkit-box-flex:1;-webkit-flex:1;flex:1;font-size:14px;color:#666;margin-right:25px;word-break:break-all;word-wrap:break-word}.icon-files[data-v-2c3e0133]{position:static;background-color:initial}.is-list-card[data-v-2c3e0133]{border:1px #eee solid;margin-bottom:5px;border-radius:5px;box-shadow:0 0 2px 0 rgba(0,0,0,.1);padding:5px}.files__image[data-v-2c3e0133]{width:40px;height:40px;margin-right:10px}.header-image[data-v-2c3e0133]{width:100%;height:100%}.is-text-box[data-v-2c3e0133]{border:1px #eee solid;border-radius:5px}.is-text-image[data-v-2c3e0133]{width:25px;height:25px;margin-left:5px}.upload-file-rotate[data-v-2c3e0133]{position:absolute;-webkit-transform:rotate(90deg);transform:rotate(90deg)}.icon-del-box[data-v-2c3e0133]{display:-webkit-box;display:-webkit-flex;display:flex;margin:auto 0;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;position:absolute;top:0;bottom:0;right:5px;height:26px;width:26px;z-index:2;-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}.icon-del[data-v-2c3e0133]{width:15px;height:1px;background-color:#333}@media (min-width:768px){.uni-file-picker__files[data-v-2c3e0133]{max-width:375px}}',""]),e.exports=t},4514:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("fc11"),a=i("f3f3"),s=(i("0122"),i("d0af"),i("d401"),i("99af"),i("4de4"),i("7db0"),i("caad"),i("c975"),i("a15b"),i("d81d"),i("14d9"),i("13d5"),i("f4b3"),i("e9c4"),i("a9e3"),i("b680"),i("4fadc"),i("b64b"),i("d3b7"),i("acd8"),i("e25e"),i("ac1f"),i("00b4"),i("25f0"),i("2532"),i("5319"),i("5b81"),i("71ea")),o=i.n(s);i("e143"),i("8f95"),i("484f"),i("da92"),i("c1fb");var r=function(e){return new Promise((function(t,i){var s=o.a.MMC,r=uni.getStorageSync("xsAppToken");uni.uploadFile(Object(a["a"])(Object(a["a"])({},e),{},{header:Object(n["a"])({Authorization:"Bearer "+r},"Access-Token",r),url:s+e.url,success:function(e){if(200===e.statusCode){var n={};try{n=JSON.parse(e.data||"{}")}catch(a){return void i(a)}t(n)}else i(e.errMsg)},fail:function(e){i(e)}}))}))}},"49f2":function(e,t,i){var n=i("15cf");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i("4f06").default;a("a26eaa8e",n,!0,{sourceMap:!1,shadowMode:!1})},"4f30":function(e,t,i){var n=i("333b");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i("4f06").default;a("1bca32a8",n,!0,{sourceMap:!1,shadowMode:!1})},"50b1":function(e,t,i){"use strict";var n=i("f3f3"),a=i("c9e9"),s=(i("99af"),i("4160"),i("c975"),i("14d9"),i("a9e3"),i("d3b7"),i("159b"),["width","height"]),o={name:"uploadImage",emits:["uploadFiles","choose","delFile"],props:{filesList:{type:Array,default:function(){return[]}},disabled:{type:Boolean,default:!1},disablePreview:{type:Boolean,default:!1},limit:{type:[Number,String],default:9},imageStyles:{type:Object,default:function(){return{width:"auto",height:"auto",border:{}}}},delIcon:{type:Boolean,default:!0},readonly:{type:Boolean,default:!1}},computed:{styles:function(){return Object.assign({width:"auto",height:"auto",border:{}},this.imageStyles)},boxStyle:function(){var e=this.styles,t=e.width,i=void 0===t?"auto":t,o=e.height,r=void 0===o?"auto":o,l=Object(a["a"])(e,s),c=Object(n["a"])({},l||{});"auto"===r?"auto"!==i?(c.height=this.value2px(i),c["padding-top"]=0):c.height=0:(c.height=this.value2px(r),c["padding-top"]=0),c.width="auto"===i?"auto"!==r?this.value2px(r):"33.3%":this.value2px(i);var d="";for(var u in c)d+="".concat(u,":").concat(c[u],";");return d},borderStyle:function(){var e=this.styles.border,t={};if("boolean"===typeof e)t.border=e?"1px #eee solid":"none";else{var i=e&&e.width||1;i=this.value2px(i);var n=e&&e.radius||3;n=this.value2px(n),t={"border-width":i,"border-style":e&&e.style||"solid","border-color":e&&e.color||"#eee","border-radius":n}}var a="";for(var s in t)a+="".concat(s,":").concat(t[s],";");return a}},methods:{uploadFiles:function(e,t){this.$emit("uploadFiles",e)},choose:function(){this.$emit("choose")},delFile:function(e){this.$emit("delFile",e)},prviewImage:function(e,t){var i=this,n=[];1===Number(this.limit)&&this.disablePreview&&!this.disabled&&this.$emit("choose"),this.disablePreview||(this.filesList.forEach((function(e){n.push(e.url)})),uni.previewImage({urls:n,current:t,onDelete:function(e){i.$emit("delFile",e)}}))},value2px:function(e){return"number"===typeof e?e+="px":-1===e.indexOf("%")&&(e=-1!==e.indexOf("px")?e:e+"px"),e}}},r=o,l=(i("a7bb"),i("f0c5")),c=Object(l["a"])(r,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"uni-file-picker__container"},[e._l(e.filesList,(function(t,n){return i("v-uni-view",{key:n,staticClass:"file-picker__box",style:e.boxStyle},[i("v-uni-view",{staticClass:"file-picker__box-content",style:e.borderStyle},[i("v-uni-image",{staticClass:"file-image",attrs:{src:t.url,mode:"aspectFill"},on:{click:function(i){i.stopPropagation(),arguments[0]=i=e.$handleEvent(i),e.prviewImage(t,n)}}}),e.delIcon&&!e.readonly?i("v-uni-view",{staticClass:"icon-del-box",on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.delFile(n)}}},[i("v-uni-view",{staticClass:"icon-del"}),i("v-uni-view",{staticClass:"icon-del upload-image-rotate"})],1):e._e(),t.progress&&100!==t.progress||0===t.progress?i("v-uni-view",{staticClass:"file-picker__progress"},[i("v-uni-progress",{staticClass:"file-picker__progress-item",attrs:{percent:-1===t.progress?0:t.progress,"stroke-width":"4",backgroundColor:t.errMsg?"#ff5a5f":"#EBEBEB"}})],1):e._e(),t.errMsg?i("v-uni-view",{staticClass:"file-picker__mask",on:{click:function(i){i.stopPropagation(),arguments[0]=i=e.$handleEvent(i),e.uploadFiles(t,n)}}},[e._v("点击重试")]):e._e()],1)],1)})),e.filesList.length<e.limit&&!e.readonly?i("v-uni-view",{staticClass:"file-picker__box",style:e.boxStyle},[i("v-uni-view",{staticClass:"file-picker__box-content is-add",style:e.borderStyle,on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.choose.apply(void 0,arguments)}}},[e._t("default",[i("v-uni-view",{staticClass:"icon-add"}),i("v-uni-view",{staticClass:"icon-add upload-image-rotate"})])],2)],1):e._e()],2)}),[],!1,null,"de958866",null,!1,void 0,void 0);t["a"]=c.exports},"606d":function(e,t,i){"use strict";i("99af"),i("4160"),i("c975"),i("14d9"),i("a9e3"),i("d3b7"),i("159b");var n={name:"uploadFile",emits:["uploadFiles","choose","delFile"],props:{filesList:{type:Array,default:function(){return[]}},delIcon:{type:Boolean,default:!0},limit:{type:[Number,String],default:9},showType:{type:String,default:""},listStyles:{type:Object,default:function(){return{border:!0,dividline:!0,borderStyle:{}}}},readonly:{type:Boolean,default:!1}},computed:{list:function(){var e=[];return this.filesList.forEach((function(t){e.push(t)})),e},styles:function(){return Object.assign({border:!0,dividline:!0,"border-style":{}},this.listStyles)},borderStyle:function(){var e=this.styles,t=e.borderStyle,i=e.border,n={};if(i){var a=t&&t.width||1;a=this.value2px(a);var s=t&&t.radius||5;s=this.value2px(s),n={"border-width":a,"border-style":t&&t.style||"solid","border-color":t&&t.color||"#eee","border-radius":s}}else n.border="none";var o="";for(var r in n)o+="".concat(r,":").concat(n[r],";");return o},borderLineStyle:function(){var e={},t=this.styles.borderStyle;if(t&&t.color&&(e["border-color"]=t.color),t&&t.width){var i=t&&t.width||1,n=t&&t.style||0;"number"===typeof i?i+="px":i=i.indexOf("px")?i:i+"px",e["border-width"]=i,"number"===typeof n?n+="px":n=n.indexOf("px")?n:n+"px",e["border-top-style"]=n}var a="";for(var s in e)a+="".concat(s,":").concat(e[s],";");return a}},methods:{uploadFiles:function(e,t){this.$emit("uploadFiles",{item:e,index:t})},choose:function(){this.$emit("choose")},delFile:function(e){this.$emit("delFile",e)},value2px:function(e){return"number"===typeof e?e+="px":e=-1!==e.indexOf("px")?e:e+"px",e}}},a=n,s=(i("a421"),i("f0c5")),o=Object(s["a"])(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"uni-file-picker__files"},[e.readonly?e._e():i("v-uni-view",{staticClass:"files-button",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.choose.apply(void 0,arguments)}}},[e._t("default")],2),e.list.length>0?i("v-uni-view",{staticClass:"uni-file-picker__lists is-text-box",style:e.borderStyle},e._l(e.list,(function(t,n){return i("v-uni-view",{key:n,staticClass:"uni-file-picker__lists-box",class:{"files-border":0!==n&&e.styles.dividline},style:0!==n&&e.styles.dividline&&e.borderLineStyle},[i("v-uni-view",{staticClass:"uni-file-picker__item"},[i("v-uni-view",{staticClass:"files__name"},[e._v(e._s(t.name))]),e.delIcon&&!e.readonly?i("v-uni-view",{staticClass:"icon-del-box icon-files",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.delFile(n)}}},[i("v-uni-view",{staticClass:"icon-del icon-files"}),i("v-uni-view",{staticClass:"icon-del upload-file-rotate"})],1):e._e()],1),t.progress&&100!==t.progress||0===t.progress?i("v-uni-view",{staticClass:"file-picker__progress"},[i("v-uni-progress",{staticClass:"file-picker__progress-item",attrs:{percent:-1===t.progress?0:t.progress,"stroke-width":"4",backgroundColor:t.errMsg?"#ff5a5f":"#EBEBEB"}})],1):e._e(),"error"===t.status?i("v-uni-view",{staticClass:"file-picker__mask",on:{click:function(i){i.stopPropagation(),arguments[0]=i=e.$handleEvent(i),e.uploadFiles(t,n)}}},[e._v("点击重试")]):e._e()],1)})),1):e._e()],1)}),[],!1,null,"2c3e0133",null,!1,void 0,void 0);t["a"]=o.exports},6654:function(e,t,i){"use strict";i.d(t,"a",(function(){return o})),i.d(t,"c",(function(){return r})),i.d(t,"b",(function(){return c}));var n=i("f07e"),a=i("c964"),s=(i("99af"),i("4160"),i("c975"),i("baa5"),i("14d9"),i("d3b7"),i("ac1f"),i("5319"),i("159b"),function(e){var t=e.lastIndexOf("."),i=e.length;return{name:e.substring(0,t),ext:e.substring(t+1,i)}}),o=function(e){if(Array.isArray(e))return e;var t=e.replace(/(\[|\])/g,"");return t.split(",")},r=function(e,t){var i=[],n=[];return t&&0!==t.length?(e.tempFiles.forEach((function(e){var a=s(e.name),o=a.ext.toLowerCase();-1!==t.indexOf(o)&&(n.push(e),i.push(e.path))})),n.length!==e.tempFiles.length&&uni.showToast({title:"当前选择了".concat(e.tempFiles.length,"个文件 ，").concat(e.tempFiles.length-n.length," 个文件格式不正确"),icon:"none",duration:5e3}),{filePaths:i,files:n}):{filePaths:i,files:n}},l=function(e){return new Promise((function(t,i){uni.getImageInfo({src:e,success:function(e){t(e)},fail:function(e){i(e)}})}))},c=function(){var e=Object(a["a"])(Object(n["a"])().mark((function e(t){var i,a,o,r,c,d=arguments;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=d.length>1&&void 0!==d[1]?d[1]:"image",a=s(t.name),o=a.ext.toLowerCase(),r={name:t.name,uuid:t.uuid,extname:o||"",cloudPath:t.cloudPath,fileType:t.fileType,thumbTempFilePath:t.thumbTempFilePath,url:t.path||t.path,size:t.size,image:{},path:t.path,video:{}},"image"!==i){e.next=14;break}return e.next=7,l(t.path);case 7:c=e.sent,delete r.video,r.image.width=c.width,r.image.height=c.height,r.image.location=c.path,e.next=15;break;case 14:delete r.image;case 15:return e.abrupt("return",r);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},"720e":function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return d})),i.d(t,"b",(function(){return l}));i("7db0"),i("c740"),i("4160"),i("baa5"),i("d81d"),i("f4b3"),i("e9c4"),i("b64b"),i("d3b7"),i("ac1f"),i("5319"),i("159b");var n="chooseAndUploadFile:fail";function a(e){var t=e.count,i=e.sizeType,a=void 0===i?["original","compressed"]:i,s=e.sourceType,o=e.extension;return new Promise((function(e,i){uni.chooseImage({count:t,sizeType:a,sourceType:s,extension:o,success:function(t){e(r(t,"image"))},fail:function(e){i({errMsg:e.errMsg.replace("chooseImage:fail",n)})}})}))}function s(e){e.count;var t=e.camera,i=e.compressed,a=e.maxDuration,s=e.sourceType,o=e.extension;return new Promise((function(e,l){uni.chooseVideo({camera:t,compressed:i,maxDuration:a,sourceType:s,extension:o,success:function(t){var i=t.tempFilePath,n=t.duration,a=t.size,s=t.height,o=t.width;e(r({errMsg:"chooseVideo:ok",tempFilePaths:[i],tempFiles:[{name:t.tempFile&&t.tempFile.name||"",path:i,size:a,type:t.tempFile&&t.tempFile.type||"",width:o,height:s,duration:n,fileType:"video",cloudPath:""}]},"video"))},fail:function(e){l({errMsg:e.errMsg.replace("chooseVideo:fail",n)})}})}))}function o(e){var t=e.count,i=e.extension;return new Promise((function(e,a){var s=uni.chooseFile;if("undefined"!==typeof wx&&"function"===typeof wx.chooseMessageFile&&(s=wx.chooseMessageFile),"function"!==typeof s)return a({errMsg:n+" 请指定 type 类型，该平台仅支持选择 image 或 video。"});s({type:"all",count:t,extension:i,success:function(t){e(r(t))},fail:function(e){a({errMsg:e.errMsg.replace("chooseFile:fail",n)})}})}))}function r(e,t){return e.tempFiles.forEach((function(e,i){e.name||(e.name=e.path.substring(e.path.lastIndexOf("/")+1)),t&&(e.fileType=t),e.cloudPath=Date.now()+"_"+i+e.name.substring(e.name.lastIndexOf("."))})),e.tempFilePaths||(e.tempFilePaths=e.tempFiles.map((function(e){return e.path}))),e}function l(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2?arguments[2]:void 0;t=JSON.parse(JSON.stringify(t));var a=t.length,s=0,o=this;return new Promise((function(r){while(s<i)l();function l(){var i=s++;if(i>=a)!t.find((function(e){return!e.url&&!e.errMsg}))&&r(t);else{var c=t[i],d=o.files.findIndex((function(e){return e.uuid===c.uuid}));c.url="",delete c.errMsg,e.uploadFile({filePath:c.path,cloudPath:c.cloudPath,fileType:c.fileType,onUploadProgress:function(e){e.index=d,n&&n(e)}}).then((function(e){c.url=e.fileID,c.index=d,i<a&&l()})).catch((function(e){c.errMsg=e.errMsg||e.message,c.index=d,i<a&&l()}))}}}))}function c(e,t){var i=t.onChooseFile;t.onUploadProgress;return e.then((function(e){if(i){var t=i(e);if("undefined"!==typeof t)return Promise.resolve(t).then((function(t){return"undefined"===typeof t?e:t}))}return e})).then((function(e){return!1===e?{errMsg:"chooseAndUploadFile:ok",tempFilePaths:[],tempFiles:[]}:e}))}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"all"};return"image"===e.type?c(a(e),e):"video"===e.type?c(s(e),e):c(o(e),e)}}).call(this,i("a9ff")["default"])},9504:function(e,t,i){var n=i("13fa");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i("4f06").default;a("508575ea",n,!0,{sourceMap:!1,shadowMode:!1})},a421:function(e,t,i){"use strict";var n=i("acee"),a=i.n(n);a.a},a55f:function(e,t,i){"use strict";var n=i("3bdf"),a=i.n(n);a.a},a7bb:function(e,t,i){"use strict";var n=i("9504"),a=i.n(n);a.a},a90f:function(e,t,i){var n=i("24fb");t=n(!1),t.push([e.i,".uni-file-picker[data-v-7a9b8e6a]{\nbox-sizing:border-box;overflow:hidden;width:100%;\n-webkit-box-flex:1;-webkit-flex:1;flex:1}.uni-file-picker__header[data-v-7a9b8e6a]{padding-top:5px;padding-bottom:10px;\ndisplay:-webkit-box;display:-webkit-flex;display:flex;\n-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.file-title[data-v-7a9b8e6a]{font-size:14px;color:#333}.file-count[data-v-7a9b8e6a]{font-size:14px;color:#999}.is-add[data-v-7a9b8e6a]{\ndisplay:-webkit-box;display:-webkit-flex;display:flex;\n-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.icon-add[data-v-7a9b8e6a]{width:50px;height:5px;background-color:#f1f1f1;border-radius:2px}.file-picker-mini .icon-add[data-v-7a9b8e6a]{width:%?33?%;height:%?4?%;padding-left:2px;background-color:#000}.file-picker-mini[data-v-7a9b8e6a]  .file-picker__box-content{background:#f6f7f9}.file-picker-mini[data-v-7a9b8e6a]  .icon-del-box{height:%?36?%;width:%?36?%}.file-picker-mini[data-v-7a9b8e6a]   .icon-del{width:%?16?%}.icon-add-rotate[data-v-7a9b8e6a]{position:absolute;-webkit-transform:rotate(90deg);transform:rotate(90deg)}",""]),e.exports=t},acee:function(e,t,i){var n=i("40ca");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i("4f06").default;a("19180f36",n,!0,{sourceMap:!1,shadowMode:!1})}}]);