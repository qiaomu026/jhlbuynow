(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pagesA-login-login"],{"1b18":function(t,e,i){var n=i("b0ef");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("9f944dca",n,!0,{sourceMap:!1,shadowMode:!1})},"225c":function(t,e,i){var n=i("4f68");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("6805799c",n,!0,{sourceMap:!1,shadowMode:!1})},"4f68":function(t,e,i){var n=i("24fb"),a=i("1de5"),o=i("9ada");e=n(!1);var r=a(o);e.push([t.i,'@charset "UTF-8";\n\n\n/* 行为相关颜色 */.ktc-login-page[data-v-363c7262]{width:100%;min-height:100vh;background-repeat:no-repeat;background-size:100% 100%;background-image:url('+r+");display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column}.ktc-login-page .login_content[data-v-363c7262]{-webkit-box-flex:1;-webkit-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.ktc-login-page .login_logo[data-v-363c7262]{margin-top:%?13?%;margin-bottom:%?48?%;width:%?137?%;height:%?137?%}.ktc-login-page .login_logo img[data-v-363c7262]{width:100%;height:100%}.ktc-login-page .welcome_login[data-v-363c7262]{font-size:%?48?%;color:rgba(0,0,0,.9490196078431372);font-weight:600;text-align:center}.ktc-login-page .phone_row[data-v-363c7262]{margin-left:%?48?%;margin-top:%?128?%;height:%?104?%;width:%?654?%;border-radius:%?16?%;background:#f9fafb;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding:0 %?32?%;margin-bottom:%?16?%}.ktc-login-page .phone_row .txt_86[data-v-363c7262]{color:rgba(0,0,0,.8509803921568627);font-size:%?30?%;font-weight:400;line-height:%?46?%;margin-right:%?40?%}.ktc-login-page .code_row[data-v-363c7262]{margin-left:%?48?%;height:%?104?%;width:%?654?%;border-radius:%?16?%;background:#f9fafb;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding:0 %?32?%;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.ktc-login-page .code_row .get_code[data-v-363c7262]{color:rgba(0,0,0,.8509803921568627);font-size:%?24?%;font-weight:400;line-height:%?36?%}.ktc-login-page .uni_input[data-v-363c7262]{color:rgba(0,0,0,.8509803921568627);font-size:%?30?%;font-weight:400;line-height:%?46?%}.ktc-login-page .login-btns[data-v-363c7262]{text-align:center;padding-top:%?214?%}.ktc-login-page .login-btns .wx-quick-btn[data-v-363c7262]{width:%?610?%;margin:%?88?% auto 0;color:var(--WHITE)}.ktc-login-page .login-btns .other-phone-btn[data-v-363c7262]{margin:%?32?% auto;width:%?610?%;color:var(--WHITE)}.ktc-login-page .login-btns uni-view[data-v-363c7262]{margin-top:%?32?%;text-align:center;line-height:%?80?%;box-sizing:border-box}.ktc-login-page .login-btns uni-view[data-v-363c7262]:first-child{background-color:var(--PRIMARY6)}.ktc-login-page .login-btns uni-view[data-v-363c7262]:not(:first-child){color:var(--PRIMARY6);border:%?2?% solid var(--PRIMARY6)}@media only screen and (min-device-width:768px) and (max-device-width:1024px) and (orientation:portrait){.ktc-login-page .login-btns[data-v-363c7262]{padding-top:0}}.ktc-login-page .login-form[data-v-363c7262]{margin-top:%?132?%}.ktc-login-page .login-form .input-area[data-v-363c7262]{margin:0 auto;width:%?550?%}.ktc-login-page .login-form .input-area .login-form-title[data-v-363c7262]{line-height:%?50?%;font-size:%?36?%;color:var(--BLACK1);font-weight:500;margin-bottom:%?76?%}.ktc-login-page .login-form .input-area .ktc-other-login-btn[data-v-363c7262]{margin:%?60?% auto!important;width:%?550?%!important;height:%?88?%!important}.ktc-login-page .login-form .input-area .ktc-other-login-btn-color[data-v-363c7262]{margin:%?60?% auto!important;width:%?550?%!important;height:%?88?%!important;color:#fffce6!important}.ktc-login-page .input-form[data-v-363c7262]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center;height:%?100?%;padding-bottom:%?28?%;padding-top:%?28?%;box-sizing:border-box;border-bottom:%?2?% solid rgba(0,0,0,.2)}.ktc-login-page .input-form .input-code[data-v-363c7262]{width:%?200?%}.ktc-login-page .password-form .code-border[data-v-363c7262],\n.ktc-login-page .input-form-send-code .code-border[data-v-363c7262]{margin-right:%?8?%;border:%?2?% solid rgba(0,0,0,.2);color:rgba(0,0,0,.65)}.ktc-login-page .quick_login[data-v-363c7262]{margin-top:%?64?%;width:100%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;align-items:center;font-size:%?24?%;color:rgba(0,0,0,.65);line-height:%?36?%;text-align:center}.ktc-login-page .quick_login .quick_login_icon[data-v-363c7262]{margin-top:%?20?%;display:-webkit-box;display:-webkit-flex;display:flex;width:%?78?%;height:%?78?%;border-radius:50%;background-color:var(--GREY4);-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.ktc-login-page .read_agreement[data-v-363c7262]{margin-top:%?271?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:start;-webkit-align-items:flex-start;align-items:flex-start;width:100%;font-size:%?24?%;color:rgba(0,0,0,.34901960784313724)}.ktc-login-page .read_agreement .check[data-v-363c7262]{margin-right:%?14?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;height:%?36?%}.ktc-login-page .read_agreement .agreement_text[data-v-363c7262]{height:100%;text-align:left}.ktc-login-page .read_agreement .agreement_text a[data-v-363c7262]{color:#595959}.ktc-login-page .login_btn[data-v-363c7262]{margin-top:%?48?%;margin-left:%?48?%;width:%?654?%;height:%?88?%;background-color:#f8b500;color:#fffce6;font-size:%?30?%;font-weight:500;line-height:%?88?%}.ktc-login-page .login_btn[data-v-363c7262]::after{border:none}@media only screen and (min-device-width:768px) and (orientation:portrait){.ktc-login-page .read_agreement[data-v-363c7262]{height:%?100?%}}.third-party-auth[data-v-363c7262]{margin-top:%?64?%}.third-party-auth .name[data-v-363c7262]{line-height:%?34?%;font-size:%?24?%;color:rgba(0,0,0,.45);text-align:center}.third-party-auth .auth-logo[data-v-363c7262]{margin-top:%?30?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.third-party-auth .auth-logo uni-view[data-v-363c7262]{margin:0 %?24?%}.text-title[data-v-363c7262]{font-size:%?36?%;font-family:PingFangSC,PingFang SC;font-weight:700;color:rgba(0,0,0,.85);line-height:%?54?%;margin-bottom:%?10?%;text-align:center}.text-box[data-v-363c7262]{font-size:%?32?%;font-family:PingFangSC,PingFang SC;font-weight:400;color:rgba(0,0,0,.65);line-height:%?48?%;margin-bottom:%?30?%}.text-box .link[data-v-363c7262]{color:#448aff}.text-box .bold[data-v-363c7262]{font-weight:700}",""]),t.exports=e},"61fd":function(t,e,i){"use strict";i.r(e);var n={o2Icon:i("51db").default},a=(i("a9e3"),{name:"UniStatusBar"}),o=i("f0c5"),r=Object(o["a"])(a,(function(){var t=this.$createElement,e=this._self._c||t;return e("v-uni-view",{staticClass:"uni-status-bar",style:{height:this.statusBarHeight+"px"}},[this._t("default")],2)}),[],!1,null,"4d4bc7a2",null,!1,void 0,void 0),c=r.exports,s=i("fa7d"),l=function(t){return"number"===typeof t?t+"px":t},d={name:"UniNavBar",components:{statusBar:c},emits:["clickLeft","clickRight","clickTitle"],props:{dark:{type:Boolean,default:!1},title:{type:String,default:""},leftText:{type:String,default:""},rightText:{type:String,default:""},leftIcon:{type:String,default:"icon-LeftOutlined"},leftIconFlag:{type:Boolean,default:!0},rightIcon:{type:String,default:""},dbNavBar:{type:[Boolean,String],default:!1},fixed:{type:[Boolean,String],default:!1},color:{type:String,default:""},fontSize:{type:String,default:""},rightTextColor:{type:String,default:""},leftTextColor:{type:String,default:""},backgroundColor:{type:String,default:""},backgroundImage:{type:String,default:""},statusBar:{type:[Boolean,String],default:!1},shadow:{type:[Boolean,String],default:!1},border:{type:[Boolean,String],default:!1},height:{type:[Number,String]},rightWidth:{type:[Number,String],default:60},stat:{type:[Boolean,String],default:""},onlyLeft:{type:Boolean,default:!1},clickBackFlag:{type:Boolean,default:!1},inverted:{type:Boolean,default:!1},justifyContent:{type:String,default:"left"},invertedBackgroundColor:String,showContent:{type:Boolean,default:!0},isTransparent:{type:Boolean,default:!1}},data:function(){return{scrollTop:0,defaultBackgroundColor:this.backgroundColor,click:!1,showThemeBgColor:"",titleC:""}},computed:{themeBgColor:function(){return this.dark?this.defaultBackgroundColor?this.defaultBackgroundColor:this.dark?"#333":"#FFF":this.inverted||this.isTransparent?this.invertedBackgroundColor||"transparent":this.backgroundColor||"#FFF"},themeColor:function(){return this.dark?this.color?this.color:this.dark?"#fff":"#000000E5":this.color||"#000000E5"},navbarHeight:function(){return l(this.height||this.navBarHeight)},rightIconWidth:function(){return l(this.rightWidth)},titleStyle:function(){return Object(s["c"])({justifyContent:this.justifyContent})}},watch:{themeBgColor:{immediate:!0,handler:function(t,e){e&&e!==t&&(this.showThemeBgColor=t)}},title:{deep:!0,immediate:!0,handler:function(t,e){t!=e&&(this.titleC=t)}}},mounted:function(){uni.report&&this.stat&&""!==this.title&&(uni.report("title",this.title),this.titleC=this.title),this.showThemeBgColor=this.themeBgColor},destroyed:function(){},methods:{onClickLeft:function(){var t=this;t.click||(t.click=!0,t.clickBackFlag?(t.$emit("clickLeft"),t.click=!1):(uni.navigateBack({delta:1,fail:function(e){t.$switchTab("home")}}),t.$emit("clickLeft"),t.click=!1))},onClickRight:function(){this.$emit("clickRight")},onClickTitle:function(){this.$emit("clickTitle")}}},u=d,g=(i("e2cf"),Object(o["a"])(u,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"uni-navbar",class:{"uni-dark":t.dark,"uni-nvue-fixed":t.fixed}},[i("v-uni-view",{staticClass:"uni-navbar__content",class:{"uni-navbar--fixed":t.fixed,"uni-navbar--shadow":t.shadow,"uni-navbar--border":t.border,"uni-navbar__bgImage":t.backgroundImage},style:{background:t.themeBgColor}},[t._t("statusBar"),t.statusBar?i("status-bar"):t._e(),t.showContent?i("v-uni-view",{staticClass:"uni-navbar__header",style:{color:t.themeColor,height:t.navbarHeight}},[i("v-uni-view",{staticClass:"uni-navbar-btn-text",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onClickLeft.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"uni-nav-bar-right-text",style:{color:t.leftTextColor,fontSize:t.fontSize}},[t._v(t._s(t.leftText))])],1),"center"===t.justifyContent?i("v-uni-view",{staticClass:"uni-navbar__header-btns uni-navbar__header-btns-left",style:{width:t.leftText?"68rpx":"120rpx"}}):t._e(),t.leftIconFlag?i("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onClickLeft.apply(void 0,arguments)}}},[t._t("left",[i("v-uni-view",{staticClass:"uni-navbar__content_view"},[i("o2-icon",{attrs:{icon:t.leftIcon,color:"themeColor",size:"40rpx"}})],1)])],2):t._e(),i("v-uni-view",{staticClass:"uni-navbar__header-container",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onClickTitle.apply(void 0,arguments)}}},[t._t("default",[""!==t.titleC&&t.titleC&&"true"!==t.titleC?i("v-uni-view",{staticClass:"uni-navbar__header-container-inner",style:t.titleStyle},[i("v-uni-text",{staticClass:"uni-ellipsis-1",style:{color:t.themeColor}},[t._v(t._s(t.titleC))])],1):t._e(),i("v-uni-view",{staticClass:"no-title"})])],2),i("v-uni-view",{staticClass:"uni-navbar__header-btns uni-navbar__header-btns-right",style:{width:t.rightIconWidth},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onClickRight.apply(void 0,arguments)}}},[t._t("right",[t.rightIcon.length?i("v-uni-view",[i("o2-icon",{attrs:{color:"themeColor",icon:"icon-LeftOutlined",size:"48rpx"}})],1):t._e(),t.rightText.length&&!t.rightIcon.length?i("v-uni-view",{staticClass:"uni-navbar-btn-text"},[i("v-uni-text",{staticClass:"uni-nav-bar-right-text",style:{color:t.rightTextColor,fontSize:t.fontSize}},[t._v(t._s(t.rightText))])],1):t._e()])],2)],1):t._e(),t._t("content")],2),t.fixed&&!t.inverted?i("v-uni-view",{staticClass:"uni-navbar__placeholder"},[t.statusBar?i("status-bar"):t._e(),t.showContent?i("v-uni-view",{staticClass:"uni-navbar__placeholder-view",style:{height:t.navbarHeight}}):t._e()],1):t._e()],1)}),[],!1,null,"7873cfdb",null,!1,n,void 0));e["default"]=g.exports},"9ada":function(t,e,i){t.exports=i.p+"static/easy-loadimage/loginBg.png"},ad1a:function(t,e,i){"use strict";var n=i("225c"),a=i.n(n);a.a},b0ef:function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\n\n\n/* 行为相关颜色 */.uni-navbar[data-v-7873cfdb]{z-index:999}.uni-nav-bar-text[data-v-7873cfdb]{font-size:14px}.uni-nav-bar-right-text[data-v-7873cfdb]{font-size:12px}.uni-navbar__content[data-v-7873cfdb]{position:relative;background-color:initial}.uni-navbar__bgImage[data-v-7873cfdb]{position:relative;background-size:cover;background-repeat:no-repeat;width:100%}.uni-navbar__bgImage[data-v-7873cfdb]:after{content:"";position:absolute;inset:0;background-color:rgba(0,0,0,.4);z-index:-1}.uni-navbar__content_view[data-v-7873cfdb]{padding-right:%?16?%}.uni-navbar-btn-text[data-v-7873cfdb]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;align-items:center;line-height:12px}.uni-navbar__header[data-v-7873cfdb]{display:-webkit-box;display:-webkit-flex;display:flex;padding:0 16px;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;height:44px;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.uni-navbar__header-btns[data-v-7873cfdb]{overflow:hidden;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;cursor:pointer}.uni-navbar__header-btns-left[data-v-7873cfdb]{display:-webkit-box;display:-webkit-flex;display:flex;width:%?120?%;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.uni-navbar__header-btns-right[data-v-7873cfdb]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.uni-navbar__header-container[data-v-7873cfdb]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-flex:1;-webkit-flex:1;flex:1;overflow:hidden}.uni-navbar__header-container-inner[data-v-7873cfdb]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-flex:1;-webkit-flex:1;flex:1;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;align-items:center;overflow:hidden;font-family:PingFang SC;font-size:%?32?%;font-weight:400}.uni-navbar__placeholder-view[data-v-7873cfdb]{height:44px}.uni-navbar--fixed[data-v-7873cfdb]{position:fixed;z-index:500;left:var(--window-left);right:var(--window-right)}.uni-navbar--shadow[data-v-7873cfdb]{box-shadow:0 1px 6px #ccc}.uni-navbar--border[data-v-7873cfdb]{border-bottom-width:%?1?%;border-bottom-style:solid;border-bottom-color:#eee}.uni-ellipsis-1[data-v-7873cfdb]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}',""]),t.exports=e},d162:function(t,e,i){"use strict";i.r(e);var n={o2NavBar:i("61fd").default,o2Button:i("d9e27").default,o2Icon:i("51db").default,ktcDialog:i("dcac").default},a=i("f07e"),o=i("c964"),r=i("f3f3"),c=(i("d401"),i("99af"),i("4160"),i("caad"),i("14d9"),i("d3b7"),i("ac1f"),i("00b4"),i("25f0"),i("5319"),i("159b"),i("71ea")),s=i.n(c),l=s.a.OSS_URL,d={data:function(){return{bgUrl:s.a.OSS_URL+s.a.DEFAULT_IMAGE_PATH+s.a.theme,loginEntrance:"",otherPhone:!1,isPasswordShow:!1,check:!1,password:"",mobilePhone:"",email:"",captchaKey:"",uniqueId:"",captcha:"",codeText:"获取验证码",clockFlag:!1,siteInfo:this.$store.state.siteInfo,readFlag:!1,submitFlag:!1,currentStep:"verifyCodeLogin",loginCode:"",entrance:"MEMBER",authedToken:"",anonymousCode:"",bindMobile:!1,agreementPopup:!1,loginType:"",agreeCallback:"",platform:"",threePartyLogin:[]}},watch:{},computed:{canLogin:function(){return this.mobilePhone&&this.captcha}},onLoad:function(){this.readFlag=!1;var t=uni.getSystemInfoSync();this.platform=t.platform},methods:{combinParam:function(t){var e=this.$Route.query.trackParam||{};return Object(r["a"])(Object(r["a"])({},t),e)},turnBack:function(){this.currentStep="memberLogin",this.clear()},clear:function(){this.mobilePhone="",this.captchaKey="",this.captcha="",this.password="",this.email="",this.check=!1},nextStep:function(t){this.currentStep=t},memberLogin:function(){var t=this;if("1"===uni.getStorageSync("hasClickGuidance"));else this.$showGuidance({success:function(){t.memberLogin()}})},memberAppLogin:function(){var t=this,e=this.$store.state.siteInfo,i=l+e.tacMallUserProt+"STORE.html",n=l+e.tacMallPrivacyProt+"STORE.html";uni.preLogin({provider:"univerify",success:function(e){uni.login({provider:"univerify",univerifyStyle:{phoneNum:{color:"#0d0d0d"},slogan:{color:"#0d0d0d"},authButton:{normalColor:"#262626",highlightColor:"#595959",disabledColor:"#595959",textColor:"#fffce6",title:"本机号码一键登录/注册",borderRadius:"2px"},privacyTerms:{defaultCheckBoxState:!1,privacyItems:[{url:i,title:"《用户使用协议》"},{url:n,title:"《隐私政策》"}]}},success:function(e){var i=s.a.CLIENT_ID;t.$http.post(t.$requestUrl.login.oneClickLogin,{clientId:i,grantType:"implicit",oneClickType:"uniApp",loginParam:Object(r["a"])({},e.authResult)}).then(function(){var e=Object(o["a"])(Object(a["a"])().mark((function e(i){var n;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$store.commit("login/save",["token",i.data.accessToken]),n={regist_way:"手机号一键登录",user_regist_result:"成功"},t.getCustomerInfo(n),uni.closeAuthView();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){var i={regist_way:"手机号一键登录",user_regist_result:"失败",failure_reason:e.data.message||"登录失败"};t.$Rangers.rangersLoginResult(t.combinParam(i)),uni.closeAuthView()}))},fail:function(t){30002===t.code&&uni.closeAuthView()}})},fail:function(e){t.$showToast({title:"未开启蜂窝数据，暂不支持一键登录",icon:"none"})}})},goWeChatLogin:function(){var t=this;this.loading=!0,this.loading&&t.$showLoading({title:"登录中"});var e={};uni.login({provider:"weixin",success:function(i){t.loginCode=i.code;var n=s.a.CLIENT_ID;t.$http.post(t.$requestUrl.login.loginByCode,{jsCode:t.loginCode,miniProgramCode:s.a.MINI_PROGRAM_CODE,clientId:n,grantType:"implicit",loginFrom:t.entrance},{interceptFlag:!0}).then(function(){var i=Object(o["a"])(Object(a["a"])().mark((function i(n){var o;return Object(a["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:"00000200"===n.data.code?(t.authedToken=null===(o=n.data.data)||void 0===o?void 0:o.value,t.loading=!1,t.$hideLoading(),t.$refs.popup.open()):n.data.failed||!1===n.data.success||n.data.failed?(t.loading=!1,t.$showToast({icon:"none",title:n.data.message||"登录失败",duration:2500}),e={regist_way:"一键快捷方式",user_regist_result:"失败",failure_reason:n.data.message||"登录失败"},t.$Rangers.rangersLoginResult(t.combinParam(e))):(t.$hideLoading(),t.$store.commit("login/save",["token",n.data.access_token]),e={regist_way:"一键快捷方式",user_regist_result:"成功"},t.getCustomerInfo(e));case 1:case"end":return i.stop()}}),i)})));return function(t){return i.apply(this,arguments)}}()).catch((function(){t.loading=!1,t.$hideLoading(),uni.removeStorageSync("avatarUrl"),uni.removeStorageSync("nickName")}))}})},goToTiaoLogin:function(){var t=this,e={};this.loading=!0,this.loading&&t.$showLoading({title:"登录中"}),tt.login({provider:"toutiao",success:function(i){t.loginCode=i.code,t.anonymousCode=i.anonymousCode;var n=s.a.CLIENT_ID;t.$http.post(t.$requestUrl.login.loginByCode,{code:t.loginCode,jsCode:t.loginCode,anonymousCode:t.anonymousCode,miniProgramCode:s.a.MINI_PROGRAM_CODE,clientId:n,grantType:"implicit",loginFrom:t.entrance},{interceptFlag:!0}).then(function(){var i=Object(o["a"])(Object(a["a"])().mark((function i(n){var o;return Object(a["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:"00000200"===n.data.code?(t.authedToken=null===(o=n.data.data)||void 0===o?void 0:o.value,t.loading=!1,t.$hideLoading(),t.$refs.popup.open()):n.data.failed||!n.data.success?(t.loading=!1,t.$hideLoading(),t.$showToast({icon:"none",title:"登录失败",duration:2500}),e={regist_way:"一键快捷方式",user_regist_result:"失败",failure_reason:n.data.message||"登录失败"},t.$Rangers.rangersLoginResult(t.combinParam(e))):(t.$store.commit("login/save",["token",n.data.access_token]),e={regist_way:"一键快捷方式",user_regist_result:"成功"},t.getCustomerInfo(e));case 1:case"end":return i.stop()}}),i)})));return function(t){return i.apply(this,arguments)}}()).catch((function(i){t.loading=!1,t.$hideLoading(),e={regist_way:"一键快捷方式",user_regist_result:"失败",failure_reason:i.data.message||"登录失败"},t.$Rangers.rangersLoginResult(t.combinParam(e)),uni.removeStorageSync("avatarUrl"),uni.removeStorageSync("nickName")})),t.loginCode=i.code}})},closePopup:function(){this.$Rangers.rangersLoginBtn("user_button_click",this.combinParam({button_name:"拒绝"})),this.$refs.popup.close()},getPhoneNumber:function(t){var e=this;return Object(o["a"])(Object(a["a"])().mark((function i(){return Object(a["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:({button_name:"允许"}),t&&{authedToken:e.authedToken,clientId:s.a.CLIENT_ID,grantType:"implicit",miniProgramCode:s.a.MINI_PROGRAM_CODE,loginFrom:e.entrance};case 2:case"end":return i.stop()}}),i)})))()},authRegister:function(t){var e=this;return Object(o["a"])(Object(a["a"])().mark((function i(){var n,o,c,s;return Object(a["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return n={},o=e,e.loading=!0,e.loading&&o.$showLoading({title:"登录中"}),i.prev=4,i.next=7,o.$http.post(o.$requestUrl.login.register,Object(r["a"])({},t));case 7:s=i.sent,e.$hideLoading(),null!==(c=s.data)&&void 0!==c&&c.anon2Anon&&uni.setStorageSync("anon2Anon",res.data.anon2Anon),s.data.access_token?(o.$store.commit("login/save",["token",s.data.access_token]),n={regist_way:"一键快捷方式",user_regist_result:"成功"},o.getCustomerInfo(n)):(o.$showToast({icon:"none",title:"登录失败",duration:2500}),n={regist_way:"一键快捷方式",user_regist_result:"失败",failure_reason:s.data.message||"登录失败"},o.$Rangers.rangersLoginResult(o.combinParam(n))),i.next=17;break;case 13:i.prev=13,i.t0=i["catch"](4),e.$hideLoading(),o.$refs.popup.close();case 17:return i.prev=17,o.loading=!1,i.finish(17);case 20:case"end":return i.stop()}}),i,null,[[4,13,17,20]])})))()},wechatLogin:function(){var t={},e=this;uni.login({provider:"weixin",onlyAuthorize:!0,success:function(i){var n=i.code;t={current_page:"微信授权界面",button_name:"同意授权"},e.$Rangers.rangersLoginBtn("user_button_click",e.combinParam(t)),e.weixinAppLogin(n,"wechat")},fail:function(i){t={current_page:"微信授权界面",button_name:"取消授权"},e.$Rangers.rangersLoginBtn("user_button_click",e.combinParam(t)),e.$showToast({icon:"none",title:"取消授权",duration:1e3})}})},authLoginApp:function(t){var e={},i=this;if(i.loginType=t,!this.readFlag)return this.agreeCallback="authLoginApp",void this.checkboxTap();"toutiao"===t?i.toutiaoAppLogin():"weixin"===t||"apple"===t&&uni.login({provider:"apple",scopes:"auth_user",success:function(t){e={current_page:"苹果授权界面",button_name:"同意授权"},i.$Rangers.rangersLoginBtn("user_button_click",i.combinParam(e)),i.appAppleLogin({access_token:t.authResult.access_token,openid:t.authResult.openid,unionid:""},"apple")},fail:function(t){e={current_page:"苹果授权界面",button_name:"取消授权"},i.$Rangers.rangersLoginBtn("user_button_click",i.combinParam(e))}})},toutiaoAppLogin:function(){var t=this,e=this,i={},n=uni.requireNativePlugin("Html5app-Tiktok");n.auth({scope:"user_info,trial.whitelist",state:"0022"},(function(n){if(-2===(null===n||void 0===n?void 0:n.code))return e.$showToast({icon:"none",title:(null===n||void 0===n?void 0:n.msg)||"登录失败",duration:2500}),i={current_page:"抖音授权界面",button_name:"取消授权"},void e.$Rangers.rangersLoginBtn("user_button_click",e.combinParam(i));i={current_page:"抖音授权界面",button_name:"同意授权"},e.$Rangers.rangersLoginBtn("user_button_click",e.combinParam(i));var a=n.authCode,o=e.$requestUrl.login.toutiaoLogin,r={provider:"byteDance",code:a,client_id:"o2-mobile-front",client_secret:"",userType:"C"};e.$http.get(o,r,{headers:{}}).then((function(n){t.$hideLoading(),n.data.success&&["hoth.social.providerNotBindUser","hoth.social.providerUserNotFound"].includes(n.data.code)?e.$Router.push({name:"bindPhone",params:{openId:n.data.openId,unionId:n.data.unionId,openAccessToken:n.data.openAccessToken,loginType:e.loginType}}):n.data.failed?(e.$showToast({icon:"none",title:"登录失败",duration:2500}),i={regist_way:"第三方认证登录",third_party_way:"抖音",user_regist_result:"失败",failure_reason:"登录失败"},e.$Rangers.rangersLoginResult(e.combinParam(i))):n.data.success?(e.$store.commit("login/save",["token",n.data.accessToken]),i={regist_way:"第三方认证登录",third_party_way:"抖音",user_regist_result:"成功"},e.getCustomerInfo(i)):(t.$hideLoading(),e.$showToast({icon:"none",title:n.data.message||"登录失败",duration:2500}),i={regist_way:"第三方认证登录",third_party_way:"抖音",user_regist_result:"失败",failure_reason:n.data.message||"登录失败"},e.$Rangers.rangersLoginResult(e.combinParam(i)))}))}))},weixinAppLogin:function(t,e){var i=this,n=this,a=n.$requestUrl.login.weixinLoginToken,o={provider:e,code:t,client_id:"o2-mobile-front",client_secret:"secret"};n.$showLoading(),n.$http.get(a,o,{headers:{}}).then((function(t){i.$hideLoading(),t.data.failed?n.$showToast({icon:"none",title:"登录失败",duration:2500}):n.appAppleLogin(t.data,e)}))},appAppleLogin:function(t,e){var i=this,n=this,a=n.$requestUrl.login.verifyThirdAuthorize,o={grantType:"implicit",clientId:"o2-mobile-front",provider:e,openAccessToken:t.access_token,openId:t.openid,unionId:t.unionid,appId:this.guid()};"weixin"===this.loginType?o.channel=this.isIos?"ios":"android":o.channel="ios";n.$showLoading(),n.$http.post(a,o,{headers:{}}).then((function(t){if(i.$hideLoading(),t.data.success&&["hoth.social.providerNotBindUser","hoth.social.providerUserNotFound"].includes(t.data.code))n.$Router.push({name:"bindPhone",params:{openId:o.openId,unionId:o.unionId,openAccessToken:o.openAccessToken,loginType:n.loginType}});else if(t.data.failed){n.$hideLoading(),n.$showToast({icon:"none",title:"登录失败",duration:2500});var a={regist_way:"第三方认证登录",third_party_way:"wechat"===e?"微信":"苹果",user_regist_result:"失败",failure_reason:"登录失败"};n.$Rangers.rangersLoginResult(n.combinParam(a))}else{n.$store.commit("login/save",["token",t.data.accessToken]);var r={regist_way:"第三方认证登录",third_party_way:"wechat"===e?"微信":"苹果",user_regist_result:"成功"};n.getCustomerInfo(r)}}))},guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0,i="x"==t?e:3&e|8;return i.toString(16)}))},valifyMobliePhone:function(){this.valid("mobilePhone"),this.resetKeyboardHeight()},resetKeyboardHeight:function(){},goLogin:function(t){this.loginEntrance=t,this.$store.commit("login/save",["logging",!0])},sendCode:function(){var t=this;return Object(o["a"])(Object(a["a"])().mark((function e(){var i,n,c,l;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=t,n=s.a.LOGIN_URL+"cartech-app-oauth/oauth/captcha/phone/send",t.valid("mobilePhone")){e.next=4;break}return e.abrupt("return",!1);case 4:if(!i.clockFlag){e.next=6;break}return e.abrupt("return");case 6:if(t.readFlag){e.next=10;break}return t.agreeCallback="sendCode",t.checkboxTap(),e.abrupt("return");case 10:c=s.a.LOGIN_CLIENT_ID,i.$http.post(n,{clientId:c,phone:t.mobilePhone}).then(function(){var e=Object(o["a"])(Object(a["a"])().mark((function e(n){return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:n.data&&(0===n.data.code?(i.uniqueId=n.data.data.uniqueId,i.sendCodeSuccess()):t.$showToast({icon:"none",title:n.data.message,duration:1500}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),l={current_page:"手机号登录页面"},l=Object(r["a"])(Object(r["a"])({},l),{},{button_name:"获取验证码"}),i.$Rangers.rangersLoginBtn("user_button_click",i.combinParam(l));case 15:case"end":return e.stop()}}),e)})))()},valid:function(t){var e={mobilePhone:{emptyTost:"请输入手机号",regExp:/^(13[0-9]|14[01456879]|15[0-35-9]|16[2567]|17[0-8]|18[0-9]|19[0-35-9])\d{8}$/,regToast:"请输入11位正确手机号"}};return this[t]?!!e[t].regExp.test(this[t])||(this.$showToast({icon:"none",title:e[t].regToast,duration:1500}),!1):(this.$showToast({icon:"none",title:e[t].emptyTost,duration:1500}),!1)},sendCodeSuccess:function(){this.clock(60),this.$showToast({icon:"none",title:"验证码已发送到您的手机",duration:1500})},clock:function(t){var e=this;t>0?(this.clockFlag=!0,this.codeText="重新获取(".concat(t,")"),this.timeOut=setTimeout((function(){return e.clock(t-1)}),1e3,this)):(this.clockFlag=!1,this.codeText="重新获取")},checkClause:function(){if(!this.readFlag)return this.checkboxTap(),!0},getCustomerInfo:function(t){var e=this,i=s.a.LOGIN_URL+"cartech-app-oauth/oauth/account/info?clientId="+s.a.LOGIN_CLIENT_ID,n={headers:{"Access-Token":this.$store.state.login.token}};this.$http.get(i,{},n).then((function(t){t.data&&(0===t.data.code?setTimeout((function(){uni.navigateBack(1)}),1e3):e.$showToast({title:t.message||"用户信息获取失败",duration:1500,icon:"none"}))})).catch((function(){e.$showToast({title:"用户信息获取失败",duration:1500,icon:"none"})}))},loginAndRegister:function(){var t,e=this;if(this.valid("mobilePhone")){if(6===(null===(t=this.captcha)||void 0===t?void 0:t.length))return!this.submitFlag&&(!this.checkClause()&&(this.setTimeOutFlag&&clearTimeout(this.setTimeOutFlag),void(this.setTimeOutFlag=setTimeout((function(){return e.submit()}),200))));this.$showToast({icon:"none",title:"请输入正确的验证码",duration:1500})}},submit:function(){var t=this;return Object(o["a"])(Object(a["a"])().mark((function e(){var i,n,o,r,c,l;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.$showLoading({title:"登录中",mask:!0}),i=s.a.LOGIN_URL+"cartech-app-oauth/oauth/captcha/phone/login",n=s.a.LOGIN_CLIENT_ID,o={clientId:n,phone:t.mobilePhone,verifyCode:t.captcha,uniqueId:t.uniqueId},e.prev=4,!t.submitFlag){e.next=7;break}return e.abrupt("return",!1);case 7:return t.submitFlag=!0,e.next=10,t.$http.post(i,o);case 10:r=e.sent,c=r.data,0!==c.code?(t.submitFlag=!1,t.$hideLoading(),t.$showToast({title:c.message||"登录失败",duration:1500,icon:"none"})):(t.$hideLoading(),c.data.accessToken&&(t.$store.commit("login/save",["token",c.data.accessToken]),l={regist_way:"手机验证码",user_regist_result:"成功"},t.getCustomerInfo(l))),e.next=19;break;case 15:e.prev=15,e.t0=e["catch"](4),t.$hideLoading(),t.loginFailed(e.t0);case 19:case"end":return e.stop()}}),e,null,[[4,15]])})))()},loginFailed:function(t){this.submitFlag=!1,this.$showToast({title:t.data.message||"登录失败",duration:1e3,icon:"none"});var e={regist_way:"手机验证码",user_regist_result:"失败",failure_reason:t.data.message||"登录失败"};this.$Rangers.rangersLoginResult(vm.combinParam(e))},fetchLogin:function(){this.$store.commit("login/save",["logging",!1]),this.loginEntrance=""},fetchUserInfo:function(t){this.$store.commit("user/save",["userInfo",Object(r["a"])(Object(r["a"])({},this.userInfo),t)])},clauseQuery:function(t){var e="",i=this.$store.state.siteInfo;switch(t){case"用户协议":e=l+i.tacMallUserProt+"STORE.html";break;case"隐私政策":e=l+i.tacMallPrivacyProt+"STORE.html";break}this.$Router.push({name:"webPage",params:{title:t,path:e}})},checkboxTap:function(){this.readFlag?this.readFlag=!this.readFlag:this.agreementPopup=!0},agree:function(){this.$Rangers.rangersLoginBtn("user_button_click",Object(r["a"])(Object(r["a"])({},this.combinParam({})),{intercept_button:"已阅读并同意"})),this.readFlag=!this.readFlag,this.agreementPopup=!1,"sendCode"===this.agreeCallback&&this.sendCode(),"authLoginApp"===this.agreeCallback&&this.authLoginApp(this.loginType),"memberLogin"===this.agreeCallback&&this.memberLogin(),this.agreeCallback=""},disagree:function(){this.$Rangers.rangersLoginBtn("user_button_click",Object(r["a"])(Object(r["a"])({},this.combinParam({})),{intercept_button:"不同意"})),this.agreementPopup=!1},gequerySystemParamt:function(){var t=this;return Object(o["a"])(Object(a["a"])().mark((function e(){var i;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return"CTMD.THREE_PARTY_LOGIN",e.next=3,t.$http.get("".concat(t.$requestUrl.common.querySystemParam).concat("CTMD.THREE_PARTY_LOGIN"));case 3:i=e.sent,i.data.setSystemParamValue&&i.data.setSystemParamValue.forEach((function(e){t.threePartyLogin.push(e.paramValue)}));case 5:case"end":return e.stop()}}),e)})))()}}},u=d,g=(i("ad1a"),i("f0c5")),h=Object(g["a"])(u,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"ktc-login-page"},[i("o2-nav-bar",{attrs:{backgroundColor:"#ffffff",title:"登录","status-bar":!0,inverted:!0}}),i("v-uni-view",{staticClass:"login_content"},[i("v-uni-image",{staticClass:"login_logo",attrs:{src:"/static/easy-loadimage/logo.png"}}),i("v-uni-view",{staticClass:"welcome_login"},[t._v("欢迎登录卡泰驰门店")]),i("v-uni-form",{staticStyle:{width:"100%"}},[i("v-uni-view",{staticClass:"phone_row"},[i("v-uni-view",{staticClass:"txt_86"},[t._v("+86")]),i("v-uni-input",{staticClass:"uni_input",attrs:{"adjust-position":!0,"hold-keyboard":!0,"always-embed":!0,"cursor-spacing":100,placeholder:"请输入手机号",maxlength:"11","placeholder-style":"color: #00000059;",type:"number"},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.valifyMobliePhone.apply(void 0,arguments)}},model:{value:t.mobilePhone,callback:function(e){t.mobilePhone=e},expression:"mobilePhone"}})],1),i("v-uni-view",{staticClass:"code_row"},[i("v-uni-input",{staticClass:"uni_input",attrs:{type:"number","adjust-position":!0,"hold-keyboard":!0,"always-embed":!0,"cursor-spacing":50,placeholder:"请输入验证码",maxlength:"6","placeholder-style":"color: #00000059;"},model:{value:t.captcha,callback:function(e){t.captcha=e},expression:"captcha"}}),i("o2-button",{attrs:{label:t.codeText,type:"in-line",size:"small",disabled:!(11===t.mobilePhone.length&&!t.clockFlag)},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.sendCode.apply(void 0,arguments)}}})],1),i("v-uni-view",{staticClass:"read_agreement"},[i("v-uni-view",{staticClass:"check",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.readFlag=!t.readFlag}}},[i("o2-icon",{attrs:{color:t.readFlag?"var(--PRIMARY6)":"var(--GREY2)",icon:t.readFlag?"icon-CheckCircleFilled":"icon-SelectOutlined",size:"32rpx"}})],1),i("v-uni-view",{staticClass:"agreement_text"},[i("span",{staticStyle:{display:"inline"}},[t._v("已阅读并同意")]),i("a",{staticStyle:{display:"inline","text-decoration":"none"},attrs:{href:"#"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clauseQuery("用户协议")}}},[t._v("《卡泰驰门店用户协议》")]),i("span",[t._v("和")]),i("a",{staticStyle:{display:"inline","text-decoration":"none"},attrs:{href:"#"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clauseQuery("隐私政策")}}},[t._v("《隐私政策》")])])],1),i("ktc-dialog",{attrs:{visible:t.agreementPopup,confirmButtonText:"已阅读并同意","cancel-button-text":"不同意"},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.agree()},cancel:function(e){arguments[0]=e=t.$handleEvent(e),t.disagree()}}},[i("v-uni-view",{staticClass:"text-title"},[t._v("阅读并同意以下协议")]),i("v-uni-view",{staticClass:"text-box"},[t._v("为了保证您的个人信息安全，使用登录功能请下阅读并同意"),i("v-uni-text",{staticClass:"link",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clauseQuery("用户协议")}}},[t._v("《卡泰驰门店用户协议》")]),t._v("和"),i("v-uni-text",{staticClass:"link",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clauseQuery("隐私政策")}}},[t._v("《隐私政策》")])],1)],1),i("v-uni-button",{staticClass:"login_btn",style:{opacity:t.canLogin?1:.4},attrs:{disabled:!t.canLogin},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.loginAndRegister.apply(void 0,arguments)}}},[t._v("立即登录")])],1)],1)],1)}),[],!1,null,"363c7262",null,!1,n,void 0);e["default"]=h.exports},e2cf:function(t,e,i){"use strict";var n=i("1b18"),a=i.n(n);a.a}}]);