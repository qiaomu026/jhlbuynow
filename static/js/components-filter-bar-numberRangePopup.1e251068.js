(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["components-filter-bar-numberRangePopup"],{"08f3":function(t,e,i){"use strict";var n={tagSelect:i("c2dc").default},a=i("f3f3"),o=(i("99af"),i("7db0"),i("caad"),i("8ba4"),i("d3b7"),i("acd8"),i("2532"),i("c0fd")),r=function(t){return t?parseFloat(t):""},s={name:"NumberRangeTag",components:{},props:{item:{type:Object},displayMode:{type:String,default:"list"}},model:{prop:"item"},created:function(){var t=this;this.$EventBus.$on("number-range-popup:close",(function(){t.handlePopupClose()})),this.$EventBus.$on("number-range-popup:change",(function(e){t.item.fieldId===o["a"].state.popupItem.fieldId&&t.handlePopupChange(e)}))},beforeDestroy:function(){this.$EventBus.$off("number-range-popup:close"),this.$EventBus.$off("number-range-popup:change")},data:function(){return{value:{start:null,end:null},tagSelectValue:null}},computed:{formatValue:function(){return{start:r(this.value.start),end:r(this.value.end)}}},watch:{item:{immediate:!0,deep:!0,handler:function(t){if([null,void 0].includes(null===t||void 0===t?void 0:t.value))return this.value={start:"",end:""},void(this.tagSelectValue=null);Array.isArray(t.value)?this.value={start:[null,void 0].includes(t.value[0])?t.value[0]:"",end:[null,void 0].includes(t.value[1])?t.value[1]:""}:this.value=Object(a["a"])({},t.value);var e=this.value,i=e.start,n=e.end;if("single"!==this.displayMode){var o=this.item.options.find((function(t){return r(t.start)===r(i)&&r(t.end)===r(n)}));this.tagSelectValue=o?o.value:null}}}},methods:{activate:function(){this.showPopup()},handlePopupClose:function(){this.$emit("cancel")},handleClickTrigger:function(){this.showPopup()},showPopup:function(){uni.navigateTo({url:"/components/filter-bar/numberRangePopup"}),o["a"].commit("setPopupItem",this.item),o["a"].commit("setPopupDisplayMode",this.displayMode)},onNumberRangeChange:function(t,e){var i,n,a,o=null!==(i=null!==(n=null===(a=this.item.restraint)||void 0===a?void 0:a.numberType)&&void 0!==n?n:this.item.numberType)&&void 0!==i?i:"int";return e&&"int"===o&&!Number.isInteger(parseFloat(e))?this.$showToast("".concat(this.item.label,"：请输入整数")):e&&1===t&&r(e)<r(this.value.start)?this.$showToast("".concat(this.item.label," 的最大值不得小于最小值！")):void("list"===this.displayMode&&this.confirm())},handleSelectTag:function(){var t=this;if(0!==this.tagSelectValue.length){var e=this.item.options.find((function(e){return e.value===t.tagSelectValue[0]}));if(e){var i=e.start,n=e.end;this.value={start:i,end:n},"list"===this.displayMode&&this.confirm()}}else this.value={start:null,end:null}},handlePopupChange:function(t){var e=t.value,i=t.displayLabel;this.$emit("change",Object(a["a"])(Object(a["a"])({},this.item),{},{value:e,displayLabel:i}))},handlePopupCancel:function(t){this.$emit("cancel")},confirm:function(){var t=this.formatValue,e=t.start,i=t.end,n="";[void 0,null,""].includes(e)&&[void 0,null,""].includes(i)||([void 0,"",null].includes(e)?n=this.item.unit?"".concat(i).concat(this.item.unit,"以内"):"".concat(i,"以内"):[void 0,"",null].includes(i)?(n=this.item.unit?"".concat(e).concat(this.item.unit,"以上"):"".concat(e,"以上"),n=this.item.unit?"".concat(e).concat(this.item.unit,"以上"):"".concat(e,"以上")):n=this.item.unit?"".concat(e," - ").concat(i).concat(this.item.unit):"".concat(e," - ").concat(i)),this.$emit("change",Object(a["a"])(Object(a["a"])({},this.item),{},{value:{start:e,end:i},displayLabel:n}))},handleReset:function(){this.$emit("change",Object(a["a"])(Object(a["a"])({},this.item),{},{value:this.item.hasOwnProperty("defaultValue")?this.item.defaultValue:{start:"",end:""},displayLabel:""})),this.$emit("cancel")}}},l=s,c=(i("09b4"),i("f0c5")),u=Object(c["a"])(l,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{class:"list"===t.displayMode?"crm-view-number content-drawer-view":""},["list"===t.displayMode?[i("v-uni-view",{staticClass:"content-drawer-view-label"},[t._v(t._s(t.item.label))]),i("v-uni-view",{staticClass:"content-drawer-view-number-range mb12"},[i("v-uni-view",{staticClass:"content-drawer-view-number"},[i("v-uni-input",{staticClass:"input",attrs:{type:"number",placeholder:"请输入"},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.onNumberRangeChange(0,e.target.value)}},model:{value:t.value.start,callback:function(e){t.$set(t.value,"start",e)},expression:"value.start"}})],1),i("v-uni-view",{staticStyle:{margin:"0 10px"}},[t._v("-")]),i("v-uni-view",{staticClass:"content-drawer-view-number"},[i("v-uni-input",{staticClass:"input",attrs:{type:"number",placeholder:"请输入"},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.onNumberRangeChange(1,e.target.value)}},model:{value:t.value.end,callback:function(e){t.$set(t.value,"end",e)},expression:"value.end"}})],1),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.item.unit,expression:"item.unit"}],staticClass:"input-txt"},[t._v(t._s(t.item.unit))])],1),t.item.options?i("v-uni-view",{staticClass:"tag-list"},[i("tag-select",{attrs:{options:t.item.options,round:!1,itemWidth:"150rpx",itemHeight:"76rpx"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.handleSelectTag.apply(void 0,arguments)}},model:{value:t.tagSelectValue,callback:function(e){t.tagSelectValue=e},expression:"tagSelectValue"}})],1):t._e()]:t._e()],2)}),[],!1,null,"1f661b44",null,!1,n,void 0);e["a"]=u.exports},"09b4":function(t,e,i){"use strict";var n=i("5100"),a=i.n(n);a.a},"106d":function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\n\n\n/* 行为相关颜色 */.common_popup[data-v-20d2968b]{padding:%?24?%}.common_popup .header[data-v-20d2968b]{padding:%?24?% 0;position:relative;display:-webkit-box;display:-webkit-flex;display:flex;font-size:16px;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;color:rgba(0,0,0,.85)}.common_popup .close[data-v-20d2968b]{width:%?32?%;height:%?32?%;position:absolute;right:0;z-index:999}',""]),t.exports=e},1767:function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,"uni-page-body[data-v-45e4f1b0]{background:transparent}body.?%PAGE?%[data-v-45e4f1b0]{background:transparent}",""]),t.exports=e},"2d1c":function(t,e,i){"use strict";var n=i("6ee2"),a=i.n(n);a.a},3003:function(t,e,i){"use strict";i.r(e);var n={uniPopup:i("1c89").default,o2Icon:i("51db").default},a={name:"CommonPopup",props:{title:{type:String,default:""},showIcon:{type:Boolean,default:!0},popStyle:{type:Object,default:function(){}}},data:function(){return{}},methods:{showPopup:function(){this.$refs.CommonPopup.open("bottom")},hidePopup:function(){this.$refs.CommonPopup.close()},handlePopupChange:function(t){t.show||(this.$emit("update:visible",!1),this.$emit("close"))},handleMove:function(){return!1}}},o=a,r=(i("f912"),i("f0c5")),s=Object(r["a"])(o,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("uni-popup",{ref:"CommonPopup",attrs:{type:"bottom","background-color":"#fff","safe-area":!0},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.handlePopupChange.apply(void 0,arguments)}},nativeOn:{touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.handleMove.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"common_popup"},[i("v-uni-view",{staticClass:"common_popup_content",style:t.popStyle},[t._t("header",[i("v-uni-view",{staticClass:"header"},[t._v(t._s(this.title)),t.showIcon?i("o2-icon",{staticClass:"close",attrs:{icon:"icon-CloseOutlined",size:"32rpx"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.hidePopup.apply(void 0,arguments)}}}):t._e()],1)]),t._t("default"),t._t("footer")],2)],1)],1)}),[],!1,null,"20d2968b",null,!1,n,void 0);e["default"]=s.exports},"30ac":function(t,e,i){"use strict";var n=i("555e"),a=i.n(n);a.a},"30ce":function(t,e,i){"use strict";var n=i("d70b"),a=i.n(n);a.a},"3cf0":function(t,e,i){"use strict";var n=i("78ac"),a=i.n(n);a.a},5100:function(t,e,i){var n=i("f3b4");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("0a179af0",n,!0,{sourceMap:!1,shadowMode:!1})},"555e":function(t,e,i){var n=i("f61f");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("47572b82",n,!0,{sourceMap:!1,shadowMode:!1})},"5cfc":function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\n\n\n/* 行为相关颜色 */.crm-view-number[data-v-255c5fb1]{width:100%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-flex-wrap:wrap;flex-wrap:wrap;background:#fff;padding:15px 16px}.crm-view-number .confirm[data-v-255c5fb1]{width:100%;height:%?56?%;text-align:center;line-height:%?56?%;background:#f8b500;border-radius:%?8?% %?8?% %?8?% %?8?%;font-family:PingFang SC;font-weight:400;font-size:%?28?%;color:#fff}.content-drawer-view-number-range[data-v-255c5fb1]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal!important;-webkit-box-direction:normal!important;-webkit-flex-direction:row!important;flex-direction:row!important;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.content-drawer-view-number-range .input[data-v-255c5fb1]{width:74px;height:30px;border-radius:4px 4px 4px 4px;border:1px solid rgba(0,0,0,.25)}.content-drawer-view-number-range .input-txt[data-v-255c5fb1]{font-family:PingFang SC;font-weight:400;font-size:15px;color:rgba(0,0,0,.85);line-height:23px;margin-left:8px}.crm-view-number-single[data-v-255c5fb1]{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column}.number-range-single[data-v-255c5fb1]{width:100%;margin-bottom:16px;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start}.down-mask[data-v-255c5fb1]{position:absolute;top:100%;left:0;width:100vw;height:calc(100vh - 100%);background-color:rgba(0,0,0,.55)}',""]),t.exports=e},"6af9":function(t,e,i){var n=i("106d");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("4c3ce3f1",n,!0,{sourceMap:!1,shadowMode:!1})},"6ee2":function(t,e,i){var n=i("1767");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("45f5ba74",n,!0,{sourceMap:!1,shadowMode:!1})},"78ac":function(t,e,i){var n=i("5cfc");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("3eef40b6",n,!0,{sourceMap:!1,shadowMode:!1})},ab39:function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\n\n\n/* 行为相关颜色 */.ktc-button[data-v-2b099966]{border-radius:%?12?%;font-size:%?30?%;text-align:center;border:none}.ktc-button.is-block[data-v-2b099966]{display:block}.ktc-button.primary[data-v-2b099966]{background:#faad14;color:#fff}.ktc-button.primary[data-v-2b099966]::after{border:none}.ktc-button.primary.outline[data-v-2b099966]{color:#f9b500;border:%?2?% solid #faad14;background:#fff}.ktc-button.primary.outline[data-v-2b099966]::after{border:none}.ktc-button.default[data-v-2b099966]{background:#fff;color:#262626}.ktc-button.danger[data-v-2b099966]{background:#ff4d4f;color:#fff}.ktc-button.danger.outline[data-v-2b099966]{color:#ff4d4f;background:#fff;border:%?2?% solid #ff4d4f}',""]),t.exports=e},b3c5:function(t,e,i){"use strict";var n=i("f3f3"),a=i("d0af"),o=i("d0ff"),r=(i("99af"),i("caad"),i("d81d"),i("8ba4"),i("acd8"),i("2532"),function(t){return t?parseFloat(t):""}),s={name:"NumberRange",components:{},props:{item:{type:Object},displayMode:{type:String,default:"list"}},model:{prop:"item"},data:function(){return{value:["",""]}},computed:{formatValue:function(){return this.value.map(r)}},watch:{item:{immediate:!0,handler:function(t){var e;null!==t&&void 0!==t&&t.value&&null!==(e=t.value)&&void 0!==e&&e.length?this.value=Object(o["a"])(t.value):this.value=["",""]}}},methods:{onNumberRangeChange:function(t,e){var i,n,a,o=null!==(i=null!==(n=null===(a=this.item.restraint)||void 0===a?void 0:a.numberType)&&void 0!==n?n:this.item.numberType)&&void 0!==i?i:"int";return e&&"int"===o&&!Number.isInteger(parseFloat(e))?this.$showToast("".concat(this.item.label,"：请输入整数")):e&&1===t&&r(e)<r(this.value[0])?this.$showToast("".concat(this.item.label," 的最大值不得小于最小值！")):void("list"===this.displayMode&&this.confirm())},confirm:function(){var t=Object(a["a"])(this.formatValue,2),e=t[0],i=t[1],o="";[void 0,null,""].includes(e)&&[void 0,null,""].includes(i)||(o=[void 0,"",null].includes(e)?this.item.unit?"".concat(i).concat(this.item.unit,"以内"):"".concat(i,"以内"):[void 0,"",null].includes(i)?this.item.unit?"".concat(e).concat(this.item.unit,"以上"):"".concat(e,"以上"):this.item.unit?"".concat(e," - ").concat(i).concat(this.item.unit):"".concat(e," - ").concat(i)),this.$emit("change",Object(n["a"])(Object(n["a"])({},this.item),{},{value:this.formatValue,displayLabel:o}))}}},l=s,c=(i("3cf0"),i("f0c5")),u=Object(c["a"])(l,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"crm-view-number",class:"list"===t.displayMode?"content-drawer-view":""},["list"===t.displayMode?i("v-uni-view",{staticClass:"content-drawer-view-label"},[t._v(t._s(t.item.label))]):t._e(),i("v-uni-view",{staticClass:"content-drawer-view-number-range",class:"single"===t.displayMode?"number-range-single":""},[i("v-uni-view",{staticClass:"content-drawer-view-number"},[i("v-uni-input",{staticClass:"input",attrs:{type:"number",placeholder:"请输入"},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.onNumberRangeChange(0,e.target.value)}},model:{value:t.value[0],callback:function(e){t.$set(t.value,0,e)},expression:"value[0]"}})],1),i("v-uni-view",{staticStyle:{margin:"0 10px"}},[t._v("-")]),i("v-uni-view",{staticClass:"content-drawer-view-number"},[i("v-uni-input",{staticClass:"input",attrs:{type:"number",placeholder:"请输入"},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.onNumberRangeChange(1,e.target.value)}},model:{value:t.value[1],callback:function(e){t.$set(t.value,1,e)},expression:"value[1]"}})],1),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.item.unit,expression:"item.unit"}],staticClass:"input-txt"},[t._v(t._s(t.item.unit))])],1),"single"===t.displayMode?i("v-uni-view",{staticClass:"confirm",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.confirm.apply(void 0,arguments)}}},[t._v(t._s("确定"))]):t._e(),"single"===t.displayMode?i("v-uni-view",{staticClass:"down-mask"}):t._e()],1)}),[],!1,null,"255c5fb1",null,!1,void 0,void 0);e["a"]=u.exports},c0fd:function(t,e,i){"use strict";var n=i("f07e"),a=i("c964"),o=i("f3f3"),r=i("d0ff"),s=i("c9e9"),l=(i("99af"),i("4de4"),i("7db0"),i("c740"),i("4160"),i("d81d"),i("14d9"),i("4e82"),i("f4b3"),i("e9c4"),i("b64b"),i("d3b7"),i("159b"),i("26cb")),c=i.n(l),u=i("c1fb"),d=i("2c37"),f=i("cd3f"),p=i.n(f),m=["id"],v={functionKey:"customer_manage",listGroup:"",clueType:"",filterList:[],editingItemsVO:[],committedFilterItemList:[],allFilterItemList:[],choosingFilterItemList:[],unChoosingFilterItemList:[],committedDisplayItemList:[],activeSortItemList:[],selectedSortItem:void 0,indexId:"",indexInfo:{},popupItem:{},popupDisplayMode:"list"},h=function(t){try{var e=t.dataValue,i=t.fieldDefaultValue,n=t.fieldName,a=t.fieldId,o=JSON.parse(null!==e&&void 0!==e?e:"{}"),r=o.valueType,s=void 0===r?"json":r,l=o.value;return o.defaultValue="json"===s?JSON.parse(l):l,o.value=i?"json"===s?JSON.parse(i):i:o.defaultValue,o.fieldId=o.fieldId||a,o.label=o.label||n,o}catch(c){console.error("筛选项",c)}},b=new c.a.Store({namespaced:!0,state:function(){return v},mutations:{setFilterList:function(t,e){t.filterList=e},setSelectedSortItem:function(t,e){t.selectedSortItem=e},setFunctionKey:function(t,e){t.functionKey=e},setListGroup:function(t,e){t.listGroup=e},setClueType:function(t,e){t.clueType=e},setPopupItem:function(t,e){t.popupItem=e},setPopupDisplayMode:function(t,e){t.popupDisplayMode=e},changeCommittedFilterItemById:function(t,e){var i=e.id,n=Object(s["a"])(e,m),a=t.committedFilterItemList.findIndex((function(t){return t.fieldId===i})),o=Object(r["a"])(t.committedFilterItemList);-1!==a&&(n.hasOwnProperty("value")&&(o[a].value=n.value),n.hasOwnProperty("displayLabel")&&(o[a].displayLabel=n.displayLabel||""),n.hasOwnProperty("options")&&(o[a].options=n.options||[]),t.committedFilterItemList=o)},changeEditingItemsVOById:function(t,e){var i=e.id,n=e.value,a=e.displayLabel;try{var s=t.editingItemsVO.findIndex((function(t){return t.fieldId===i})),l=Object(r["a"])(t.editingItemsVO),c=Object(o["a"])({},l[s]);c.value=n,c.displayLabel=a,l[s]=c,t.editingItemsVO=l}catch(u){console.error("changeEditingItemsVOById",u)}},commitDisplayItemList:function(t,e){t.committedDisplayItemList=e},commitFilterItemList:function(t,e){t.committedFilterItemList=e},setEditingItemsVO:function(t,e){var i=e.list;t.editingItemsVO=i},commitSortItems:function(t,e){t.activeSortItemList=e},cleanupEditingContext:function(t){t.editingItemsVO=[],t.committedFilterItemList=[]},cleanupIndexInfo:function(t){t.indexId="",t.indexInfo={}},cleanupSortItems:function(t){t.activeSortItemList=[],t.selectedSortItem=void 0},cleanupDisplayItemList:function(t){t.committedDisplayItemList=[]},cleanupFilterEditor:function(t){t.editingItemsVO=[],t.committedFilterItemList=[],t.allFilterItemList=[],t.choosingFilterItemList=[],t.unChoosingFilterItemList=[]},initChoosingFilterItemList:function(t){var e=[],i=[];t.editingItemsVO.forEach((function(i){var n=t.allFilterItemList.find((function(t){return t.fieldId===i.fieldId}));n&&(n.choosing=!0,e.push(n))})),t.allFilterItemList.forEach((function(t){0===e.filter((function(e){return e.fieldId===t.fieldId})).length&&(t.choosing=!1,i.push(t))})),t.choosingFilterItemList=e,t.unChoosingFilterItemList=i},setindexInfo:function(t,e){t.indexInfo=e},setIndexId:function(t,e){t.indexId=e,t.choosingFilterItemList=[],t.unChoosingFilterItemList=[]},chooseItem:function(t,e){var i=t.choosingFilterItemList.findIndex((function(t){return t.fieldId===e})),n=t.allFilterItemList.find((function(t){return t.fieldId===e}));if(-1===i)n.choosing=!0,t.choosingFilterItemList=[].concat(t.choosingFilterItemList).concat([n]);else{var a=t.choosingFilterItemList.filter((function(t){return t.fieldId!==e}));a.forEach((function(t){t.choosing=!0})),t.choosingFilterItemList=a}var o=t.allFilterItemList.filter((function(e){var i=-1!==t.choosingFilterItemList.findIndex((function(t){return t.fieldId===e.fieldId}));return!i}));o.forEach((function(t){t.choosing=!1})),t.unChoosingFilterItemList=o},committedToEditing:function(t){t.editingItemsVO=t.committedFilterItemList.map((function(t){return Object(o["a"])({},t)}))},resetEditingVO:function(t){t.editingItemsVO=Object(r["a"])(t.editingItemsVO).map((function(t){return Object(o["a"])(Object(o["a"])({},t),{},{value:t.hasOwnProperty("defaultValue")?t.defaultValue:[],displayLabel:""})}))},editingToCommitted:function(t){t.committedFilterItemList=t.editingItemsVO.map((function(t){return Object(o["a"])({},t)}))}},actions:{copyConfigurationList:function(){var t=Object(a["a"])(Object(n["a"])().mark((function t(e,i){var a,o,r,s,l,c;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e.dispatch,o=e.state,r=i.id,s=i.listName,l=d["b"].crm.operateConfigurationList,c={functionKey:o.functionKey,id:r,listName:s,operationType:3},uni.showLoading({title:"加载中",mask:!0}),u["a"].http.post(l,c).then((function(t){uni.hideLoading(),0===t.data.code?(uni.showToast({title:"操作成功",icon:"none"}),a("getListConfigManageVO")):uni.showToast({title:"操作失败",icon:"none"})})).catch((function(t){console.error(t)}));case 6:case"end":return t.stop()}}),t)})));return function(e,i){return t.apply(this,arguments)}}(),getConfigOrderFieldVO:function(){var t=Object(a["a"])(Object(n["a"])().mark((function t(e,i){var a,o,r,s;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.state,o=i.id,r=i.refresh,s=void 0!==r&&r,!a.activeSortItemList.length||s){t.next=4;break}return t.abrupt("return",p()(a.activeSortItemList));case 4:return t.abrupt("return",new Promise((function(t){var e=d["b"].crm.getConfigOrderFieldVO,i={functionKey:a.functionKey,configType:"order",id:o||""};u["a"].http.post(e,i).then((function(e){var i=e.data.data||[];a.activeSortItemList=i,a.selectedSortItem=i[0],t(p()(i))})).catch((function(t){console.error(t)}))})));case 5:case"end":return t.stop()}}),t)})));return function(e,i){return t.apply(this,arguments)}}(),getListConfigManageVO:function(){var t=Object(a["a"])(Object(n["a"])().mark((function t(e){var i,a,s,l;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:i=e.commit,a=e.state,s=d["b"].crm.getListConfigManageVO,l={functionKey:a.functionKey,listGroup:a.listGroup},uni.showLoading({mask:!0,title:"加载中"}),u["a"].http.post(s,l).then((function(t){var e;uni.hideLoading();var n=Date.now(),a=null===(e=Object(r["a"])(t.data.data))||void 0===e?void 0:e.map((function(t){return Object(o["a"])(Object(o["a"])({},t),{},{name:t.listName,HMDrag_id:"".concat(n,"-").concat(t.id)})})).sort((function(t,e){return t.listOrder>e.listOrder}));i("setFilterList",a)})).catch((function(t){console.error(t)}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),resortFilterList:function(){var t=Object(a["a"])(Object(n["a"])().mark((function t(e,i){var a,s,l,c,f,p,m;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e.dispatch,s=e.commit,l=e.state,c=i.moveRow,f=i.moveTo,p=d["b"].crm.changeListOrder,m={listId:c.id,listOrder:l.filterList[f].listOrder},uni.showLoading({mask:!0,title:"加载中"}),u["a"].http.post(p,m).then((function(t){if(uni.hideLoading(),0===t.data.code){var e,i=Date.now(),n=null===(e=Object(r["a"])(t.data.data))||void 0===e?void 0:e.map((function(t){return Object(o["a"])(Object(o["a"])({},t),{},{name:t.listName,HMDrag_id:"".concat(i,"-").concat(t.id)})})).sort((function(t,e){return t.listOrder>e.listOrder}));s("setFilterList",n),uni.showToast({title:"排序成功",icon:"none"})}else uni.showToast({title:"排序失败",icon:"none"}),a("getListConfigManageVO")})).catch((function(t){console.error(t)}));case 6:case"end":return t.stop()}}),t)})));return function(e,i){return t.apply(this,arguments)}}(),getEditListVO:function(){var t=Object(a["a"])(Object(n["a"])().mark((function t(e,i){var a,o,r,s;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.dispatch,e.commit,a=e.state,o=i.indexId,o){t.next=4;break}return t.abrupt("return");case 4:r=d["b"].crm.getEditListVO,s={functionKey:a.functionKey,id:o},uni.showLoading(),u["a"].http.post(r,s).then((function(t){uni.hideLoading(),0===t.data.code?(a.indexInfo=t.data.data,a.committedFilterItemList=t.data.data.listConfigurationfieldScreen.map((function(t){return h(t)}))):uni.showToast({title:t.data.message,icon:"none"})})).catch((function(t){console.error(t)}));case 8:case"end":return t.stop()}}),t)})));return function(e,i){return t.apply(this,arguments)}}(),requestUserFilterItems:function(){var t=Object(a["a"])(Object(n["a"])().mark((function t(e,i){var a,o;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.state,o=i.listId,t.abrupt("return",new Promise((function(t){try{var e=d["b"].crm.getScreenFieldInfoVO,i={functionKey:a.functionKey,configType:"screen",id:o};u["a"].http.post(e,i).then((function(e){0===e.data.code?a.committedFilterItemList=e.data.data.map((function(t){return h(t)})):uni.showToast({title:e.data.message,icon:"none"}),t()})).catch((function(e){t()}))}catch(n){t()}})));case 3:case"end":return t.stop()}}),t)})));return function(e,i){return t.apply(this,arguments)}}(),addEditingFilterItems:function(){var t=Object(a["a"])(Object(n["a"])().mark((function t(e,i){var a,o,r;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:o=e.state,r=i.items,o.editingItemsVO=null!==(a=null===r||void 0===r?void 0:r.map((function(t){var e=o.editingItemsVO.find((function(e){return(null===e||void 0===e?void 0:e.fieldId)===t.fieldId}));return e||h(t)})))&&void 0!==a?a:[];case 3:case"end":return t.stop()}}),t)})));return function(e,i){return t.apply(this,arguments)}}(),getOrderFieldInfoVO:function(){var t=Object(a["a"])(Object(n["a"])().mark((function t(e){var i,a,o,r;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:i=e.commit,a=e.state,o=d["b"].crm.getOrderFieldInfoVO,r={functionKey:a.functionKey,fieldType:"screen",clueType:a.clueType},uni.showLoading(),u["a"].http.post(o,r).then((function(t){uni.hideLoading(),0===t.data.code?(a.allFilterItemList=t.data.data,i("initChoosingFilterItemList")):uni.showToast({title:t.data.message,icon:"none"})})).catch((function(t){console.error(t)}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),operateConfigurationList:function(){var t=Object(a["a"])(Object(n["a"])().mark((function t(e,i){var a,o,r,s;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.dispatch,o=e.commit,r=e.state,s=i.operationType,t.abrupt("return",new Promise((function(t){var e,i,n=d["b"].crm.operateConfigurationList,l=r.committedFilterItemList.map((function(t,e){return{fieldDefaultValue:JSON.stringify(t.value),fieldId:t.fieldId,fieldOrder:"".concat(e)}})),c={functionKey:r.functionKey,listName:r.indexInfo.listName,operationType:s,listConfigurationOrderFieldReqList:null!==(e=r.activeSortItemList)&&void 0!==e&&e.length?r.activeSortItemList:r.indexInfo.listConfigurationfieldOrder,listConfigurationScreenFieldReqList:null!==l&&void 0!==l?l:[],listConfigurationShowFieldReqList:null!==(i=r.committedDisplayItemList)&&void 0!==i&&i.length?r.committedDisplayItemList:r.indexInfo.listConfigurationfieldShow,id:r.indexId||"",listGroup:r.listGroup,clueType:r.clueType};uni.showLoading(),u["a"].http.post(n,c).then((function(e){uni.hideLoading(),0===e.data.code?(o("cleanupFilterEditor"),o("cleanupDisplayItemList"),o("cleanupSortItems"),a("getListConfigManageVO"),uni.showToast({title:e.data.data,icon:"success"}),t(!0)):(uni.showToast({title:e.data.message,icon:"none"}),t(!1))})).catch((function(e){console.error(e),t(!1)}))})));case 3:case"end":return t.stop()}}),t)})));return function(e,i){return t.apply(this,arguments)}}()}});e["a"]=b},c809:function(t,e,i){"use strict";i.r(e);i("cb29"),i("caad"),i("14d9"),i("45fc"),i("a9e3"),i("d3b7"),i("2532");var n=["default","primary","text","danger"],a=["solid","outline"],o={name:"KtcButton",props:{text:{type:String,default:null},type:{validator:function(t){return n.includes(t)},default:"default"},fill:{validator:function(t){return a.includes(t)},default:void 0},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},permission:{type:[String,Array],default:null},width:{type:String,default:"auto"},color:{type:String,default:null},block:{type:Boolean,default:!1},debounce:{type:Number,default:0}},data:function(){return{timer:null}},computed:{hasPermission:function(){var t=this;return!this.permission||("string"===typeof this.permission?this.$store.state.user.userAuthCodes.includes(this.permission):!this.permission.length||this.permission.some((function(e){return t.$store.state.user.userAuthCodes.includes(e)})))},dynamicClass:function(){var t=[];return this.block&&t.push("is-block"),n.includes(this.type)&&t.push(this.type),a.includes(this.fill)&&t.push(this.fill),t}},methods:{handleClick:function(){var t=this;if(!this.disabled&&!this.loading){var e=function(){t.hasPermission?t.$emit("click"):uni.showToast({title:"暂无权限！",icon:"none"})};this.debounce?this.timer||(e(),this.timer=setTimeout((function(){t.timer=null}),this.debounce)):e()}}}},r=o,s=(i("30ce"),i("f0c5")),l=Object(s["a"])(r,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.hasPermission&&"text"!==t.type?i("v-uni-button",{staticClass:"ktc-button",class:t.dynamicClass,style:{width:t.width,color:t.color},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.handleClick.apply(void 0,arguments)}}},[t._t("default",[t._v(t._s(t.text))])],2):t.hasPermission&&"text"===t.type?i("v-uni-text",{style:{color:t.color},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.handleClick.apply(void 0,arguments)}}},[t._t("default",[t._v(t._s(t.text))])],2):t._e()}),[],!1,null,"2b099966",null,!1,void 0,void 0);e["default"]=l.exports},d70b:function(t,e,i){var n=i("ab39");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("1873a386",n,!0,{sourceMap:!1,shadowMode:!1})},edae:function(t,e,i){"use strict";i.r(e);var n={commonPopup:i("3003").default,tagSelect:i("c2dc").default,ktcButton:i("c809").default},a=i("f3f3"),o=(i("99af"),i("7db0"),i("caad"),i("8ba4"),i("d3b7"),i("acd8"),i("2532"),i("c0fd")),r=(i("08f3"),i("b3c5"),function(t){return t?parseFloat(t):""}),s={name:"NumberRangePopup",created:function(){},mounted:function(){this.$refs.refCommonPopup.showPopup()},watch:{item:{immediate:!0,deep:!0,handler:function(t){if([null,void 0].includes(null===t||void 0===t?void 0:t.value))return this.value={start:"",end:""},void(this.tagSelectValue=null);Array.isArray(t.value)?this.value={start:[null,void 0].includes(t.value[0])?t.value[0]:"",end:[null,void 0].includes(t.value[1])?t.value[1]:""}:this.value=Object(a["a"])({},t.value);var e=this.value,i=e.start,n=e.end,o=this.item.options.find((function(t){return r(t.start)===r(i)&&r(t.end)===r(n)}));this.tagSelectValue=o?o.value:null}}},data:function(){return{value:{start:null,end:null},tagSelectValue:null}},computed:{formatValue:function(){return{start:r(this.value.start),end:r(this.value.end)}},item:function(){return o["a"].state.popupItem},displayMode:function(){return"list"}},methods:{handlePopupClose:function(){this.cancel()},cancel:function(){this.$EventBus.$emit("number-range-popup:cancel"),this.$Router.back()},handleReset:function(){this.$EventBus.$emit("number-range-popup:change",{value:this.item.hasOwnProperty("defaultValue")?this.item.defaultValue:{start:"",end:""},displayLabel:""}),this.cancel()},handleConfirm:function(){var t=this.formatValue,e=t.start,i=t.end;if(i&&r(i)<r(e))return uni.showToast({title:"".concat(this.item.label," 的最大值不得小于最小值！"),icon:"none"});var n="";[void 0,null,""].includes(e)&&[void 0,null,""].includes(i)||(n=[void 0,"",null].includes(e)?this.item.unit?"".concat(i).concat(this.item.unit,"以内"):"".concat(i,"以内"):[void 0,"",null].includes(i)?this.item.unit?"".concat(e).concat(this.item.unit,"以上"):"".concat(e,"以上"):this.item.unit?"".concat(e," - ").concat(i).concat(this.item.unit):"".concat(e," - ").concat(i)),this.$EventBus.$emit("number-range-popup:change",{value:{start:e,end:i},displayLabel:n}),this.cancel()},onNumberRangeChange:function(t,e){var i,n,a,o=null!==(i=null!==(n=null===(a=this.item.restraint)||void 0===a?void 0:a.numberType)&&void 0!==n?n:this.item.numberType)&&void 0!==i?i:"int";if(e&&"int"===o&&!Number.isInteger(parseFloat(e)))return uni.showToast({title:"".concat(this.item.label,"：请输入整数"),icon:"none"})},handleSelectTag:function(){var t=this;if(0!==this.tagSelectValue.length){var e=this.item.options.find((function(e){return e.value===t.tagSelectValue[0]}));if(e){var i=e.start,n=e.end,a=void 0===n?"":n;this.value={start:i,end:a}}}else this.value={start:null,end:null}}}},l=s,c=(i("2d1c"),i("30ac"),i("f0c5")),u=Object(c["a"])(l,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("common-popup",{ref:"refCommonPopup",staticClass:"drop-down-wrap",attrs:{popStyle:{height:"",display:"flex",flexDirection:"column"},title:t.item&&t.item.label},on:{close:function(e){arguments[0]=e=t.$handleEvent(e),t.handlePopupClose.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"crm-view-number content-drawer-view"},[i("v-uni-view",{staticClass:"content-drawer-view-number-range mb12"},[i("v-uni-view",{staticClass:"content-drawer-view-number"},[i("v-uni-input",{staticClass:"input",attrs:{type:"number",placeholder:"请输入"},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.onNumberRangeChange(0,e.target.value)}},model:{value:t.value.start,callback:function(e){t.$set(t.value,"start",e)},expression:"value.start"}})],1),i("v-uni-view",{staticStyle:{margin:"0 10px"}},[t._v("-")]),i("v-uni-view",{staticClass:"content-drawer-view-number"},[i("v-uni-input",{staticClass:"input",attrs:{type:"number",placeholder:"请输入"},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.onNumberRangeChange(1,e.target.value)}},model:{value:t.value.end,callback:function(e){t.$set(t.value,"end",e)},expression:"value.end"}})],1),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.item.unit,expression:"item.unit"}],staticClass:"input-txt"},[t._v(t._s(t.item.unit))])],1),t.item.options?i("v-uni-view",{staticClass:"tag-list"},[i("tag-select",{attrs:{options:t.item.options,round:!1,itemWidth:"150rpx",itemHeight:"76rpx"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.handleSelectTag.apply(void 0,arguments)}},model:{value:t.tagSelectValue,callback:function(e){t.tagSelectValue=e},expression:"tagSelectValue"}})],1):t._e(),i("v-uni-view",{staticClass:"df aic mt12 pct100"},[i("ktc-button",{staticClass:"f1 mr8",attrs:{type:"default"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleReset.apply(void 0,arguments)}}},[t._v("重置")]),i("ktc-button",{staticClass:"f1",attrs:{type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleConfirm.apply(void 0,arguments)}}},[t._v(t._s("确定"))])],1)],1)],1)}),[],!1,null,"45e4f1b0",null,!1,n,void 0);e["default"]=u.exports},f3b4:function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\n\n\n/* 行为相关颜色 */.crm-view-number[data-v-1f661b44]{width:100%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-flex-wrap:wrap;flex-wrap:wrap;background:#fff;padding:15px 16px}.crm-view-number .confirm[data-v-1f661b44]{width:100%;height:%?56?%;text-align:center;line-height:%?56?%;background:#f8b500;border-radius:%?8?% %?8?% %?8?% %?8?%;font-family:PingFang SC;font-weight:400;font-size:%?28?%;color:#fff}.content-drawer-view-number-range[data-v-1f661b44]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal!important;-webkit-box-direction:normal!important;-webkit-flex-direction:row!important;flex-direction:row!important;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.content-drawer-view-number-range .input[data-v-1f661b44]{width:74px;height:30px;border-radius:4px 4px 4px 4px;border:1px solid rgba(0,0,0,.25)}.content-drawer-view-number-range .input-txt[data-v-1f661b44]{font-family:PingFang SC;font-weight:400;font-size:15px;color:rgba(0,0,0,.85);line-height:23px;margin-left:8px}.crm-view-number-single[data-v-1f661b44]{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column}.number-range-single[data-v-1f661b44]{width:100%;margin-bottom:16px;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start}',""]),t.exports=e},f61f:function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\n\n\n/* 行为相关颜色 */.drop-down-wrap[data-v-45e4f1b0]{font-size:%?26?%;position:fixed;width:100%;height:50vh;bottom:0;left:0;z-index:600;background-color:#fff;padding:0 %?24?%}.crm-view-number[data-v-45e4f1b0]{width:100%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-flex-wrap:wrap;flex-wrap:wrap;background:#fff;padding:15px 16px}.crm-view-number .confirm[data-v-45e4f1b0]{width:100%;height:%?56?%;text-align:center;line-height:%?56?%;background:#f8b500;border-radius:%?8?% %?8?% %?8?% %?8?%;font-family:PingFang SC;font-weight:400;font-size:%?28?%;color:#fff}.content-drawer-view-number-range[data-v-45e4f1b0]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal!important;-webkit-box-direction:normal!important;-webkit-flex-direction:row!important;flex-direction:row!important;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.content-drawer-view-number-range .input[data-v-45e4f1b0]{width:74px;height:30px;border-radius:4px 4px 4px 4px;border:1px solid rgba(0,0,0,.25)}.content-drawer-view-number-range .input-txt[data-v-45e4f1b0]{font-family:PingFang SC;font-weight:400;font-size:15px;color:rgba(0,0,0,.85);line-height:23px;margin-left:8px}.crm-view-number-single[data-v-45e4f1b0]{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column}.number-range-single[data-v-45e4f1b0]{width:100%;margin-bottom:16px;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start}',""]),t.exports=e},f912:function(t,e,i){"use strict";var n=i("6af9"),a=i.n(n);a.a}}]);