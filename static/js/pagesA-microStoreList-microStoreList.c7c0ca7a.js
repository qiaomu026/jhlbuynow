(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pagesA-microStoreList-microStoreList"],{"1b18":function(t,e,i){var n=i("b0ef");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("9f944dca",n,!0,{sourceMap:!1,shadowMode:!1})},"3b49":function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\n\n\n/* 行为相关颜色 */.micro-store[data-v-04b58c9c]{box-sizing:border-box;width:100%;height:100%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;overflow-y:hidden}.store-header[data-v-04b58c9c]{background-color:"#f6f3e9";position:"relative";height:"max-content";border-bottom:"1px solid #e7e7e7"}.store-header .title[data-v-04b58c9c]{font-size:16px;color:rgba(0,0,0,.9);font-weight:500;line-height:24px}.store-header .share-icon[data-v-04b58c9c]{width:20px;height:20px;font-size:18px}.micro-store-content[data-v-04b58c9c]{width:100%;-webkit-box-flex:1;-webkit-flex:1;flex:1}.back[data-v-04b58c9c]{position:absolute;top:10px;left:10px;font-size:14px}',""]),t.exports=e},"61fd":function(t,e,i){"use strict";i.r(e);var n={o2Icon:i("51db").default},a=(i("a9e3"),{name:"UniStatusBar"}),o=i("f0c5"),r=Object(o["a"])(a,(function(){var t=this.$createElement,e=this._self._c||t;return e("v-uni-view",{staticClass:"uni-status-bar",style:{height:this.statusBarHeight+"px"}},[this._t("default")],2)}),[],!1,null,"4d4bc7a2",null,!1,void 0,void 0),l=r.exports,c=i("fa7d"),s=function(t){return"number"===typeof t?t+"px":t},d={name:"UniNavBar",components:{statusBar:l},emits:["clickLeft","clickRight","clickTitle"],props:{dark:{type:Boolean,default:!1},title:{type:String,default:""},leftText:{type:String,default:""},rightText:{type:String,default:""},leftIcon:{type:String,default:"icon-LeftOutlined"},leftIconFlag:{type:Boolean,default:!0},rightIcon:{type:String,default:""},dbNavBar:{type:[Boolean,String],default:!1},fixed:{type:[Boolean,String],default:!1},color:{type:String,default:""},fontSize:{type:String,default:""},rightTextColor:{type:String,default:""},leftTextColor:{type:String,default:""},backgroundColor:{type:String,default:""},backgroundImage:{type:String,default:""},statusBar:{type:[Boolean,String],default:!1},shadow:{type:[Boolean,String],default:!1},border:{type:[Boolean,String],default:!1},height:{type:[Number,String]},rightWidth:{type:[Number,String],default:60},stat:{type:[Boolean,String],default:""},onlyLeft:{type:Boolean,default:!1},clickBackFlag:{type:Boolean,default:!1},inverted:{type:Boolean,default:!1},justifyContent:{type:String,default:"left"},invertedBackgroundColor:String,showContent:{type:Boolean,default:!0},isTransparent:{type:Boolean,default:!1}},data:function(){return{scrollTop:0,defaultBackgroundColor:this.backgroundColor,click:!1,showThemeBgColor:"",titleC:""}},computed:{themeBgColor:function(){return this.dark?this.defaultBackgroundColor?this.defaultBackgroundColor:this.dark?"#333":"#FFF":this.inverted||this.isTransparent?this.invertedBackgroundColor||"transparent":this.backgroundColor||"#FFF"},themeColor:function(){return this.dark?this.color?this.color:this.dark?"#fff":"#000000E5":this.color||"#000000E5"},navbarHeight:function(){return s(this.height||this.navBarHeight)},rightIconWidth:function(){return s(this.rightWidth)},titleStyle:function(){return Object(c["c"])({justifyContent:this.justifyContent})}},watch:{themeBgColor:{immediate:!0,handler:function(t,e){e&&e!==t&&(this.showThemeBgColor=t)}},title:{deep:!0,immediate:!0,handler:function(t,e){t!=e&&(this.titleC=t)}}},mounted:function(){uni.report&&this.stat&&""!==this.title&&(uni.report("title",this.title),this.titleC=this.title),this.showThemeBgColor=this.themeBgColor},destroyed:function(){},methods:{onClickLeft:function(){var t=this;t.click||(t.click=!0,t.clickBackFlag?(t.$emit("clickLeft"),t.click=!1):(uni.navigateBack({delta:1,fail:function(e){t.$switchTab("home")}}),t.$emit("clickLeft"),t.click=!1))},onClickRight:function(){this.$emit("clickRight")},onClickTitle:function(){this.$emit("clickTitle")}}},u=d,f=(i("e2cf"),Object(o["a"])(u,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"uni-navbar",class:{"uni-dark":t.dark,"uni-nvue-fixed":t.fixed}},[i("v-uni-view",{staticClass:"uni-navbar__content",class:{"uni-navbar--fixed":t.fixed,"uni-navbar--shadow":t.shadow,"uni-navbar--border":t.border,"uni-navbar__bgImage":t.backgroundImage},style:{background:t.themeBgColor}},[t._t("statusBar"),t.statusBar?i("status-bar"):t._e(),t.showContent?i("v-uni-view",{staticClass:"uni-navbar__header",style:{color:t.themeColor,height:t.navbarHeight}},[i("v-uni-view",{staticClass:"uni-navbar-btn-text",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onClickLeft.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"uni-nav-bar-right-text",style:{color:t.leftTextColor,fontSize:t.fontSize}},[t._v(t._s(t.leftText))])],1),"center"===t.justifyContent?i("v-uni-view",{staticClass:"uni-navbar__header-btns uni-navbar__header-btns-left",style:{width:t.leftText?"68rpx":"120rpx"}}):t._e(),t.leftIconFlag?i("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onClickLeft.apply(void 0,arguments)}}},[t._t("left",[i("v-uni-view",{staticClass:"uni-navbar__content_view"},[i("o2-icon",{attrs:{icon:t.leftIcon,color:"themeColor",size:"40rpx"}})],1)])],2):t._e(),i("v-uni-view",{staticClass:"uni-navbar__header-container",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onClickTitle.apply(void 0,arguments)}}},[t._t("default",[""!==t.titleC&&t.titleC&&"true"!==t.titleC?i("v-uni-view",{staticClass:"uni-navbar__header-container-inner",style:t.titleStyle},[i("v-uni-text",{staticClass:"uni-ellipsis-1",style:{color:t.themeColor}},[t._v(t._s(t.titleC))])],1):t._e(),i("v-uni-view",{staticClass:"no-title"})])],2),i("v-uni-view",{staticClass:"uni-navbar__header-btns uni-navbar__header-btns-right",style:{width:t.rightIconWidth},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onClickRight.apply(void 0,arguments)}}},[t._t("right",[t.rightIcon.length?i("v-uni-view",[i("o2-icon",{attrs:{color:"themeColor",icon:"icon-LeftOutlined",size:"48rpx"}})],1):t._e(),t.rightText.length&&!t.rightIcon.length?i("v-uni-view",{staticClass:"uni-navbar-btn-text"},[i("v-uni-text",{staticClass:"uni-nav-bar-right-text",style:{color:t.rightTextColor,fontSize:t.fontSize}},[t._v(t._s(t.rightText))])],1):t._e()])],2)],1):t._e(),t._t("content")],2),t.fixed&&!t.inverted?i("v-uni-view",{staticClass:"uni-navbar__placeholder"},[t.statusBar?i("status-bar"):t._e(),t.showContent?i("v-uni-view",{staticClass:"uni-navbar__placeholder-view",style:{height:t.navbarHeight}}):t._e()],1):t._e()],1)}),[],!1,null,"7873cfdb",null,!1,n,void 0));e["default"]=f.exports},6336:function(t,e,i){"use strict";i.r(e);var n={o2NavBar:i("61fd").default},a=i("f07e"),o=i("f3f3"),r=i("c964"),l=(i("99af"),i("d81d"),i("f4b3"),i("e9c4"),i("71ea")),c=i.n(l),s={name:"microStoreList",data:function(){return{h5Url:"",storeData:{},popupUrl:"",titleName:"微店管理",shareFlag:!0,detailFlag:!1}},onReady:function(){},created:function(){var t=this;return Object(r["a"])(Object(a["a"])().mark((function e(){var i,n,r,l,s,d,u;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return uni.getStorageSync("xsAppToken"),i=uni.getStorageSync("userInfo"),e.next=4,t.getStoreList();case 4:return n=e.sent,e.next=7,t.getStoreType();case 7:return r=e.sent,l={source:"app"},l.userInfo={userName:i.userChName,userCode:i.accountCode,userPhone:i.userPhone},s=null,l.merchantList=n.map((function(t,e){return t.xwCode==r.shopCode?(s={merchantName:t.xwName||null,merchantCode:t.xwCode||null,type:1},{merchantName:t.xwName||null,merchantCode:t.xwCode||null,type:1}):{merchantName:t.xwName||null,merchantCode:t.xwCode||null,type:0}})),l.selectList=s?[s.merchantCode]:[n[0].xwCode],e.next=15,t.$http.post(t.$requestUrl.mmc_vehicle.saveParams,{param:JSON.stringify(Object(o["a"])({},l))});case 15:d=e.sent,u=d.data.data.chainId,t.h5Url="".concat(c.a.WECHAT,"/index.html#/?chainId=").concat(u,"&").concat((new Date).getTime());case 18:case"end":return e.stop()}}),e)})))()},beforeDestroy:function(){uni.removeStorageSync("webviewData_microStore")},methods:{shareClick:function(){uni.navigateTo({url:this.popupUrl})},getStoreType:function(){var t=this;return Object(r["a"])(Object(a["a"])().mark((function e(){var i,n,o;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t.$store.state.user.userInfo,e.next=3,t.$http.post(t.$requestUrl.mmc_vehicle.getStoreType,{userIdList:i?[i.accountCode]:[],type:2});case 3:return e.sent,e.next=6,t.$http.post("/cartech-store-org/org/queryOrgUserByUserInfo",{userIdList:i?[i.accountCode]:[]});case 6:if(n=e.sent,0!=n.data.code){e.next=12;break}return o=n.data.data[0],e.abrupt("return",o||{});case 12:return e.abrupt("return",{});case 13:case"end":return e.stop()}}),e)})))()},getStoreList:function(){var t=this;return Object(r["a"])(Object(a["a"])().mark((function e(){var i,n,o,r;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.post(t.$requestUrl.mmc_vehicle.getStoreList,{size:999999});case 2:return i=e.sent,n=i.data.data.records.map((function(t){return t.xwCode})),e.next=6,t.$http.post(t.$requestUrl.mmc_vehicle.queryMerchantListByCode,n);case 6:if(o=e.sent,!o.data){e.next=12;break}return r=o.data.map((function(t){return{xwCode:t.merchantCode,xwName:t.merchantFullName}})),e.abrupt("return",r);case 12:return e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e)})))()},handleClose:function(){this.$refs.sharePopupRef.handleClose()},goback:function(){this.$Router.back()},handlePostMessage:function(t){var e,i=null===t||void 0===t||null===(e=t.detail)||void 0===e?void 0:e.data[0];if(uni.setStorageSync("webviewData_microStore",i),"toPhone"==(null===i||void 0===i?void 0:i.action)){var n=null===i||void 0===i?void 0:i.phoneNumber;n?uni.makePhoneCall({phoneNumber:n,success:function(t){uni.hideLoading()},fail:function(t){uni.hideLoading()}}):uni.showToast({title:"未获取到手机号",icon:"none"})}else if("toStore"==(null===i||void 0===i?void 0:i.action)){var a=null===i||void 0===i?void 0:i.storeData;this.popupUrl=(null===i||void 0===i?void 0:i.url)+"&action=".concat(i.action)||"",a?(this.detailFlag=!0,uni.setStorageSync("storeData",a)):(this.detailFlag=!1,uni.showToast({title:"未获取到门店信息",icon:"none"}))}else if("toDetail"==(null===i||void 0===i?void 0:i.action)){var o=null===i||void 0===i?void 0:i.carInfo;this.popupUrl=(null===i||void 0===i?void 0:i.url)+"&action=".concat(i.action)||"",o?(this.detailFlag=!0,uni.setStorageSync("carInfo",o)):(this.detailFlag=!1,uni.showToast({title:"未获取到车辆信息",icon:"none"}))}else if("toTitle"==(null===i||void 0===i?void 0:i.action))this.titleName=null===i||void 0===i?void 0:i.titleName,this.shareFlag=null===i||void 0===i?void 0:i.shareFlag,this.detailFlag=null===i||void 0===i?void 0:i.isChange;else if("toCarSource"==(null===i||void 0===i?void 0:i.action)){var r=null===i||void 0===i?void 0:i.carInfo;this.popupUrl=(null===i||void 0===i?void 0:i.url)+"&action=".concat(i.action)||"",r?(uni.setStorageSync("carInfo",r),uni.navigateTo({url:this.popupUrl})):uni.showToast({title:"未获取到车辆信息",icon:"none"})}else if("toCarSourceDetails"==(null===i||void 0===i?void 0:i.action)){var l=null===i||void 0===i?void 0:i.carInfo;this.popupUrl=(null===i||void 0===i?void 0:i.url)+"&action=".concat(i.action)||"",l?(this.detailFlag=!0,uni.setStorageSync("carInfo",l)):(this.detailFlag=!1,uni.showToast({title:"未获取到车辆信息",icon:"none"}))}}}},d=s,u=(i("b961"),i("f0c5")),f=Object(u["a"])(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"micro-store"},[n("v-uni-view",{staticClass:"store-header"},[n("o2-nav-bar",{attrs:{fixed:!0,title:t.titleName,"status-bar":!0},on:{clickRight:function(e){arguments[0]=e=t.$handleEvent(e),t.shareClick.apply(void 0,arguments)}}},[t.shareFlag&&t.detailFlag?n("v-uni-image",{staticClass:"share-icon",attrs:{slot:"right",src:i("ace8")},slot:"right"}):t._e()],1)],1),n("v-uni-web-view",{ref:"webview",staticClass:"micro-store-content",attrs:{src:t.h5Url},on:{message:function(e){arguments[0]=e=t.$handleEvent(e),t.handlePostMessage.apply(void 0,arguments)}}})],1)}),[],!1,null,"04b58c9c",null,!1,n,void 0);e["default"]=f.exports},"74d7":function(t,e,i){var n=i("3b49");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("4e5f38e0",n,!0,{sourceMap:!1,shadowMode:!1})},ace8:function(t,e,i){t.exports=i.p+"static/img/share.19645d1d.svg"},b0ef:function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\n\n\n/* 行为相关颜色 */.uni-navbar[data-v-7873cfdb]{z-index:999}.uni-nav-bar-text[data-v-7873cfdb]{font-size:14px}.uni-nav-bar-right-text[data-v-7873cfdb]{font-size:12px}.uni-navbar__content[data-v-7873cfdb]{position:relative;background-color:initial}.uni-navbar__bgImage[data-v-7873cfdb]{position:relative;background-size:cover;background-repeat:no-repeat;width:100%}.uni-navbar__bgImage[data-v-7873cfdb]:after{content:"";position:absolute;inset:0;background-color:rgba(0,0,0,.4);z-index:-1}.uni-navbar__content_view[data-v-7873cfdb]{padding-right:%?16?%}.uni-navbar-btn-text[data-v-7873cfdb]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;align-items:center;line-height:12px}.uni-navbar__header[data-v-7873cfdb]{display:-webkit-box;display:-webkit-flex;display:flex;padding:0 16px;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;height:44px;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.uni-navbar__header-btns[data-v-7873cfdb]{overflow:hidden;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;cursor:pointer}.uni-navbar__header-btns-left[data-v-7873cfdb]{display:-webkit-box;display:-webkit-flex;display:flex;width:%?120?%;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.uni-navbar__header-btns-right[data-v-7873cfdb]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.uni-navbar__header-container[data-v-7873cfdb]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-flex:1;-webkit-flex:1;flex:1;overflow:hidden}.uni-navbar__header-container-inner[data-v-7873cfdb]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-flex:1;-webkit-flex:1;flex:1;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;align-items:center;overflow:hidden;font-family:PingFang SC;font-size:%?32?%;font-weight:400}.uni-navbar__placeholder-view[data-v-7873cfdb]{height:44px}.uni-navbar--fixed[data-v-7873cfdb]{position:fixed;z-index:500;left:var(--window-left);right:var(--window-right)}.uni-navbar--shadow[data-v-7873cfdb]{box-shadow:0 1px 6px #ccc}.uni-navbar--border[data-v-7873cfdb]{border-bottom-width:%?1?%;border-bottom-style:solid;border-bottom-color:#eee}.uni-ellipsis-1[data-v-7873cfdb]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}',""]),t.exports=e},b961:function(t,e,i){"use strict";var n=i("74d7"),a=i.n(n);a.a},e2cf:function(t,e,i){"use strict";var n=i("1b18"),a=i.n(n);a.a}}]);