(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pagesA-priceSearchNew-index"],{"13cc":function(e,t,a){var i=a("bf37");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a("4f06").default;n("5248f8b8",i,!0,{sourceMap:!1,shadowMode:!1})},1464:function(e,t,a){"use strict";var i=a("13cc"),n=a.n(i);n.a},"42ee":function(e,t,a){"use strict";a.r(t);var i={o2NavBar:a("61fd").default,uniIndexedList:a("8ba9").default,uniDrawer:a("6e16").default,uniGroup:a("067e").default},n=a("d0ff"),r=a("f3f3"),c=(a("99af"),a("d81d"),a("14d9"),a("4e82"),a("ac1f"),a("466d"),a("8ba9")),s=a("067e"),o=a("6e16"),d=a("71ea"),l=a.n(d),h=a("56ae"),u=a("47a8"),p={name:"car-type",components:{uniIndexedList:c["default"],uniGroup:s["default"],uniDrawer:o["default"]},data:function(){return{source:null,micromessenger:!1,airportList:[],showBol:!1,carModels:null,carModelsYears:null,checkCarType:null,checkModels:null,checkModelsYears:null,carContent:[{},{},{}],checkModelsIndex:null,checkModelsChildIndex:null,carType:null}},mounted:function(){this.getFirstType()},computed:{barHeight:function(){var e=Object(h["c"])();return e}},onShow:function(e){if(uni.setNavigationBarTitle({title:"品牌车型"}),window&&window.navigator){var t=window.navigator.userAgent.toLowerCase();"micromessenger"==t.match(/MicroMessenger/i)&&(this.micromessenger=!0)}this.getFirstType()},onLoad:function(e){Object(u["a"])({type:1}),e&&e.type&&(this.carType=e.type),e&&e.source&&(this.source=e.source)},methods:{getFirstType:function(){var e=this;this.getCars(0).then((function(t){var a=(t.data.data||[]).map((function(e){return Object(r["a"])(Object(r["a"])({},e),{},{id:e.brandId,name:e.brandName,headLetter:e.brandInitial,pic:e.brandLogo,level:1})}));e.airportList=e.dataLetterSort(a,"headLetter"),e.showBol=!0}))},bindClick:function(e){this.checkCarType=e.item,this.carContent[0]=e.item,this.getModels(e.item)},closeDrawer:function(){this.$refs.showRight.close(),this.$refs.showYearRight.close()},getModels:function(e){var t=this;this.$http.post("".concat(l.a.EVA_BRAND_URL,"/vehicle/v2/series/byBrandId/maker?brandId=").concat(e.id),{id:e.id}).then((function(e){var a=(e.data.data||[]).map((function(e){var t=e.children.map((function(e){return Object(r["a"])(Object(r["a"])({},e),{},{id:e.seriesId,name:e.seriesName,siftName:e.makerName,level:3})}));return Object(r["a"])(Object(r["a"])({},e),{},{children:t})}));t.carModels=a,t.$refs.showRight.open()}))},gotoVehicleList:function(e,t){this.checkModelsIndex=e,this.checkModelsChildIndex=t,this.checkModels=this.carModels[e]["children"][t],this.carContent[1]=this.carModels[e]["children"][t];var a={brandName:this.carContent[0].name,brandId:this.carContent[0].id,seriesName:this.checkModels.name,seriesId:this.checkModels.id};Object(u["a"])({type:2,seriesId:a.seriesId+""}),uni.navigateTo({url:"/pagesA/priceSearchNew/vehicleList?brandId=".concat(a.brandId,"&seriesId=").concat(a.seriesId,"&brandName=").concat(a.brandName,"&seriesName=").concat(a.seriesName)}),this.$refs.showRight.close()},getCarsYears:function(e,t){var a=this;this.checkModelsIndex=e,this.checkModelsChildIndex=t,this.checkModels=this.carModels[e]["children"][t],this.carContent[1]=this.carModels[e]["children"][t],this.$http.post("".concat(l.a.EVA_BRAND_URL,"/vehicle/v2/model/bySeriesId?seriesId=").concat(this.checkModels.id),{id:this.checkModels.id}).then((function(e){var t=(e.data.data||[]).map((function(e){return Object(r["a"])(Object(r["a"])({},e),{},{id:e.modelId,name:e.modelName,siftName:e.year+"",level:5,localLevel:3})})),i=a.dataLetterSort(t,"siftName");a.carModelsYears=i,a.$refs.showYearRight.open()}))},getCars:function(e){return this.$http.post("".concat(l.a.EVA_BRAND_URL,"/vehicle/v2/brand"),{id:e})},getCarsDetail:function(e,t){if(!e&&0!==e||!t&&0!==t){var a,i,n={data:"",carContent:[this.carContent[0],this.carModels[this.checkModelsIndex]?this.carModels[this.checkModelsIndex]["children"][e]:null,null],nameText:[this.checkCarType.name,null===(a=this.checkModels)||void 0===a?void 0:a.name,null===(i=this.checkModelsYears)||void 0===i?void 0:i.name],source:this.source};this.carType?(this.commitData(n),uni.navigateBack({delta:1}),uni.$off("carTypeSellData")):(this.commitData(n),uni.navigateBack({delta:1}),uni.$off("carTypeData"))}else{this.checkModelsYears=this.carModelsYears[e]["children"][t],this.carContent[2]=this.carModelsYears[e]["children"][t];var r={data:this.checkModelsYears,carContent:this.carContent,nameText:[this.checkCarType.name,this.checkModels.name,this.checkModelsYears.name],source:this.source};this.carType?(this.commitData(r),uni.navigateBack({delta:1}),uni.$off("carTypeSellData")):(this.commitData(r),uni.navigateBack({delta:1}),uni.$off("carTypeData"))}},commitData:function(e){var t=e.nameText,a=Object(n["a"])(e.carContent),i=a[0]||{},c=a[1]||{},s=a[2]||{};this.$store.dispatch("evaluateCar/updateData",Object(r["a"])(Object(r["a"])({},this.$Route.query),{},{seriesName:t[1],modelName:t[2]?t[2]:null,brandId:i.id||null,brandName:i.name||null,seriesId:c.seriesId||null,speciesId:s.modelId||null,speciesName:s.modelName||null}))},dataLetterSort:function(e,t,a){e.sort((function(e,i){var n,r,c=a?(null===e||void 0===e?void 0:e.orderidx)||99999999:(null===(n=e[t])||void 0===n?void 0:n.toLowerCase())||"",s=a?(null===i||void 0===i?void 0:i.orderidx)||99999999:(null===(r=i[t])||void 0===r?void 0:r.toLowerCase())||"";return c==s?0:a||"headLetter"==t?c<s?-1:1:c>s?-1:1}));for(var i=[],n=0;n<e.length;n++){var r=e[n],c=3==r.localLevel?r[t]?r[t]+"款":"#":r[t]||"#";c&&"款"!=c||(r[t]="#"),c in i||(i[c]=[]),i[c].push(e[n])}var s=[];for(var o in i)"headLetter"==t?s.push({letter:o,data:i[o]}):s.push({name:o,children:i[o]});return s}}},f=p,v=(a("1464"),a("f0c5")),m=Object(v["a"])(f,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"price-search-brand"},[a("v-uni-view",{style:{height:e.barHeight+"px"}}),a("o2-nav-bar",{attrs:{fixed:!0,title:"选择品牌"}}),a("v-uni-view",{staticClass:"car-content"},[a("uni-indexed-list",{attrs:{options:e.airportList,haveImage:!e.micromessenger,"show-select":!1},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.bindClick.apply(void 0,arguments)}}}),a("uni-drawer",{ref:"showRight",attrs:{width:300,mode:"right","mask-click":!0}},[a("uni-group",{style:{marginTop:e.barHeight?e.barHeight+"px":"20px"}},[a("v-uni-view",[e._v(e._s(e.carContent[0].name||"不限车系"))])],1),a("v-uni-scroll-view",{style:{height:"calc(100% - "+e.barHeight+"px - 90px)"},attrs:{"scroll-y":"true"}},e._l(e.carModels,(function(t,i){return a("uni-group",{key:i,attrs:{title:t.name||"默认","margin-top":"20"}},[t.children?e._l(t.children,(function(t,n){return a("v-uni-view",{key:t.id,class:e.checkModels&&e.checkModels.id&&e.checkModels.id==t.id?"check-car":"",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.gotoVehicleList(i,n)}}},[e._v(e._s(t.name))])})):e._e()],2)})),1)],1)],1),a("v-uni-view",{staticClass:"safe-area-bottom"})],1)}),[],!1,null,"6b9c7cdd",null,!1,i,void 0);t["default"]=m.exports},"47a8":function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var i=a("f07e"),n=a("f3f3"),r=a("c964"),c=(a("a15b"),a("c1fb")),s=a("2c37"),o=(a("71ea"),a("4360")),d=function(){var e=Object(r["a"])(Object(i["a"])().mark((function e(t){var a,r,d,l;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=(o["a"].state.user.userRoleCodes||[]).join(","),r=Object(n["a"])({xwCode:o["a"].state.priceSearch.xwCode,roleCodes:a,count:1},t),d=s["b"].priceSearch.buryingPointApi,e.next=5,c["a"].http.post(d,r);case 5:l=e.sent,l.data;case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},bf37:function(e,t,a){var i=a("24fb");t=i(!1),t.push([e.i,'@charset "UTF-8";\n\n\n/* 行为相关颜色 */.price-search-brand[data-v-6b9c7cdd]{width:100vw;height:100vh;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column}.price-search-brand .car-content[data-v-6b9c7cdd]{-webkit-box-flex:1;-webkit-flex:1;flex:1;position:relative}.price-search-brand .item-check[data-v-6b9c7cdd]{color:#3db1fa!important}.price-search-brand uni-text.uni-indexed-list__item-content[data-v-6b9c7cdd]{font-size:16px}.price-search-brand .uni-group .uni-group__content[data-v-6b9c7cdd]{padding:0}.price-search-brand .uni-group .uni-group__content uni-view[data-v-6b9c7cdd]{font-size:16px;line-height:%?40?%;padding:%?25?% %?15?% %?25?% %?30?%;color:#333;border-bottom:%?1?% solid #f0f0f0}.price-search-brand .uni-group .uni-group__content uni-view.check-car[data-v-6b9c7cdd]{color:#3db1fa}.price-search-brand .safe-area-bottom[data-v-6b9c7cdd]{height:%?32?%;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}',""]),e.exports=t}}]);